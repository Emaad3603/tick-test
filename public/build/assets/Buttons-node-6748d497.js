import{D as ye,r as _,G as xe,m as _e,o as d,c as p,h as s,u as n,a,e as T,n as r,t as c,f as y,g as h,b as m,F as fe,d as he,w as ge,as as Ve,af as Te,ag as Be,l as Ue}from"./app-06066091.js";import{E as ke,_ as Ce}from"./ellipsis-479b8917.js";import{b as we,u as Le,c as B,d as U}from"./vue-flow-core-09b5630a.js";import Me from"./Menubar-fd4e5999.js";import N from"./MenubarItem-683c51fa.js";import Ne from"./MenubarContent-4d16dab4.js";import Fe from"./MenubarMenu-ddb5e274.js";import Ie from"./MenubarTrigger-3fe0db01.js";import{F as b}from"./FormInput-a5364d31.js";import{F as Re}from"./FormSelect-6c96738a.js";import{F as Se}from"./FormTextArea-248be5f8.js";import Ee from"./FlowMedia-c420161f.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";import"./createLucideIcon-61c243d3.js";import"./index-4364f7ce.js";import"./utils-9d1e612c.js";import"./index-8e47e887.js";import"./hidden-94645dc9.js";import"./use-text-value-6338b60a.js";import"./use-outside-click-6f649936.js";import"./use-resolve-button-type-737f9372.js";const u=g=>(Te("data-v-e8a6c35f"),g=g(),Be(),g),Pe={class:"rounded-sm border border-gray-200 bg-white p-3 shadow-md"},Ae={class:"flex flex-col gap-y-2"},qe={class:"flex justify-between items-center"},ze={class:"flex gap-x-2"},He=u(()=>a("img",{src:Ce,class:"mt-1 h-4 w-4",alt:"LLM icon"},null,-1)),Oe={class:"flex flex-col gap-y-1"},$e={key:1,class:"text-base"},Ze={key:0,class:"flex items-center gap-x-2 bg-red-500 text-white rounded-md px-2 py-2"},je=Ue('<span data-v-e8a6c35f><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" data-v-e8a6c35f><g fill="none" data-v-e8a6c35f><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z" data-v-e8a6c35f></path><path fill="currentColor" d="m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0M12 15a1 1 0 1 0 0 2a1 1 0 0 0 0-2m0-7a1 1 0 0 0-.993.883L11 9v4a1 1 0 0 0 1.993.117L13 13V9a1 1 0 0 0-1-1" data-v-e8a6c35f></path></g></svg></span><span class="text-sm" data-v-e8a6c35f>Please fill all the required fields</span>',2),Ge=[je],We=u(()=>a("span",{class:"text-sm text-gray-500"},"Send interactive buttons or a call to action button to your recipients.",-1)),Je={class:"mb-4"},Ke=u(()=>a("label",{class:"text-sm mb-2"},"Header (Optional)",-1)),Qe={key:1,class:"mb-4"},Xe=u(()=>a("label",{class:"text-sm mb-2"},[a("span",{class:"text-red-500"},"*"),h(" Header Text")],-1)),Ye={class:"mb-4"},et=u(()=>a("label",{class:"text-sm mb-2"},[a("span",{class:"text-red-500"},"*"),h(" Body")],-1)),tt={class:"mb-4"},at=u(()=>a("label",{class:"text-sm mb-2"},"Footer Text (Optional)",-1)),lt={class:"mb-4"},ot=u(()=>a("label",{class:"text-sm mb-2"},"Button type:",-1)),st={class:"flex space-x-4"},nt=["value"],ut={class:"ml-2 text-gray-700"},dt={key:3,class:"border rounded p-3"},it=u(()=>a("label",{class:"mb-2"},[a("span",{class:"text-red-500"},"*"),h(" Reply Buttons (atleast 1 button)")],-1)),rt={class:"mb-4 relative"},pt=u(()=>a("label",{class:"text-sm mb-2"},"Button 1 Label",-1)),ct={class:"text-xs text-gray-500"},mt={class:"mb-4 relative"},bt=u(()=>a("label",{class:"text-sm mb-2"},"Button 2 Label",-1)),vt={class:"text-xs text-gray-500"},yt={class:"mb-2 relative"},xt=u(()=>a("label",{class:"text-sm mb-2"},"Button 3 Label",-1)),_t={class:"text-xs text-gray-500"},ft={key:4,class:"border rounded p-3"},ht=u(()=>a("label",{class:"text-sm mb-2"},"CTA Button",-1)),gt={class:"mb-4"},Vt=u(()=>a("label",{class:"text-sm mb-2"},"Display text",-1)),Tt={class:"mb-4"},Bt=u(()=>a("label",{class:"text-sm mb-2"},"Button URL",-1)),f=20,Ut=ye({__name:"Buttons-node",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(g){var R,S,E,D,P,A,q,z,H,O,$,Z,j,G,W,J,K,Q,X,Y,ee,te,ae,le,oe,se,ne;const i=g,C=_("Interactive Buttons"),ue=_(i.data.uuid),e=_({type:"interactive buttons",headerType:((S=(R=i.data.metadata)==null?void 0:R.fields)==null?void 0:S.headerType)||"none",headerText:((D=(E=i.data.metadata)==null?void 0:E.fields)==null?void 0:D.headerText)||"",headerMedia:((A=(P=i.data.metadata)==null?void 0:P.fields)==null?void 0:A.headerMedia)||[],body:((z=(q=i.data.metadata)==null?void 0:q.fields)==null?void 0:z.body)||"",footer:((O=(H=i.data.metadata)==null?void 0:H.fields)==null?void 0:O.footer)||"",buttonType:((Z=($=i.data.metadata)==null?void 0:$.fields)==null?void 0:Z.buttonType)||"buttons",buttons:{button1:((W=(G=(j=i.data.metadata)==null?void 0:j.fields)==null?void 0:G.buttons)==null?void 0:W.button1)||"",button2:((Q=(K=(J=i.data.metadata)==null?void 0:J.fields)==null?void 0:K.buttons)==null?void 0:Q.button2)||"",button3:((ee=(Y=(X=i.data.metadata)==null?void 0:X.fields)==null?void 0:Y.buttons)==null?void 0:ee.button3)||""},ctaUrlButton:{displayText:((le=(ae=(te=i.data.metadata)==null?void 0:te.fields)==null?void 0:ae.ctaUrlButton)==null?void 0:le.displayText)||"",url:((ne=(se=(oe=i.data.metadata)==null?void 0:oe.fields)==null?void 0:se.ctaUrlButton)==null?void 0:ne.url)||""}}),de=_([{label:"Reply Buttons",value:"buttons"},{label:"CTA URL Button",value:"cta_url"}]),ie=_([{value:"none",label:"None"},{value:"text",label:"Text"},{value:"image",label:"Image"},{value:"video",label:"Video"},{value:"audio",label:"Audio"},{value:"document",label:"Document"}]);xe(e,o=>{x.node.data.metadata.fields={...o},o.buttons.button1||v("a"),o.buttons.button2||v("b"),o.buttons.button3||v("c"),o.buttonType=="cta_url"?(v("a"),v("b"),v("c")):v("d")},{deep:!0});const w=(o,t)=>t.length<=3,L=_(!1),x=we(),{removeNodes:re,nodes:pe,addNodes:ce,removeEdges:F,edges:I}=Le();function v(o){I.value.filter(l=>l.sourceHandle===o).forEach(l=>F(l.id))}function me(){I.value.filter(o=>o.source===x.id||o.target===x.id).forEach(o=>F(o.id)),re(x.id)}function be(){const{type:o,position:t,label:l,data:V}=x.node,k={id:(pe.value.length+1).toString(),type:o,position:{x:t.x+100,y:t.y+100},label:l,data:V};ce(k)}const ve=_e(()=>{const o=e.value.buttons.button1!==""||e.value.buttons.button2!==""||e.value.buttons.button3!=="",t=e.value.ctaUrlButton.displayText!==""&&e.value.ctaUrlButton.url!=="",l=V=>/^(https?:\/\/)([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(:\d+)?(\/\S*)?$/.test(V);return e.value.headerType!==""&&e.value.headerType==="text"&&e.value.headerText===""||e.value.headerType!==""&&e.value.headerType!=="text"&&e.value.headerType!=="none"&&e.value.headerMedia.length===0||e.value.body===""||e.value.buttonType==="buttons"&&!o||e.value.buttonType==="cta_url"&&(!t||!l(e.value.ctaUrlButton.url))});function M(o){return o.length}return(o,t)=>(d(),p("div",Pe,[s(n(U),{type:"target",position:n(B).Left},null,8,["position"]),a("div",Ae,[a("div",qe,[a("div",ze,[He,a("div",Oe,[L.value?(d(),T(b,{key:0,modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=l=>C.value=l),name:"",type:"text",class:r("col-span-4"),onBlur:t[1]||(t[1]=()=>L.value=!1)},null,8,["modelValue"])):(d(),p("h3",$e,c(C.value),1))])]),s(n(Me),{class:"border-none"},{default:y(()=>[s(n(Fe),null,{default:y(()=>[s(n(Ie),null,{default:y(()=>[s(n(ke))]),_:1}),s(n(Ne),null,{default:y(()=>[s(n(N),{onClick:be},{default:y(()=>[h(" Duplicated ")]),_:1}),s(n(N),{onClick:me},{default:y(()=>[h(" Delete ")]),_:1}),s(n(N),{onClick:t[2]||(t[2]=l=>L.value=!0)},{default:y(()=>[h(" Rename ")]),_:1})]),_:1})]),_:1})]),_:1})]),ve.value?(d(),p("div",Ze,Ge)):m("",!0),We,a("div",Je,[Ke,s(Re,{modelValue:e.value.headerType,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.headerType=l),name:"",type:"text",optionClassName:"h-32",options:ie.value,class:r("col-span-4")},null,8,["modelValue","options"])]),e.value.headerType=="text"?(d(),p("div",Qe,[Xe,s(b,{modelValue:e.value.headerText,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.headerText=l),name:"",placeholder:"Enter header text",type:"text",class:r("col-span-4")},null,8,["modelValue"])])):m("",!0),e.value.headerType!="text"&&e.value.headerType!="none"?(d(),T(Ee,{key:2,modelValue:e.value.headerMedia,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.headerMedia=l),type:e.value.headerType,uuid:ue.value,nodeId:n(x).id},null,8,["modelValue","type","uuid","nodeId"])):m("",!0),a("div",Ye,[et,s(Se,{modelValue:e.value.body,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.body=l),placeholder:"Enter the main message for this message type",name:"",type:"text",class:r("col-span-4")},null,8,["modelValue"])]),a("div",tt,[at,s(b,{modelValue:e.value.footer,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.footer=l),name:"",placeholder:"Enter footer text",type:"text",class:r("col-span-4")},null,8,["modelValue"])]),a("div",lt,[ot,a("div",st,[(d(!0),p(fe,null,he(de.value,(l,V)=>(d(),p("label",{key:V,class:"inline-flex items-center cursor-pointer text-sm"},[ge(a("input",{type:"radio",value:l.value,"onUpdate:modelValue":t[8]||(t[8]=k=>e.value.buttonType=k),class:"form-radio text-blue-500 focus:ring-0 transition duration-150 ease-in-out"},null,8,nt),[[Ve,e.value.buttonType]]),a("span",ut,c(l.label),1)]))),128))])]),e.value.buttonType=="buttons"?(d(),p("div",dt,[it,a("div",rt,[pt,s(b,{modelValue:e.value.buttons.button1,"onUpdate:modelValue":t[9]||(t[9]=l=>e.value.buttons.button1=l),maxLength:f,type:"text",class:r("col-span-4")},null,8,["modelValue"]),a("span",ct,c(M(e.value.buttons.button1))+" / "+c(f),1),e.value.buttons.button1?(d(),T(n(U),{key:0,id:"a",type:"source",position:n(B).Right,style:{right:"-25px"},connectable:w},null,8,["position"])):m("",!0)]),a("div",mt,[bt,s(b,{modelValue:e.value.buttons.button2,"onUpdate:modelValue":t[10]||(t[10]=l=>e.value.buttons.button2=l),maxLength:f,type:"text",class:r("col-span-4")},null,8,["modelValue"]),a("span",vt,c(M(e.value.buttons.button2))+" / "+c(f),1),e.value.buttons.button2?(d(),T(n(U),{key:0,id:"b",type:"source",position:n(B).Right,style:{right:"-25px"},connectable:w},null,8,["position"])):m("",!0)]),a("div",yt,[xt,s(b,{modelValue:e.value.buttons.button3,"onUpdate:modelValue":t[11]||(t[11]=l=>e.value.buttons.button3=l),maxLength:f,type:"text",class:r("col-span-4")},null,8,["modelValue"]),a("span",_t,c(M(e.value.buttons.button3))+" / "+c(f),1),e.value.buttons.button3?(d(),T(n(U),{key:0,id:"c",type:"source",position:n(B).Right,style:{right:"-25px"},connectable:w},null,8,["position"])):m("",!0)])])):m("",!0),e.value.buttonType=="cta_url"?(d(),p("div",ft,[ht,a("div",gt,[Vt,s(b,{modelValue:e.value.ctaUrlButton.displayText,"onUpdate:modelValue":t[12]||(t[12]=l=>e.value.ctaUrlButton.displayText=l),type:"text",class:r("col-span-4")},null,8,["modelValue"])]),a("div",Tt,[Bt,s(b,{modelValue:e.value.ctaUrlButton.url,"onUpdate:modelValue":t[13]||(t[13]=l=>e.value.ctaUrlButton.url=l),type:"url",class:r("col-span-4")},null,8,["modelValue"])]),s(n(U),{id:"d",type:"source",position:n(B).Right},null,8,["position"])])):m("",!0)])]))}});const Gt=De(Ut,[["__scopeId","data-v-e8a6c35f"],["__file","Buttons-node.vue"]]);export{Gt as default};
