import{r as u,T,q as j,e as M,f as y,o as l,a as t,t as i,h as p,g as D,u as m,i as O,c as n,j as H,n as b,b as $,d as I,F as P,O as q,x as V}from"./app-06066091.js";import E from"./App-3a5d1971.js";import{F as C}from"./FormSelect-6c96738a.js";import{F as R}from"./FormTextArea-248be5f8.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import"./Sidebar-53ff02b1.js";import"./Menu-18e4a0b3.js";import"./ProfileModal-9fa7d7fd.js";import"./FormInput-a5364d31.js";import"./FormPhoneInput-8d88435b.js";/* empty css                      */import"./transition-9e93c540.js";import"./hidden-94645dc9.js";import"./use-outside-click-6f649936.js";import"./micro-task-89dcd6af.js";import"./tabs-470b041d.js";import"./use-resolve-button-type-737f9372.js";import"./LangToggle-4117f8d3.js";import"./index-8e47e887.js";import"./use-text-value-6338b60a.js";import"./MobileSidebar-c90c1661.js";import"./index-2177aed8.js";/* empty css              */const G={class:"bg-white md:bg-inherit pt-0 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] overflow-y-scroll"},J={class:"flex justify-between mt-8 md:mt-0"},K={class:"text-xl mb-1"},Q=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M5.841 5.28a.75.75 0 0 0-1.06-1.06L1.53 7.47L1 8l.53.53l3.25 3.25a.75.75 0 0 0 1.061-1.06l-1.97-1.97H14.25a.75.75 0 0 0 0-1.5H3.871l1.97-1.97Z","clip-rule":"evenodd"})],-1),W={class:"grid grid-cols-2 md:flex gap-x-6 mt-4 md:mt-10"},X={class:"col-span-2 md:order-1 md:w-[70%]"},Y={class:"bg-white md:border py-5 md:px-5 rounded-[0.5rem] mb-4 text-sm"},tt={class:"text-xl"},et={class:"border border-dashed py-2 px-2 mt-8 bg-slate-100"},st={key:0,class:"bg-white border py-5 px-5 rounded-[0.5rem] mb-4"},ot={type:"submit",class:"mb-2 rounded-md bg-black px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"},it={class:"flex space-x-4 text-sm"},at={class:"bg-slate-100 rounded-full h-12 w-12 p-4 flex justify-center items-center"},lt={class:"space-x-4 mb-1"},nt={class:"col-span-2 w-[100%] md:order-2 md:w-[30%]"},rt={class:"bg-white md:border md:p-4 text-sm rounded-[0.5rem]"},dt={class:"bg-slate-100 p-2 rounded mb-2 space-x-3"},ct={class:"capitalize"},ut={class:"bg-slate-100 p-2 rounded mb-2 space-x-3"},pt={class:"capitalize"},mt={class:"bg-slate-100 p-2 rounded mb-2 space-x-3"},bt={key:0,class:"capitalize"},vt={key:1,class:"capitalize"},ft={class:"bg-slate-100 p-2 rounded mb-2 space-x-3"},ht={key:0,class:"capitalize"},gt={key:1,class:"capitalize"},_t={class:"bg-slate-100 p-2 rounded mb-2 space-x-3"},kt={key:0,class:"flex grid grid-cols-2 space-x-2 mt-4"},xt={__name:"View",props:["title","ticket","users"],setup(S){const e=S,v=u(e.ticket.priority),f=u(e.ticket.assigned_to),h=u([]),r=T({message:null}),U=u([{value:"critical",label:"Critical"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]),g=s=>{const o={month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(s).toLocaleString("en-US",o)},z=(s,o)=>{const d=s.charAt(0).toUpperCase(),c=o.charAt(0).toUpperCase();return`${d}${c}`},A=()=>{r.post("/admin/support/"+e.ticket.uuid+"/comment",{preserveScroll:!0,onSuccess:()=>r.reset()})},_=s=>{q.post("/admin/support/"+e.ticket.uuid+"/status",{status:s})},F=s=>s.map(o=>({value:o.id,label:o.first_name+" "+o.last_name})),L=async s=>{try{const o=await V.post("/admin/support/"+e.ticket.uuid+"/assign",{user:s})}catch{}},B=async s=>{try{const o=await V.post("/admin/support/"+e.ticket.uuid+"/priority",{priority:s})}catch{}};return j(()=>{h.value=F(e.users)}),(s,o)=>(l(),M(E,null,{default:y(()=>{var d,c,k,x,w;return[t("div",G,[t("div",J,[t("div",null,[t("h1",K,i(s.$t("Ticket ref"))+": "+i(e.ticket.reference),1)]),t("div",null,[p(m(O),{href:"/admin/support",class:"flex items-center space-x-4 rounded-md bg-indigo-600 px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:y(()=>[Q,D(" "+i(s.$t("Back")),1)]),_:1})])]),t("div",W,[t("div",X,[t("div",Y,[t("h1",tt,i(s.$t("Subject"))+": "+i(e.ticket.subject),1),t("div",et,i(e.ticket.message),1)]),e.ticket.status==="open"||e.ticket.status==="pending"?(l(),n("div",st,[t("form",{onSubmit:o[1]||(o[1]=H(a=>A(),["prevent"]))},[p(R,{modelValue:m(r).message,"onUpdate:modelValue":o[0]||(o[0]=a=>m(r).message=a),name:s.$t("Comment"),type:"text",showLabel:!0,error:m(r).errors.message,textAreaRows:3,class:b("sm:col-span-6 mb-5")},null,8,["modelValue","name","error"]),t("button",ot,i(s.$t("Add comment")),1)],32)])):$("",!0),(l(!0),n(P,null,I(e.ticket.comments_with_user,(a,N)=>(l(),n("div",{key:N,class:"bg-white border py-5 px-5 rounded-[0.5rem] mb-2"},[t("div",it,[t("div",null,[t("div",at,i(z(a.user.first_name,a.user.last_name)),1)]),t("div",null,[t("div",lt,[t("span",null,i(a.user.first_name+" "+a.user.last_name),1),t("span",null,i(g(a.created_at)),1)]),t("div",null,i(a.message),1)])])]))),128))]),t("div",nt,[t("div",rt,[t("div",dt,[t("span",null,i(s.$t("Category"))+":",1),t("span",ct,i(e.ticket.category.name),1)]),t("div",ut,[t("span",null,i(s.$t("Status"))+":",1),t("span",pt,i(e.ticket.status),1)]),t("div",mt,[t("span",null,i(s.$t("Priority"))+":",1),e.ticket.status==="open"||e.ticket.status==="pending"?(l(),n("span",bt,[p(C,{modelValue:v.value,"onUpdate:modelValue":[o[2]||(o[2]=a=>v.value=a),B],options:U.value,class:b("w-full"),placeholder:"Not Set"},null,8,["modelValue","options"])])):(l(),n("span",vt,i(e.ticket.priority),1))]),t("div",ft,[t("span",null,i(s.$t("Assigned to"))+":",1),e.ticket.status==="open"||e.ticket.status==="pending"?(l(),n("span",ht,[p(C,{modelValue:f.value,"onUpdate:modelValue":[o[3]||(o[3]=a=>f.value=a),L],options:h.value,class:b("w-full"),placeholder:"Select User"},null,8,["modelValue","options"])])):(l(),n("span",gt,i((d=e.ticket)!=null&&d.agent?((k=(c=e.ticket)==null?void 0:c.agent)==null?void 0:k.first_name)+" "+((w=(x=e.ticket)==null?void 0:x.agent)==null?void 0:w.last_name):s.$t("Not set")),1))]),t("div",_t,[t("span",null,i(s.$t("Date created"))+":",1),t("span",null,i(g(e.ticket.created_at)),1)]),e.ticket.status==="open"||e.ticket.status==="pending"?(l(),n("div",kt,[t("button",{onClick:o[4]||(o[4]=a=>_("closed")),class:"mb-2 rounded-md bg-black px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"},i(s.$t("Close ticket")),1),t("button",{onClick:o[5]||(o[5]=a=>_("resolved")),class:"mb-2 rounded-md bg-black px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"},i(s.$t("Mark as resolved")),1)])):$("",!0)])])])])]}),_:1}))}},Rt=Z(xt,[["__file","View.vue"]]);export{Rt as default};
