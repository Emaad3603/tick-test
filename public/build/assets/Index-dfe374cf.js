import{o as i,c as u,h as s,f as t,g as r,t as l,F as $,d as R,e as g,n as T,a as o,b as _,u as w,i as A,k as O,x as C,r as I,O as L}from"./app-06066091.js";import{A as j}from"./App-53e90ba2.js";import{A as M}from"./AlertModal-04f87487.js";import{u as N}from"./useAlertModal-20c1d6c7.js";import{l as F}from"./index-2177aed8.js";/* empty css              */import{T as H}from"./Table-593fb9c4.js";import{T as P,a as S,b as f}from"./TableHeaderRowItem-58f056c6.js";import{T as Z,a as z,b as h}from"./TableBodyRowItem-f7a16ee1.js";import{D as J}from"./Dropdown-82fc851d.js";import{D as U,a as k}from"./DropdownItem-f7277231.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import"./Sidebar-56399b82.js";import"./Menu-32707887.js";import"./Modal-858f9f8a.js";import"./transition-9e93c540.js";import"./hidden-94645dc9.js";import"./use-outside-click-6f649936.js";import"./micro-task-89dcd6af.js";import"./ProfileModal-9fa7d7fd.js";import"./FormInput-a5364d31.js";import"./FormPhoneInput-8d88435b.js";/* empty css                      */import"./FormSelect-6c96738a.js";import"./index-8e47e887.js";import"./use-text-value-6338b60a.js";import"./use-resolve-button-type-737f9372.js";import"./tabs-470b041d.js";import"./LangToggle-4117f8d3.js";import"./OrganizationModal-94b0dd29.js";import"./MobileSidebar-c9250509.js";import"./Pagination-d90e3b69.js";import"./use-tree-walker-26135af6.js";const Y={class:"py-1 px-2 bg-gray-50 rounded-[5px] border border-dashed w-[20em] truncate text-xs"},q={key:0,class:"py-1 rounded-[5px] text-xs px-3 bg-[#ebfdf4] text-[#38733f]"},G={key:1,class:"py-1 rounded-[5px] text-xs px-3 bg-[#fae6e6] text-[darkred]"},K={key:2,class:"py-1 rounded-[5px] text-xs px-3 bg-[#ddebf7] text-slate-700"},Q=o("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[o("span",{class:"hover:bg-[#F6F7F9] hover:rounded-full w-[fit-content] p-2"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[o("path",{fill:"currentColor",d:"M12 16a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2Z"})])])],-1),W={key:0,class:"bg-white rounded-xl"},X={class:"p-4 py-8"},ee=o("div",{class:"flex justify-center mb-4"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 32 32"},[o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"2",d:"M12 15h8m-8 4h8m8 5V11c0-1.105-.892-2-1.997-2H17c-2 0-2-3-5-3H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2Z"})])],-1),te={class:"text-center text-lg font-medium mb-4"},se={class:"flex justify-center"},oe={key:0},ae={__name:"TemplateTable",props:{rows:{type:Object,required:!0}},emits:["delete"],setup(p,{emit:x}){const n=p,{isOpenAlert:b,openAlert:c,confirmAlert:y}=N(),B=async e=>{try{const d=await C.delete(`/templates/${e}`);if(d.status===200&&d.data.success){const a=n.rows.data.findIndex(m=>m.uuid===e);n.rows.data.splice(a,1)}F(d.data.message,{autoClose:3e3})}catch{}},V=e=>e===n.rows.data.length-1,v=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),E=e=>{const a=JSON.parse(e).components.find(m=>m.type==="BODY");return a?a.text:"N/A"};return(e,d)=>(i(),u($,null,[s(H,{rows:p.rows},{default:t(()=>[s(P,null,{default:t(()=>[s(S,null,{default:t(()=>[s(f,{position:"first"},{default:t(()=>[r(l(e.$t("Name")),1)]),_:1}),s(f,null,{default:t(()=>[r(l(e.$t("Category")),1)]),_:1}),s(f,null,{default:t(()=>[r(l(e.$t("Preview")),1)]),_:1}),s(f,null,{default:t(()=>[r(l(e.$t("Status")),1)]),_:1}),s(f,null,{default:t(()=>[r(l(e.$t("Last updated")),1)]),_:1}),s(f,{position:"last"})]),_:1})]),_:1}),s(Z,null,{default:t(()=>[(i(!0),u($,null,R(p.rows.data,(a,m)=>(i(),g(z,{key:m,class:T(V(m)?"":"border-b")},{default:t(()=>[s(h,{position:"first"},{default:t(()=>[r(l(a.name),1)]),_:2},1024),s(h,{class:"hidden sm:table-cell"},{default:t(()=>[r(l(v(a.category)),1)]),_:2},1024),s(h,{class:"hidden sm:table-cell"},{default:t(()=>[o("div",Y,l(E(a.metadata)),1)]),_:2},1024),s(h,null,{default:t(()=>[a.status=="APPROVED"?(i(),u("span",q,l(e.$t(v(a.status))),1)):a.status=="REJECTED"?(i(),u("span",G,l(e.$t(v(a.status))),1)):(i(),u("span",K,l(e.$t(v(a.status))),1))]),_:2},1024),s(h,{class:"hidden sm:table-cell"},{default:t(()=>[r(l(a.updated_at),1)]),_:2},1024),s(h,{position:"last"},{default:t(()=>[s(J,{align:"right",class:"mt-2"},{items:t(()=>[s(U,null,{default:t(()=>[a.status=="APPROVED"||a.status=="REJECTED"||a.status=="PAUSED"?(i(),g(k,{key:0,href:"/templates/"+a.uuid},{default:t(()=>[r(l(e.$t("edit")),1)]),_:2},1032,["href"])):_("",!0),s(k,{as:"button",onClick:_e=>w(c)(a.uuid)},{default:t(()=>[r(l(e.$t("Delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[Q]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["rows"]),p.rows.data.length==0?(i(),u("div",W,[o("div",X,[ee,o("h3",te,l(e.$t("You don't have any templates")),1),o("div",se,[s(w(A),{href:"/templates/create",class:"rounded-md px-3 py-2 text-sm hover:shadow-md text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 bg-primary",disabled:e.isLoading},{default:t(()=>[e.isLoading?_("",!0):(i(),u("span",oe,l(e.$t("Create template")),1))]),_:1},8,["disabled"])])])])):_("",!0),s(M,{modelValue:w(b),"onUpdate:modelValue":d[0]||(d[0]=a=>O(b)?b.value=a:null),onConfirm:d[1]||(d[1]=()=>w(y)(B)),label:e.$t("Delete row"),description:e.$t("Are you sure you want to delete this row? This action can not be undone")},null,8,["modelValue","label","description"])],64))}},le=D(ae,[["__file","TemplateTable.vue"]]),ie={class:"bg-white md:bg-inherit pt-0 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] overflow-y-scroll capitalize"},re={class:"flex justify-between mt-8 md:mt-0"},ne={class:"text-xl mb-1"},de={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},ue=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),ce={class:"ml-1 mt-1"},pe={class:"space-x-2 flex items-center"},me=["disabled"],fe={key:0},he={key:1,class:"text-slate-600 animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},be=o("path",{fill:"currentColor",d:"M18.43 4.25a.76.76 0 0 0-.75.75v2.43l-.84-.84a7.24 7.24 0 0 0-12 2.78a.74.74 0 0 0 .46 1a.73.73 0 0 0 .25 0a.76.76 0 0 0 .71-.51a5.63 5.63 0 0 1 1.37-2.2a5.76 5.76 0 0 1 8.13 0l.84.84h-2.41a.75.75 0 0 0 0 1.5h4.24a.74.74 0 0 0 .75-.75V5a.75.75 0 0 0-.75-.75Zm.25 9.43a.76.76 0 0 0-1 .47a5.63 5.63 0 0 1-1.37 2.2a5.76 5.76 0 0 1-8.13 0l-.84-.84h2.47a.75.75 0 0 0 0-1.5H5.57a.74.74 0 0 0-.75.75V19a.75.75 0 0 0 1.5 0v-2.43l.84.84a7.24 7.24 0 0 0 12-2.78a.74.74 0 0 0-.48-.95Z"},null,-1),we=[be],ve={__name:"Index",props:{rows:Object},setup(p){const x=p,n=I(!1),b=()=>{n.value=!0,C.get("/templates/sync").then(function(c){L.reload(),setTimeout(()=>{n.value=!1},1500)}).catch(function(c){n.value=!1})};return(c,y)=>(i(),g(j,null,{default:t(()=>[o("div",ie,[o("div",re,[o("div",null,[o("h2",ne,l(c.$t("Message templates")),1),o("p",de,[ue,o("span",ce,l(c.$t("Add template")),1)])]),o("div",pe,[o("button",{onClick:b,class:T(["rounded-md px-3 py-2 text-sm text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 capitalize",n.value?"bg-gray-200":"bg-indigo-600 hover:bg-indigo-500 shadow-sm"]),disabled:n.value},[n.value?(i(),u("svg",he,we)):(i(),u("span",fe,l(c.$t("Sync templates")),1))],10,me),s(w(A),{href:"/templates/create",class:"md:block hidden rounded-md bg-indigo-600 px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:t(()=>[r(l(c.$t("Create template")),1)]),_:1})])]),s(le,{rows:x.rows},null,8,["rows"])])]),_:1}))}},Xe=D(ve,[["__file","Index.vue"]]);export{Xe as default};
