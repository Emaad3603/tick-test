import{z as tr,A as ar,r as V0,S as qa,m as Xt,q as At,E as ca,o as z,c as a0,a as p,t as A0,b as I0,j as W1,h as Ae,u as xe,w as la,v as oa,a4 as Oa,n as ke,F as u1,l as Qe,x as wt,K as Xa,T as na,f as Ve,i as nt,e as v1,g as He,O as yt,R as Da,G as Mt,d as K1,D as Za,a5 as Pa,V as qt,W as ia,a6 as St,J as sr,a7 as rr,a8 as nr}from"./app-06066091.js";import{g as ir,A as lr}from"./App-53e90ba2.js";import{C as or}from"./CampaignForm-8771becd.js";import{P as Va}from"./style-39293b16.js";import{_ as $1}from"./_plugin-vue_export-helper-c27b6911.js";import{A as _r}from"./AlertModal-04f87487.js";import{D as cr}from"./Dropdown-82fc851d.js";import{D as ur,a as Ft}from"./DropdownItem-f7277231.js";import{F as vr}from"./FormSelectCombo-70d234e8.js";import{F as hr}from"./FormTextArea-248be5f8.js";import{M as Ya}from"./Modal-858f9f8a.js";import{t as dr}from"./index-8e47e887.js";import{d as fr}from"./debounce-26497136.js";import{P as mr}from"./Pagination-d90e3b69.js";import{C as pr}from"./ContactInfo-93a69535.js";import"./Sidebar-56399b82.js";import"./Menu-32707887.js";import"./ProfileModal-9fa7d7fd.js";import"./FormInput-a5364d31.js";import"./FormPhoneInput-8d88435b.js";/* empty css                      */import"./FormSelect-6c96738a.js";import"./hidden-94645dc9.js";import"./use-text-value-6338b60a.js";import"./use-outside-click-6f649936.js";import"./use-resolve-button-type-737f9372.js";import"./transition-9e93c540.js";import"./micro-task-89dcd6af.js";import"./tabs-470b041d.js";import"./LangToggle-4117f8d3.js";import"./OrganizationModal-94b0dd29.js";import"./index-2177aed8.js";import"./MobileSidebar-c9250509.js";/* empty css              */import"./WhatsappTemplate-b3fa2415.js";import"./use-tree-walker-26135af6.js";import"./_baseGetTag-c09aeb4c.js";var ja={exports:{}};(function(g,K){(function(Q,p0){g.exports=p0()})(tr,function(){function Q(M){return new Int8Array(M)}function p0(M){return new Int16Array(M)}function n0(M){return new Int32Array(M)}function w0(M){return new Float32Array(M)}function c0(M){return new Float64Array(M)}function H0(M){if(M.length==1)return w0(M[0]);var F=M[0];M=M.slice(1);for(var j=[],q=0;q<F;q++)j.push(H0(M));return j}function ne(M){if(M.length==1)return n0(M[0]);var F=M[0];M=M.slice(1);for(var j=[],q=0;q<F;q++)j.push(ne(M));return j}function K0(M){if(M.length==1)return p0(M[0]);var F=M[0];M=M.slice(1);for(var j=[],q=0;q<F;q++)j.push(K0(M));return j}function j0(M){if(M.length==1)return new Array(M[0]);var F=M[0];M=M.slice(1);for(var j=[],q=0;q<F;q++)j.push(j0(M));return j}var D0={};D0.fill=function(M,F,j,q){if(arguments.length==2)for(var i0=0;i0<M.length;i0++)M[i0]=arguments[1];else for(var i0=F;i0<j;i0++)M[i0]=q};var Z0={};Z0.arraycopy=function(M,F,j,q,i0){for(var X=F+i0;F<X;)j[q++]=M[F++]};var z0={};z0.SQRT2=1.4142135623730951,z0.FAST_LOG10=function(M){return Math.log10(M)},z0.FAST_LOG10_X=function(M,F){return Math.log10(M)*F};function B0(M){this.ordinal=M}B0.short_block_allowed=new B0(0),B0.short_block_coupled=new B0(1),B0.short_block_dispensed=new B0(2),B0.short_block_forced=new B0(3);var S0={};S0.MAX_VALUE=34028235e31;function m0(M){this.ordinal=M}m0.vbr_off=new m0(0),m0.vbr_mt=new m0(1),m0.vbr_rh=new m0(2),m0.vbr_abr=new m0(3),m0.vbr_mtrh=new m0(4),m0.vbr_default=m0.vbr_mtrh;var r0=function(M){},G={System:Z0,VbrMode:m0,Float:S0,ShortBlock:B0,Util:z0,Arrays:D0,new_array_n:j0,new_byte:Q,new_double:c0,new_float:w0,new_float_n:H0,new_int:n0,new_int_n:ne,new_short:p0,new_short_n:K0,assert:r0},ee=G.System,P0=G.Util,we=G.Arrays,Ce=G.new_float;function se(){var M=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*P0.SQRT2*.5/2384e-9,.017876148*P0.SQRT2*.5/2384e-9,.003134727*P0.SQRT2*.5/2384e-9,.002457142*P0.SQRT2*.5/2384e-9,971317e-9*P0.SQRT2*.5/2384e-9,218868e-9*P0.SQRT2*.5/2384e-9,101566e-9*P0.SQRT2*.5/2384e-9,13828e-9*P0.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],F=12,j=36,q=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],i0=q[f.SHORT_TYPE],X=q[f.SHORT_TYPE],W=q[f.SHORT_TYPE],v0=q[f.SHORT_TYPE],d0=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function C(w,B,e){for(var O=10,L=B+238-14-286,T=-15;T<0;T++){var r,h,x;r=M[O+-10],h=w[L+-224]*r,x=w[B+224]*r,r=M[O+-9],h+=w[L+-160]*r,x+=w[B+160]*r,r=M[O+-8],h+=w[L+-96]*r,x+=w[B+96]*r,r=M[O+-7],h+=w[L+-32]*r,x+=w[B+32]*r,r=M[O+-6],h+=w[L+32]*r,x+=w[B+-32]*r,r=M[O+-5],h+=w[L+96]*r,x+=w[B+-96]*r,r=M[O+-4],h+=w[L+160]*r,x+=w[B+-160]*r,r=M[O+-3],h+=w[L+224]*r,x+=w[B+-224]*r,r=M[O+-2],h+=w[B+-256]*r,x-=w[L+256]*r,r=M[O+-1],h+=w[B+-192]*r,x-=w[L+192]*r,r=M[O+0],h+=w[B+-128]*r,x-=w[L+128]*r,r=M[O+1],h+=w[B+-64]*r,x-=w[L+64]*r,r=M[O+2],h+=w[B+0]*r,x-=w[L+0]*r,r=M[O+3],h+=w[B+64]*r,x-=w[L+-64]*r,r=M[O+4],h+=w[B+128]*r,x-=w[L+-128]*r,r=M[O+5],h+=w[B+192]*r,x-=w[L+-192]*r,h*=M[O+6],r=x-h,e[30+T*2]=x+h,e[31+T*2]=M[O+7]*r,O+=18,B--,L++}{var h,x,y,R;x=w[B+-16]*M[O+-10],h=w[B+-32]*M[O+-2],x+=(w[B+-48]-w[B+16])*M[O+-9],h+=w[B+-96]*M[O+-1],x+=(w[B+-80]+w[B+48])*M[O+-8],h+=w[B+-160]*M[O+0],x+=(w[B+-112]-w[B+80])*M[O+-7],h+=w[B+-224]*M[O+1],x+=(w[B+-144]+w[B+112])*M[O+-6],h-=w[B+32]*M[O+2],x+=(w[B+-176]-w[B+144])*M[O+-5],h-=w[B+96]*M[O+3],x+=(w[B+-208]+w[B+176])*M[O+-4],h-=w[B+160]*M[O+4],x+=(w[B+-240]-w[B+208])*M[O+-3],h-=w[B+224],y=h-x,R=h+x,x=e[14],h=e[15]-x,e[31]=R+x,e[30]=y+h,e[15]=y-h,e[14]=R-x}{var t;t=e[28]-e[0],e[0]+=e[28],e[28]=t*M[O+-2*18+7],t=e[29]-e[1],e[1]+=e[29],e[29]=t*M[O+-2*18+7],t=e[26]-e[2],e[2]+=e[26],e[26]=t*M[O+-4*18+7],t=e[27]-e[3],e[3]+=e[27],e[27]=t*M[O+-4*18+7],t=e[24]-e[4],e[4]+=e[24],e[24]=t*M[O+-6*18+7],t=e[25]-e[5],e[5]+=e[25],e[25]=t*M[O+-6*18+7],t=e[22]-e[6],e[6]+=e[22],e[22]=t*P0.SQRT2,t=e[23]-e[7],e[7]+=e[23],e[23]=t*P0.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],t=e[6],e[6]=e[31]-t,e[31]=e[31]+t,t=e[7],e[7]=e[30]-t,e[30]=e[30]+t,t=e[22],e[22]=e[15]-t,e[15]=e[15]+t,t=e[23],e[23]=e[14]-t,e[14]=e[14]+t,t=e[20]-e[8],e[8]+=e[20],e[20]=t*M[O+-10*18+7],t=e[21]-e[9],e[9]+=e[21],e[21]=t*M[O+-10*18+7],t=e[18]-e[10],e[10]+=e[18],e[18]=t*M[O+-12*18+7],t=e[19]-e[11],e[11]+=e[19],e[19]=t*M[O+-12*18+7],t=e[16]-e[12],e[12]+=e[16],e[16]=t*M[O+-14*18+7],t=e[17]-e[13],e[13]+=e[17],e[17]=t*M[O+-14*18+7],t=-e[20]+e[24],e[20]+=e[24],e[24]=t*M[O+-12*18+7],t=-e[21]+e[25],e[21]+=e[25],e[25]=t*M[O+-12*18+7],t=e[4]-e[8],e[4]+=e[8],e[8]=t*M[O+-12*18+7],t=e[5]-e[9],e[5]+=e[9],e[9]=t*M[O+-12*18+7],t=e[0]-e[12],e[0]+=e[12],e[12]=t*M[O+-4*18+7],t=e[1]-e[13],e[1]+=e[13],e[13]=t*M[O+-4*18+7],t=e[16]-e[28],e[16]+=e[28],e[28]=t*M[O+-4*18+7],t=-e[17]+e[29],e[17]+=e[29],e[29]=t*M[O+-4*18+7],t=P0.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=t,t=P0.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=t,t=P0.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=t-e[18],t=P0.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=t-e[19],t=e[2],e[19]-=e[3],e[3]-=t,e[2]=e[31]-t,e[31]+=t,t=e[3],e[11]-=e[19],e[18]-=t,e[3]=e[30]-t,e[30]+=t,t=e[18],e[27]-=e[11],e[19]-=t,e[18]=e[15]-t,e[15]+=t,t=e[19],e[10]-=t,e[19]=e[14]-t,e[14]+=t,t=e[10],e[11]-=t,e[10]=e[23]-t,e[23]+=t,t=e[11],e[26]-=t,e[11]=e[22]-t,e[22]+=t,t=e[26],e[27]-=t,e[26]=e[7]-t,e[7]+=t,t=e[27],e[27]=e[6]-t,e[6]+=t,t=P0.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=t,t=P0.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=t,t=P0.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=t,t=P0.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=t,t=-P0.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=t-e[8],t=-P0.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=t-e[9],t=-P0.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=t-e[25],t=-P0.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=t-e[24],t=e[24]-e[16],e[24]=t,t=e[20]-t,e[20]=t,t=e[28]-t,e[28]=t,t=e[25]-e[17],e[25]=t,t=e[21]-t,e[21]=t,t=e[29]-t,e[29]=t,t=e[17]-e[1],e[17]=t,t=e[9]-t,e[9]=t,t=e[25]-t,e[25]=t,t=e[5]-t,e[5]=t,t=e[21]-t,e[21]=t,t=e[13]-t,e[13]=t,t=e[29]-t,e[29]=t,t=e[1]-e[0],e[1]=t,t=e[16]-t,e[16]=t,t=e[17]-t,e[17]=t,t=e[8]-t,e[8]=t,t=e[9]-t,e[9]=t,t=e[24]-t,e[24]=t,t=e[25]-t,e[25]=t,t=e[4]-t,e[4]=t,t=e[5]-t,e[5]=t,t=e[20]-t,e[20]=t,t=e[21]-t,e[21]=t,t=e[12]-t,e[12]=t,t=e[13]-t,e[13]=t,t=e[28]-t,e[28]=t,t=e[29]-t,e[29]=t,t=e[0],e[0]+=e[31],e[31]-=t,t=e[1],e[1]+=e[30],e[30]-=t,t=e[16],e[16]+=e[15],e[15]-=t,t=e[17],e[17]+=e[14],e[14]-=t,t=e[8],e[8]+=e[23],e[23]-=t,t=e[9],e[9]+=e[22],e[22]-=t,t=e[24],e[24]+=e[7],e[7]-=t,t=e[25],e[25]+=e[6],e[6]-=t,t=e[4],e[4]+=e[27],e[27]-=t,t=e[5],e[5]+=e[26],e[26]-=t,t=e[20],e[20]+=e[11],e[11]-=t,t=e[21],e[21]+=e[10],e[10]-=t,t=e[12],e[12]+=e[19],e[19]-=t,t=e[13],e[13]+=e[18],e[18]-=t,t=e[28],e[28]+=e[3],e[3]-=t,t=e[29],e[29]+=e[2],e[2]-=t}}function s0(w,B){for(var e=0;e<3;e++){var O,L,T,r,h,x;r=w[B+2*3]*q[f.SHORT_TYPE][0]-w[B+5*3],O=w[B+0*3]*q[f.SHORT_TYPE][2]-w[B+3*3],L=r+O,T=r-O,r=w[B+5*3]*q[f.SHORT_TYPE][0]+w[B+2*3],O=w[B+3*3]*q[f.SHORT_TYPE][2]+w[B+0*3],h=r+O,x=-r+O,O=(w[B+1*3]*q[f.SHORT_TYPE][1]-w[B+4*3])*2069978111953089e-26,r=(w[B+4*3]*q[f.SHORT_TYPE][1]+w[B+1*3])*2069978111953089e-26,w[B+3*0]=L*190752519173728e-25+O,w[B+3*5]=-h*190752519173728e-25+r,T=T*.8660254037844387*1907525191737281e-26,h=h*.5*1907525191737281e-26+r,w[B+3*1]=T-h,w[B+3*2]=T+h,L=L*.5*1907525191737281e-26-O,x=x*.8660254037844387*1907525191737281e-26,w[B+3*3]=L+x,w[B+3*4]=L-x,B++}}function b(w,B,e){var O,L;{var T,r,h,x,y,R,t,v;T=e[17]-e[9],h=e[15]-e[11],x=e[14]-e[12],y=e[0]+e[8],R=e[1]+e[7],t=e[2]+e[6],v=e[3]+e[5],w[B+17]=y+t-v-(R-e[4]),L=(y+t-v)*X[12+7]+(R-e[4]),O=(T-h-x)*X[12+6],w[B+5]=O+L,w[B+6]=O-L,r=(e[16]-e[10])*X[12+6],R=R*X[12+7]+e[4],O=T*X[12+0]+r+h*X[12+1]+x*X[12+2],L=-y*X[12+4]+R-t*X[12+5]+v*X[12+3],w[B+1]=O+L,w[B+2]=O-L,O=T*X[12+1]-r-h*X[12+2]+x*X[12+0],L=-y*X[12+5]+R-t*X[12+3]+v*X[12+4],w[B+9]=O+L,w[B+10]=O-L,O=T*X[12+2]-r+h*X[12+0]-x*X[12+1],L=y*X[12+3]-R+t*X[12+4]-v*X[12+5],w[B+13]=O+L,w[B+14]=O-L}{var _,n,c,u,s,i,l,S;_=e[8]-e[0],c=e[6]-e[2],u=e[5]-e[3],s=e[17]+e[9],i=e[16]+e[10],l=e[15]+e[11],S=e[14]+e[12],w[B+0]=s+l+S+(i+e[13]),O=(s+l+S)*X[12+7]-(i+e[13]),L=(_-c+u)*X[12+6],w[B+11]=O+L,w[B+12]=O-L,n=(e[7]-e[1])*X[12+6],i=e[13]-i*X[12+7],O=s*X[12+3]-i+l*X[12+4]+S*X[12+5],L=_*X[12+2]+n+c*X[12+0]+u*X[12+1],w[B+3]=O+L,w[B+4]=O-L,O=-s*X[12+5]+i-l*X[12+3]-S*X[12+4],L=_*X[12+1]+n-c*X[12+2]-u*X[12+0],w[B+7]=O+L,w[B+8]=O-L,O=-s*X[12+4]+i-l*X[12+5]-S*X[12+3],L=_*X[12+0]-n+c*X[12+1]-u*X[12+2],w[B+15]=O+L,w[B+16]=O-L}}this.mdct_sub48=function(w,B,e){for(var O=B,L=286,T=0;T<w.channels_out;T++){for(var r=0;r<w.mode_gr;r++){for(var h,x=w.l3_side.tt[r][T],y=x.xr,R=0,t=w.sb_sample[T][1-r],v=0,_=0;_<18/2;_++)for(C(O,L,t[v]),C(O,L+32,t[v+1]),v+=2,L+=64,h=1;h<32;h+=2)t[v-1][h]*=-1;for(h=0;h<32;h++,R+=18){var n=x.block_type,c=w.sb_sample[T][r],u=w.sb_sample[T][1-r];if(x.mixed_block_flag!=0&&h<2&&(n=0),w.amp_filter[h]<1e-12)we.fill(y,R+0,R+18,0);else{if(w.amp_filter[h]<1)for(var _=0;_<18;_++)u[_][d0[h]]*=w.amp_filter[h];if(n==f.SHORT_TYPE){for(var _=-F/4;_<0;_++){var s=q[f.SHORT_TYPE][_+3];y[R+_*3+9]=c[9+_][d0[h]]*s-c[8-_][d0[h]],y[R+_*3+18]=c[14-_][d0[h]]*s+c[15+_][d0[h]],y[R+_*3+10]=c[15+_][d0[h]]*s-c[14-_][d0[h]],y[R+_*3+19]=u[2-_][d0[h]]*s+u[3+_][d0[h]],y[R+_*3+11]=u[3+_][d0[h]]*s-u[2-_][d0[h]],y[R+_*3+20]=u[8-_][d0[h]]*s+u[9+_][d0[h]]}s0(y,R)}else{for(var i=Ce(18),_=-j/4;_<0;_++){var l,S;l=q[n][_+27]*u[_+9][d0[h]]+q[n][_+36]*u[8-_][d0[h]],S=q[n][_+9]*c[_+9][d0[h]]-q[n][_+18]*c[8-_][d0[h]],i[_+9]=l-S*i0[3+_+9],i[_+18]=l*i0[3+_+9]+S}b(y,R,i)}}if(n!=f.SHORT_TYPE&&h!=0)for(var _=7;_>=0;--_){var P,k;P=y[R+_]*W[20+_]+y[R+-1-_]*v0[28+_],k=y[R+_]*v0[28+_]-y[R+-1-_]*W[20+_],y[R+-1-_]=P,y[R+_]=k}}}if(O=e,L=286,w.mode_gr==1)for(var V=0;V<18;V++)ee.arraycopy(w.sb_sample[T][1][V],0,w.sb_sample[T][0][V],0,32)}}}var oe=se,ge=G.System,W0=G.new_float,Q0=G.new_float_n;function ie(){this.l=W0(f.SBMAX_l),this.s=Q0([f.SBMAX_s,3]);var M=this;this.assign=function(F){ge.arraycopy(F.l,0,M.l,0,f.SBMAX_l);for(var j=0;j<f.SBMAX_s;j++)for(var q=0;q<3;q++)M.s[j][q]=F.s[j][q]}}var Fe=ie;function h1(){this.thm=new Fe,this.en=new Fe}var d1=h1,t1=G.System,We=G.VbrMode,a1=G.new_array_n,s1=G.new_float,S1=G.new_float_n,M1=G.new_int,Ye=G.assert;q0.ENCDELAY=576,q0.POSTDELAY=1152,q0.MDCTDELAY=48,q0.FFTOFFSET=224+q0.MDCTDELAY,q0.DECDELAY=528,q0.SBLIMIT=32,q0.CBANDS=64,q0.SBPSY_l=21,q0.SBPSY_s=12,q0.SBMAX_l=22,q0.SBMAX_s=13,q0.PSFB21=6,q0.PSFB12=6,q0.BLKSIZE=1024,q0.HBLKSIZE=q0.BLKSIZE/2+1,q0.BLKSIZE_s=256,q0.HBLKSIZE_s=q0.BLKSIZE_s/2+1,q0.NORM_TYPE=0,q0.START_TYPE=1,q0.SHORT_TYPE=2,q0.STOP_TYPE=3,q0.MPG_MD_LR_LR=0,q0.MPG_MD_LR_I=1,q0.MPG_MD_MS_LR=2,q0.MPG_MD_MS_I=3,q0.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function q0(){var M=oe,F=d1,j=q0.FFTOFFSET,q=q0.MPG_MD_MS_LR,i0=null;this.psy=null;var X=null,W=null,v0=null;this.setModules=function(w,B,e,O){i0=w,this.psy=B,X=B,W=O,v0=e};var d0=new M;function C(w){var B,e;if(w.ATH.useAdjust==0){w.ATH.adjust=1;return}if(e=w.loudness_sq[0][0],B=w.loudness_sq[1][0],w.channels_out==2?(e+=w.loudness_sq[0][1],B+=w.loudness_sq[1][1]):(e+=e,B+=B),w.mode_gr==2&&(e=Math.max(e,B)),e*=.5,e*=w.ATH.aaSensitivityP,e>.03125)w.ATH.adjust>=1?w.ATH.adjust=1:w.ATH.adjust<w.ATH.adjustLimit&&(w.ATH.adjust=w.ATH.adjustLimit),w.ATH.adjustLimit=1;else{var O=31.98*e+625e-6;w.ATH.adjust>=O?(w.ATH.adjust*=O*.075+.925,w.ATH.adjust<O&&(w.ATH.adjust=O)):w.ATH.adjustLimit>=O?w.ATH.adjust=O:w.ATH.adjust<w.ATH.adjustLimit&&(w.ATH.adjust=w.ATH.adjustLimit),w.ATH.adjustLimit=O}}function s0(w){var B,e;for(Ye(0<=w.bitrate_index&&w.bitrate_index<16),Ye(0<=w.mode_ext&&w.mode_ext<4),w.bitrate_stereoMode_Hist[w.bitrate_index][4]++,w.bitrate_stereoMode_Hist[15][4]++,w.channels_out==2&&(w.bitrate_stereoMode_Hist[w.bitrate_index][w.mode_ext]++,w.bitrate_stereoMode_Hist[15][w.mode_ext]++),B=0;B<w.mode_gr;++B)for(e=0;e<w.channels_out;++e){var O=w.l3_side.tt[B][e].block_type|0;w.l3_side.tt[B][e].mixed_block_flag!=0&&(O=4),w.bitrate_blockType_Hist[w.bitrate_index][O]++,w.bitrate_blockType_Hist[w.bitrate_index][5]++,w.bitrate_blockType_Hist[15][O]++,w.bitrate_blockType_Hist[15][5]++}}function b(w,B){var e=w.internal_flags,O,L;if(e.lame_encode_frame_init==0){var T,r,h=s1(2014),x=s1(286+1152+576);for(e.lame_encode_frame_init=1,T=0,r=0;T<286+576*(1+e.mode_gr);++T)T<576*e.mode_gr?(h[T]=0,e.channels_out==2&&(x[T]=0)):(h[T]=B[0][r],e.channels_out==2&&(x[T]=B[1][r]),++r);for(L=0;L<e.mode_gr;L++)for(O=0;O<e.channels_out;O++)e.l3_side.tt[L][O].block_type=q0.SHORT_TYPE;d0.mdct_sub48(e,h,x),Ye(e.mf_size>=q0.BLKSIZE+w.framesize-q0.FFTOFFSET),Ye(e.mf_size>=512+w.framesize-32)}}this.lame_encode_mp3_frame=function(w,B,e,O,L,T){var r,h=a1([2,2]);h[0][0]=new F,h[0][1]=new F,h[1][0]=new F,h[1][1]=new F;var x=a1([2,2]);x[0][0]=new F,x[0][1]=new F,x[1][0]=new F,x[1][1]=new F;var y,R=[null,null],t=w.internal_flags,v=S1([2,4]),_=[.5,.5],n=[[0,0],[0,0]],c=[[0,0],[0,0]],u,s,i;if(R[0]=B,R[1]=e,t.lame_encode_frame_init==0&&b(w,R),t.padding=0,(t.slot_lag-=t.frac_SpF)<0&&(t.slot_lag+=w.out_samplerate,t.padding=1),t.psymodel!=0){var l,S=[null,null],P=0,k=M1(2);for(i=0;i<t.mode_gr;i++){for(s=0;s<t.channels_out;s++)S[s]=R[s],P=576+i*576-q0.FFTOFFSET;if(w.VBR==We.vbr_mtrh||w.VBR==We.vbr_mt?l=X.L3psycho_anal_vbr(w,S,P,i,h,x,n[i],c[i],v[i],k):l=X.L3psycho_anal_ns(w,S,P,i,h,x,n[i],c[i],v[i],k),l!=0)return-4;for(w.mode==Te.JOINT_STEREO&&(_[i]=v[i][2]+v[i][3],_[i]>0&&(_[i]=v[i][3]/_[i])),s=0;s<t.channels_out;s++){var V=t.l3_side.tt[i][s];V.block_type=k[s],V.mixed_block_flag=0}}}else for(i=0;i<t.mode_gr;i++)for(s=0;s<t.channels_out;s++)t.l3_side.tt[i][s].block_type=q0.NORM_TYPE,t.l3_side.tt[i][s].mixed_block_flag=0,c[i][s]=n[i][s]=700;if(C(t),d0.mdct_sub48(t,R[0],R[1]),t.mode_ext=q0.MPG_MD_LR_LR,w.force_ms)t.mode_ext=q0.MPG_MD_MS_LR;else if(w.mode==Te.JOINT_STEREO){var a=0,o=0;for(i=0;i<t.mode_gr;i++)for(s=0;s<t.channels_out;s++)a+=c[i][s],o+=n[i][s];if(a<=1*o){var Y=t.l3_side.tt[0],J=t.l3_side.tt[t.mode_gr-1];Y[0].block_type==Y[1].block_type&&J[0].block_type==J[1].block_type&&(t.mode_ext=q0.MPG_MD_MS_LR)}}if(t.mode_ext==q?(y=x,u=c):(y=h,u=n),w.analysis&&t.pinfo!=null)for(i=0;i<t.mode_gr;i++)for(s=0;s<t.channels_out;s++)t.pinfo.ms_ratio[i]=t.ms_ratio[i],t.pinfo.ms_ener_ratio[i]=_[i],t.pinfo.blocktype[i][s]=t.l3_side.tt[i][s].block_type,t.pinfo.pe[i][s]=u[i][s],t1.arraycopy(t.l3_side.tt[i][s].xr,0,t.pinfo.xr[i][s],0,576),t.mode_ext==q&&(t.pinfo.ers[i][s]=t.pinfo.ers[i][s+2],t1.arraycopy(t.pinfo.energy[i][s+2],0,t.pinfo.energy[i][s],0,t.pinfo.energy[i][s].length));if(w.VBR==We.vbr_off||w.VBR==We.vbr_abr){var h0,y0;for(h0=0;h0<18;h0++)t.nsPsy.pefirbuf[h0]=t.nsPsy.pefirbuf[h0+1];for(y0=0,i=0;i<t.mode_gr;i++)for(s=0;s<t.channels_out;s++)y0+=u[i][s];for(t.nsPsy.pefirbuf[18]=y0,y0=t.nsPsy.pefirbuf[9],h0=0;h0<9;h0++)y0+=(t.nsPsy.pefirbuf[h0]+t.nsPsy.pefirbuf[18-h0])*q0.fircoef[h0];for(y0=670*5*t.mode_gr*t.channels_out/y0,i=0;i<t.mode_gr;i++)for(s=0;s<t.channels_out;s++)u[i][s]*=y0}if(t.iteration_loop.iteration_loop(w,u,_,y),i0.format_bitstream(w),r=i0.copy_buffer(t,O,L,T,1),w.bWriteVbrTag&&W.addVbrFrame(w),w.analysis&&t.pinfo!=null){for(s=0;s<t.channels_out;s++){var f0;for(f0=0;f0<j;f0++)t.pinfo.pcmdata[s][f0]=t.pinfo.pcmdata[s][f0+w.framesize];for(f0=j;f0<1600;f0++)t.pinfo.pcmdata[s][f0]=R[s][f0-j]}v0.set_frame_pinfo(w,y)}return s0(t),r}}var f=q0,H1=G.Util,k1=G.new_float;function C1(){var M=k1(f.BLKSIZE),F=k1(f.BLKSIZE_s/2),j=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function q(X,W,v0){var d0=0,C,s0,b;v0<<=1;var w=W+v0;C=4;do{var B,e,O,L,T,r,h;h=C>>1,L=C,T=C<<1,r=T+L,C=T<<1,s0=W,b=s0+h;do{var x,y,R,t;y=X[s0+0]-X[s0+L],x=X[s0+0]+X[s0+L],t=X[s0+T]-X[s0+r],R=X[s0+T]+X[s0+r],X[s0+T]=x-R,X[s0+0]=x+R,X[s0+r]=y-t,X[s0+L]=y+t,y=X[b+0]-X[b+L],x=X[b+0]+X[b+L],t=H1.SQRT2*X[b+r],R=H1.SQRT2*X[b+T],X[b+T]=x-R,X[b+0]=x+R,X[b+r]=y-t,X[b+L]=y+t,b+=C,s0+=C}while(s0<w);for(e=j[d0+0],B=j[d0+1],O=1;O<h;O++){var v,_;v=1-2*B*B,_=2*B*e,s0=W+O,b=W+L-O;do{var n,c,u,x,y,s,R,i,t,l;c=_*X[s0+L]-v*X[b+L],n=v*X[s0+L]+_*X[b+L],y=X[s0+0]-n,x=X[s0+0]+n,s=X[b+0]-c,u=X[b+0]+c,c=_*X[s0+r]-v*X[b+r],n=v*X[s0+r]+_*X[b+r],t=X[s0+T]-n,R=X[s0+T]+n,l=X[b+T]-c,i=X[b+T]+c,c=B*R-e*l,n=e*R+B*l,X[s0+T]=x-n,X[s0+0]=x+n,X[b+r]=s-c,X[b+L]=s+c,c=e*i-B*t,n=B*i+e*t,X[b+T]=u-n,X[b+0]=u+n,X[s0+r]=y-c,X[s0+L]=y+c,b+=C,s0+=C}while(s0<w);v=e,e=v*j[d0+0]-B*j[d0+1],B=v*j[d0+1]+B*j[d0+0]}d0+=2}while(C<v0)}var i0=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(X,W,v0,d0,C){for(var s0=0;s0<3;s0++){var b=f.BLKSIZE_s/2,w=65535&576/3*(s0+1),B=f.BLKSIZE_s/8-1;do{var e,O,L,T,r,h=i0[B<<2]&255;e=F[h]*d0[v0][C+h+w],r=F[127-h]*d0[v0][C+h+w+128],O=e-r,e=e+r,L=F[h+64]*d0[v0][C+h+w+64],r=F[63-h]*d0[v0][C+h+w+192],T=L-r,L=L+r,b-=4,W[s0][b+0]=e+L,W[s0][b+2]=e-L,W[s0][b+1]=O+T,W[s0][b+3]=O-T,e=F[h+1]*d0[v0][C+h+w+1],r=F[126-h]*d0[v0][C+h+w+129],O=e-r,e=e+r,L=F[h+65]*d0[v0][C+h+w+65],r=F[62-h]*d0[v0][C+h+w+193],T=L-r,L=L+r,W[s0][b+f.BLKSIZE_s/2+0]=e+L,W[s0][b+f.BLKSIZE_s/2+2]=e-L,W[s0][b+f.BLKSIZE_s/2+1]=O+T,W[s0][b+f.BLKSIZE_s/2+3]=O-T}while(--B>=0);q(W[s0],b,f.BLKSIZE_s/2)}},this.fft_long=function(X,W,v0,d0,C){var s0=f.BLKSIZE/8-1,b=f.BLKSIZE/2;do{var w,B,e,O,L,T=i0[s0]&255;w=M[T]*d0[v0][C+T],L=M[T+512]*d0[v0][C+T+512],B=w-L,w=w+L,e=M[T+256]*d0[v0][C+T+256],L=M[T+768]*d0[v0][C+T+768],O=e-L,e=e+L,b-=4,W[b+0]=w+e,W[b+2]=w-e,W[b+1]=B+O,W[b+3]=B-O,w=M[T+1]*d0[v0][C+T+1],L=M[T+513]*d0[v0][C+T+513],B=w-L,w=w+L,e=M[T+257]*d0[v0][C+T+257],L=M[T+769]*d0[v0][C+T+769],O=e-L,e=e+L,W[b+f.BLKSIZE/2+0]=w+e,W[b+f.BLKSIZE/2+2]=w-e,W[b+f.BLKSIZE/2+1]=B+O,W[b+f.BLKSIZE/2+3]=B-O}while(--s0>=0);q(W,b,f.BLKSIZE/2)},this.init_fft=function(X){for(var W=0;W<f.BLKSIZE;W++)M[W]=.42-.5*Math.cos(2*Math.PI*(W+.5)/f.BLKSIZE)+.08*Math.cos(4*Math.PI*(W+.5)/f.BLKSIZE);for(var W=0;W<f.BLKSIZE_s/2;W++)F[W]=.5*(1-Math.cos(2*Math.PI*(W+.5)/f.BLKSIZE_s))}}var I1=C1,r1=G.VbrMode,$0=G.Float,E0=G.ShortBlock,L0=G.Util,A1=G.Arrays,ve=G.new_float,Oe=G.new_float_n,f1=G.new_int,Y0=G.assert;function Rt(){var M=new I1,F=2.302585092994046,j=2,q=16,i0=2,X=16,W=.34,v0=1/(14752*14752)/(f.BLKSIZE/2),d0=.01,C=.8,s0=.6,b=.3,w=3.5,B=21,e=.2302585093;function O(d){return d}function L(d,m){for(var E=0,I=0;I<f.BLKSIZE/2;++I)E+=d[I]*m.ATH.eql_w[I];return E*=v0,E}function T(d,m,E,I,$,A,H,D,N,e0,Z){var t0=d.internal_flags;if(N<2)M.fft_long(t0,I[$],N,e0,Z),M.fft_short(t0,A[H],N,e0,Z);else if(N==2){for(var M0=f.BLKSIZE-1;M0>=0;--M0){var g0=I[$+0][M0],l0=I[$+1][M0];I[$+0][M0]=(g0+l0)*L0.SQRT2*.5,I[$+1][M0]=(g0-l0)*L0.SQRT2*.5}for(var O0=2;O0>=0;--O0)for(var M0=f.BLKSIZE_s-1;M0>=0;--M0){var g0=A[H+0][O0][M0],l0=A[H+1][O0][M0];A[H+0][O0][M0]=(g0+l0)*L0.SQRT2*.5,A[H+1][O0][M0]=(g0-l0)*L0.SQRT2*.5}}m[0]=I[$+0][0],m[0]*=m[0];for(var M0=f.BLKSIZE/2-1;M0>=0;--M0){var U=I[$+0][f.BLKSIZE/2-M0],T0=I[$+0][f.BLKSIZE/2+M0];m[f.BLKSIZE/2-M0]=(U*U+T0*T0)*.5}for(var O0=2;O0>=0;--O0){E[O0][0]=A[H+0][O0][0],E[O0][0]*=E[O0][0];for(var M0=f.BLKSIZE_s/2-1;M0>=0;--M0){var U=A[H+0][O0][f.BLKSIZE_s/2-M0],T0=A[H+0][O0][f.BLKSIZE_s/2+M0];E[O0][f.BLKSIZE_s/2-M0]=(U*U+T0*T0)*.5}}{for(var G0=0,M0=11;M0<f.HBLKSIZE;M0++)G0+=m[M0];t0.tot_ener[N]=G0}if(d.analysis){for(var M0=0;M0<f.HBLKSIZE;M0++)t0.pinfo.energy[D][N][M0]=t0.pinfo.energy_save[N][M0],t0.pinfo.energy_save[N][M0]=m[M0];t0.pinfo.pe[D][N]=t0.pe[N]}d.athaa_loudapprox==2&&N<2&&(t0.loudness_sq[D][N]=t0.loudness_sq_save[N],t0.loudness_sq_save[N]=L(m,t0))}var r=8,h=23,x=15,y,R,t,v=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function _(){y=Math.pow(10,(r+1)/16),R=Math.pow(10,(h+1)/16),t=Math.pow(10,x/10)}var n=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],c=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],u=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function s(d,m,E,I,$,A){var H;if(m>d)if(m<d*R)H=m/d;else return d+m;else{if(d>=m*R)return d+m;H=d/m}if(d+=m,I+3<=3+3){if(H>=y)return d;var D=0|L0.FAST_LOG10_X(H,16);return d*c[D]}var D=0|L0.FAST_LOG10_X(H,16);if(A!=0?m=$.ATH.cb_s[E]*$.ATH.adjust:m=$.ATH.cb_l[E]*$.ATH.adjust,d<t*m){if(d>m){var N,e0;return N=1,D<=13&&(N=u[D]),e0=L0.FAST_LOG10_X(d/m,10/15),d*((n[D]-N)*e0+N)}return D>13?d:d*u[D]}return d*n[D]}var i=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function l(d,m,E){var I;if(d<0&&(d=0),m<0&&(m=0),d<=0)return m;if(m<=0)return d;if(m>d?I=m/d:I=d/m,-2<=E&&E<=2){if(I>=y)return d+m;var $=0|L0.FAST_LOG10_X(I,16);return(d+m)*i[$]}return I<R?d+m:(d<m&&(d=m),d)}function S(d,m){var E=d.internal_flags;if(E.channels_out>1){for(var I=0;I<f.SBMAX_l;I++){var $=E.thm[0].l[I],A=E.thm[1].l[I];E.thm[0].l[I]+=A*m,E.thm[1].l[I]+=$*m}for(var I=0;I<f.SBMAX_s;I++)for(var H=0;H<3;H++){var $=E.thm[0].s[I][H],A=E.thm[1].s[I][H];E.thm[0].s[I][H]+=A*m,E.thm[1].s[I][H]+=$*m}}}function P(d){for(var m=0;m<f.SBMAX_l;m++)if(!(d.thm[0].l[m]>1.58*d.thm[1].l[m]||d.thm[1].l[m]>1.58*d.thm[0].l[m])){var E=d.mld_l[m]*d.en[3].l[m],I=Math.max(d.thm[2].l[m],Math.min(d.thm[3].l[m],E));E=d.mld_l[m]*d.en[2].l[m];var $=Math.max(d.thm[3].l[m],Math.min(d.thm[2].l[m],E));d.thm[2].l[m]=I,d.thm[3].l[m]=$}for(var m=0;m<f.SBMAX_s;m++)for(var A=0;A<3;A++)if(!(d.thm[0].s[m][A]>1.58*d.thm[1].s[m][A]||d.thm[1].s[m][A]>1.58*d.thm[0].s[m][A])){var E=d.mld_s[m]*d.en[3].s[m][A],I=Math.max(d.thm[2].s[m][A],Math.min(d.thm[3].s[m][A],E));E=d.mld_s[m]*d.en[2].s[m][A];var $=Math.max(d.thm[3].s[m][A],Math.min(d.thm[2].s[m][A],E));d.thm[2].s[m][A]=I,d.thm[3].s[m][A]=$}}function k(d,m,E){var I=m,$=Math.pow(10,E);m*=2,I*=2;for(var A=0;A<f.SBMAX_l;A++){var H,D,N,e0;if(e0=d.ATH.cb_l[d.bm_l[A]]*$,H=Math.min(Math.max(d.thm[0].l[A],e0),Math.max(d.thm[1].l[A],e0)),D=Math.max(d.thm[2].l[A],e0),N=Math.max(d.thm[3].l[A],e0),H*m<D+N){var Z=H*I/(D+N);D*=Z,N*=Z}d.thm[2].l[A]=Math.min(D,d.thm[2].l[A]),d.thm[3].l[A]=Math.min(N,d.thm[3].l[A])}$*=f.BLKSIZE_s/f.BLKSIZE;for(var A=0;A<f.SBMAX_s;A++)for(var t0=0;t0<3;t0++){var H,D,N,e0;if(e0=d.ATH.cb_s[d.bm_s[A]]*$,H=Math.min(Math.max(d.thm[0].s[A][t0],e0),Math.max(d.thm[1].s[A][t0],e0)),D=Math.max(d.thm[2].s[A][t0],e0),N=Math.max(d.thm[3].s[A][t0],e0),H*m<D+N){var Z=H*m/(D+N);D*=Z,N*=Z}d.thm[2].s[A][t0]=Math.min(d.thm[2].s[A][t0],D),d.thm[3].s[A][t0]=Math.min(d.thm[3].s[A][t0],N)}}function V(d,m,E,I,$){var A,H,D=0,N=0;for(A=H=0;A<f.SBMAX_s;++H,++A){for(var e0=d.bo_s[A],Z=d.npart_s,t0=e0<Z?e0:Z;H<t0;)Y0(m[H]>=0),Y0(E[H]>=0),D+=m[H],N+=E[H],H++;if(d.en[I].s[A][$]=D,d.thm[I].s[A][$]=N,H>=Z){++A;break}Y0(m[H]>=0),Y0(E[H]>=0);{var M0=d.PSY.bo_s_weight[A],g0=1-M0;D=M0*m[H],N=M0*E[H],d.en[I].s[A][$]+=D,d.thm[I].s[A][$]+=N,D=g0*m[H],N=g0*E[H]}}for(;A<f.SBMAX_s;++A)d.en[I].s[A][$]=0,d.thm[I].s[A][$]=0}function a(d,m,E,I){var $,A,H=0,D=0;for($=A=0;$<f.SBMAX_l;++A,++$){for(var N=d.bo_l[$],e0=d.npart_l,Z=N<e0?N:e0;A<Z;)Y0(m[A]>=0),Y0(E[A]>=0),H+=m[A],D+=E[A],A++;if(d.en[I].l[$]=H,d.thm[I].l[$]=D,A>=e0){++$;break}Y0(m[A]>=0),Y0(E[A]>=0);{var t0=d.PSY.bo_l_weight[$],M0=1-t0;H=t0*m[A],D=t0*E[A],d.en[I].l[$]+=H,d.thm[I].l[$]+=D,H=M0*m[A],D=M0*E[A]}}for(;$<f.SBMAX_l;++$)d.en[I].l[$]=0,d.thm[I].l[$]=0}function o(d,m,E,I,$,A){var H=d.internal_flags,D,N;for(N=D=0;N<H.npart_s;++N){for(var e0=0,Z=H.numlines_s[N],t0=0;t0<Z;++t0,++D){var M0=m[A][D];e0+=M0}E[N]=e0}for(Y0(N==H.npart_s),D=N=0;N<H.npart_s;N++){var g0=H.s3ind_s[N][0],l0=H.s3_ss[D++]*E[g0];for(++g0;g0<=H.s3ind_s[N][1];)l0+=H.s3_ss[D]*E[g0],++D,++g0;{var O0=i0*H.nb_s1[$][N];I[N]=Math.min(l0,O0)}if(H.blocktype_old[$&1]==f.SHORT_TYPE){var O0=X*H.nb_s2[$][N],U=I[N];I[N]=Math.min(O0,U)}H.nb_s2[$][N]=H.nb_s1[$][N],H.nb_s1[$][N]=l0,Y0(I[N]>=0)}for(;N<=f.CBANDS;++N)E[N]=0,I[N]=0}function Y(d,m,E,I){var $=d.internal_flags;d.short_blocks==E0.short_block_coupled&&!(m[0]!=0&&m[1]!=0)&&(m[0]=m[1]=0);for(var A=0;A<$.channels_out;A++)I[A]=f.NORM_TYPE,d.short_blocks==E0.short_block_dispensed&&(m[A]=1),d.short_blocks==E0.short_block_forced&&(m[A]=0),m[A]!=0?(Y0($.blocktype_old[A]!=f.START_TYPE),$.blocktype_old[A]==f.SHORT_TYPE&&(I[A]=f.STOP_TYPE)):(I[A]=f.SHORT_TYPE,$.blocktype_old[A]==f.NORM_TYPE&&($.blocktype_old[A]=f.START_TYPE),$.blocktype_old[A]==f.STOP_TYPE&&($.blocktype_old[A]=f.SHORT_TYPE)),E[A]=$.blocktype_old[A],$.blocktype_old[A]=I[A]}function J(d,m,E){return E>=1?d:E<=0?m:m>0?Math.pow(d/m,E)*m:0}var h0=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function y0(d,m){for(var E=309.07,I=0;I<f.SBMAX_s-1;I++)for(var $=0;$<3;$++){var A=d.thm.s[I][$];if(A>0){var H=A*m,D=d.en.s[I][$];D>H&&(D>H*1e10?E+=h0[I]*(10*F):E+=h0[I]*L0.FAST_LOG10(D/H))}}return E}var f0=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function x0(d,m){for(var E=281.0575,I=0;I<f.SBMAX_l-1;I++){var $=d.thm.l[I];if($>0){var A=$*m,H=d.en.l[I];H>A&&(H>A*1e10?E+=f0[I]*(10*F):E+=f0[I]*L0.FAST_LOG10(H/A))}}return E}function F0(d,m,E,I,$){var A,H;for(A=H=0;A<d.npart_l;++A){var D=0,N=0,e0;for(e0=0;e0<d.numlines_l[A];++e0,++H){var Z=m[H];D+=Z,N<Z&&(N=Z)}E[A]=D,I[A]=N,$[A]=D*d.rnumlines_l[A],Y0(d.rnumlines_l[A]>=0),Y0(E[A]>=0),Y0(I[A]>=0),Y0($[A]>=0)}}function k0(d,m,E,I){var $=v.length-1,A=0,H=E[A]+E[A+1];if(H>0){var D=m[A];D<m[A+1]&&(D=m[A+1]),Y0(d.numlines_l[A]+d.numlines_l[A+1]-1>0),H=20*(D*2-H)/(H*(d.numlines_l[A]+d.numlines_l[A+1]-1));var N=0|H;N>$&&(N=$),I[A]=N}else I[A]=0;for(A=1;A<d.npart_l-1;A++)if(H=E[A-1]+E[A]+E[A+1],H>0){var D=m[A-1];D<m[A]&&(D=m[A]),D<m[A+1]&&(D=m[A+1]),Y0(d.numlines_l[A-1]+d.numlines_l[A]+d.numlines_l[A+1]-1>0),H=20*(D*3-H)/(H*(d.numlines_l[A-1]+d.numlines_l[A]+d.numlines_l[A+1]-1));var N=0|H;N>$&&(N=$),I[A]=N}else I[A]=0;if(Y0(A==d.npart_l-1),H=E[A-1]+E[A],H>0){var D=m[A-1];D<m[A]&&(D=m[A]),Y0(d.numlines_l[A-1]+d.numlines_l[A]-1>0),H=20*(D*2-H)/(H*(d.numlines_l[A-1]+d.numlines_l[A]-1));var N=0|H;N>$&&(N=$),I[A]=N}else I[A]=0;Y0(A==d.npart_l-1)}var b0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(d,m,E,I,$,A,H,D,N,e0){var Z=d.internal_flags,t0=Oe([2,f.BLKSIZE]),M0=Oe([2,3,f.BLKSIZE_s]),g0=ve(f.CBANDS+1),l0=ve(f.CBANDS+1),O0=ve(f.CBANDS+2),U=f1(2),T0=f1(2),G0,o0,C0,_0,N0,ue,R0,X0,U0=Oe([2,576]),me,ze=f1(f.CBANDS+2),Me=f1(f.CBANDS+2);for(A1.fill(Me,0),G0=Z.channels_out,d.mode==Te.JOINT_STEREO&&(G0=4),d.VBR==r1.vbr_off?me=Z.ResvMax==0?0:Z.ResvSize/Z.ResvMax*.5:d.VBR==r1.vbr_rh||d.VBR==r1.vbr_mtrh||d.VBR==r1.vbr_mt?me=.6:me=1,o0=0;o0<Z.channels_out;o0++){var pe=m[o0],Ze=E+576-350-B+192;for(_0=0;_0<576;_0++){var Ue,Ke;for(Ue=pe[Ze+_0+10],Ke=0,N0=0;N0<(B-1)/2-1;N0+=2)Ue+=b0[N0]*(pe[Ze+_0+N0]+pe[Ze+_0+B-N0]),Ke+=b0[N0+1]*(pe[Ze+_0+N0+1]+pe[Ze+_0+B-N0-1]);U0[o0][_0]=Ue+Ke}$[I][o0].en.assign(Z.en[o0]),$[I][o0].thm.assign(Z.thm[o0]),G0>2&&(A[I][o0].en.assign(Z.en[o0+2]),A[I][o0].thm.assign(Z.thm[o0+2]))}for(o0=0;o0<G0;o0++){var _1,c1,Ne=ve(12),y1=[0,0,0,0],rt=ve(12),Qt=1,Ta,Ea=ve(f.CBANDS),ka=ve(f.CBANDS),be=[0,0,0,0],Ca=ve(f.HBLKSIZE),Ia=Oe([3,f.HBLKSIZE_s]);for(Y0(Z.npart_s<=f.CBANDS),Y0(Z.npart_l<=f.CBANDS),_0=0;_0<3;_0++)Ne[_0]=Z.nsPsy.last_en_subshort[o0][_0+6],Y0(Z.nsPsy.last_en_subshort[o0][_0+4]>0),rt[_0]=Ne[_0]/Z.nsPsy.last_en_subshort[o0][_0+4],y1[0]+=Ne[_0];if(o0==2)for(_0=0;_0<576;_0++){var Wt,Jt;Wt=U0[0][_0],Jt=U0[1][_0],U0[0][_0]=Wt+Jt,U0[1][_0]=Wt-Jt}{var La=U0[o0&1],mt=0;for(_0=0;_0<9;_0++){for(var er=mt+64,Le=1;mt<er;mt++)Le<Math.abs(La[mt])&&(Le=Math.abs(La[mt]));Z.nsPsy.last_en_subshort[o0][_0]=Ne[_0+3]=Le,y1[1+_0/3]+=Le,Le>Ne[_0+3-2]?(Y0(Ne[_0+3-2]>0),Le=Le/Ne[_0+3-2]):Ne[_0+3-2]>Le*10?Le=Ne[_0+3-2]/(Le*10):Le=0,rt[_0+3]=Le}}if(d.analysis){var ea=rt[0];for(_0=1;_0<12;_0++)ea<rt[_0]&&(ea=rt[_0]);Z.pinfo.ers[I][o0]=Z.pinfo.ers_save[o0],Z.pinfo.ers_save[o0]=ea}for(Ta=o0==3?Z.nsPsy.attackthre_s:Z.nsPsy.attackthre,_0=0;_0<12;_0++)be[_0/3]==0&&rt[_0]>Ta&&(be[_0/3]=_0%3+1);for(_0=1;_0<4;_0++){var ta;y1[_0-1]>y1[_0]?(Y0(y1[_0]>0),ta=y1[_0-1]/y1[_0]):(Y0(y1[_0-1]>0),ta=y1[_0]/y1[_0-1]),ta<1.7&&(be[_0]=0,_0==1&&(be[0]=0))}for(be[0]!=0&&Z.nsPsy.lastAttacks[o0]!=0&&(be[0]=0),(Z.nsPsy.lastAttacks[o0]==3||be[0]+be[1]+be[2]+be[3]!=0)&&(Qt=0,be[1]!=0&&be[0]!=0&&(be[1]=0),be[2]!=0&&be[1]!=0&&(be[2]=0),be[3]!=0&&be[2]!=0&&(be[3]=0)),o0<2?T0[o0]=Qt:Qt==0&&(T0[0]=T0[1]=0),N[o0]=Z.tot_ener[o0],c1=M0,_1=t0,T(d,Ca,Ia,_1,o0&1,c1,o0&1,I,o0,m,E),F0(Z,Ca,g0,Ea,ka),k0(Z,Ea,ka,ze),X0=0;X0<3;X0++){var aa,Pe;for(o(d,Ia,l0,O0,o0,X0),V(Z,l0,O0,o0,X0),R0=0;R0<f.SBMAX_s;R0++){if(Pe=Z.thm[o0].s[R0][X0],Pe*=C,be[X0]>=2||be[X0+1]==1){var pt=X0!=0?X0-1:2,Le=J(Z.thm[o0].s[R0][pt],Pe,s0*me);Pe=Math.min(Pe,Le)}if(be[X0]==1){var pt=X0!=0?X0-1:2,Le=J(Z.thm[o0].s[R0][pt],Pe,b*me);Pe=Math.min(Pe,Le)}else if(X0!=0&&be[X0-1]==3||X0==0&&Z.nsPsy.lastAttacks[o0]==3){var pt=X0!=2?X0+1:0,Le=J(Z.thm[o0].s[R0][pt],Pe,b*me);Pe=Math.min(Pe,Le)}aa=Ne[X0*3+3]+Ne[X0*3+4]+Ne[X0*3+5],Ne[X0*3+5]*6<aa&&(Pe*=.5,Ne[X0*3+4]*6<aa&&(Pe*=.5)),Z.thm[o0].s[R0][X0]=Pe}}for(Z.nsPsy.lastAttacks[o0]=be[2],ue=0,C0=0;C0<Z.npart_l;C0++){for(var z1=Z.s3ind[C0][0],sa=g0[z1]*v[ze[z1]],U1=Z.s3_ll[ue++]*sa;++z1<=Z.s3ind[C0][1];)sa=g0[z1]*v[ze[z1]],U1=s(U1,Z.s3_ll[ue++]*sa,z1,z1-C0,Z,0);U1*=.158489319246111,Z.blocktype_old[o0&1]==f.SHORT_TYPE?O0[C0]=U1:O0[C0]=J(Math.min(U1,Math.min(j*Z.nb_1[o0][C0],q*Z.nb_2[o0][C0])),U1,me),Z.nb_2[o0][C0]=Z.nb_1[o0][C0],Z.nb_1[o0][C0]=U1}for(;C0<=f.CBANDS;++C0)g0[C0]=0,O0[C0]=0;a(Z,g0,O0,o0)}if((d.mode==Te.STEREO||d.mode==Te.JOINT_STEREO)&&d.interChRatio>0&&S(d,d.interChRatio),d.mode==Te.JOINT_STEREO){var ra;P(Z),ra=d.msfix,Math.abs(ra)>0&&k(Z,ra,d.ATHlower*Z.ATH.adjust)}for(Y(d,T0,e0,U),o0=0;o0<G0;o0++){var bt,xt=0,$t,Ht;o0>1?(bt=D,xt=-2,$t=f.NORM_TYPE,(e0[0]==f.SHORT_TYPE||e0[1]==f.SHORT_TYPE)&&($t=f.SHORT_TYPE),Ht=A[I][o0-2]):(bt=H,xt=0,$t=e0[o0],Ht=$[I][o0]),$t==f.SHORT_TYPE?bt[xt+o0]=y0(Ht,Z.masking_lower):bt[xt+o0]=x0(Ht,Z.masking_lower),d.analysis&&(Z.pinfo.pe[I][o0]=bt[xt+o0])}return 0};function re(d,m,E,I,$,A,H,D){var N=d.internal_flags;if(I<2)M.fft_long(N,H[D],I,m,E);else if(I==2)for(var e0=f.BLKSIZE-1;e0>=0;--e0){var Z=H[D+0][e0],t0=H[D+1][e0];H[D+0][e0]=(Z+t0)*L0.SQRT2*.5,H[D+1][e0]=(Z-t0)*L0.SQRT2*.5}A[0]=H[D+0][0],A[0]*=A[0];for(var e0=f.BLKSIZE/2-1;e0>=0;--e0){var M0=H[D+0][f.BLKSIZE/2-e0],g0=H[D+0][f.BLKSIZE/2+e0];A[f.BLKSIZE/2-e0]=(M0*M0+g0*g0)*.5}{for(var l0=0,e0=11;e0<f.HBLKSIZE;e0++)l0+=A[e0];N.tot_ener[I]=l0}if(d.analysis){for(var e0=0;e0<f.HBLKSIZE;e0++)N.pinfo.energy[$][I][e0]=N.pinfo.energy_save[I][e0],N.pinfo.energy_save[I][e0]=A[e0];N.pinfo.pe[$][I]=N.pe[I]}}function Ee(d,m,E,I,$,A,H,D){var N=d.internal_flags;if($==0&&I<2&&M.fft_short(N,H[D],I,m,E),I==2)for(var e0=f.BLKSIZE_s-1;e0>=0;--e0){var Z=H[D+0][$][e0],t0=H[D+1][$][e0];H[D+0][$][e0]=(Z+t0)*L0.SQRT2*.5,H[D+1][$][e0]=(Z-t0)*L0.SQRT2*.5}A[$][0]=H[D+0][$][0],A[$][0]*=A[$][0];for(var e0=f.BLKSIZE_s/2-1;e0>=0;--e0){var M0=H[D+0][$][f.BLKSIZE_s/2-e0],g0=H[D+0][$][f.BLKSIZE_s/2+e0];A[$][f.BLKSIZE_s/2-e0]=(M0*M0+g0*g0)*.5}}function J0(d,m,E,I){var $=d.internal_flags;d.athaa_loudapprox==2&&E<2&&($.loudness_sq[m][E]=$.loudness_sq_save[E],$.loudness_sq_save[E]=L(I,$))}var de=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function fe(d,m,E,I,$,A,H,D,N,e0){for(var Z=Oe([2,576]),t0=d.internal_flags,M0=t0.channels_out,g0=d.mode==Te.JOINT_STEREO?4:M0,l0=0;l0<M0;l0++){firbuf=m[l0];for(var O0=E+576-350-B+192,U=0;U<576;U++){var T0,G0;T0=firbuf[O0+U+10],G0=0;for(var o0=0;o0<(B-1)/2-1;o0+=2)T0+=de[o0]*(firbuf[O0+U+o0]+firbuf[O0+U+B-o0]),G0+=de[o0+1]*(firbuf[O0+U+o0+1]+firbuf[O0+U+B-o0-1]);Z[l0][U]=T0+G0}$[I][l0].en.assign(t0.en[l0]),$[I][l0].thm.assign(t0.thm[l0]),g0>2&&(A[I][l0].en.assign(t0.en[l0+2]),A[I][l0].thm.assign(t0.thm[l0+2]))}for(var l0=0;l0<g0;l0++){var C0=ve(12),_0=ve(12),N0=[0,0,0,0],ue=Z[l0&1],R0=0,X0=l0==3?t0.nsPsy.attackthre_s:t0.nsPsy.attackthre,U0=1;if(l0==2)for(var U=0,o0=576;o0>0;++U,--o0){var me=Z[0][U],ze=Z[1][U];Z[0][U]=me+ze,Z[1][U]=me-ze}for(var U=0;U<3;U++)_0[U]=t0.nsPsy.last_en_subshort[l0][U+6],Y0(t0.nsPsy.last_en_subshort[l0][U+4]>0),C0[U]=_0[U]/t0.nsPsy.last_en_subshort[l0][U+4],N0[0]+=_0[U];for(var U=0;U<9;U++){for(var Me=R0+64,pe=1;R0<Me;R0++)pe<Math.abs(ue[R0])&&(pe=Math.abs(ue[R0]));t0.nsPsy.last_en_subshort[l0][U]=_0[U+3]=pe,N0[1+U/3]+=pe,pe>_0[U+3-2]?(Y0(_0[U+3-2]>0),pe=pe/_0[U+3-2]):_0[U+3-2]>pe*10?pe=_0[U+3-2]/(pe*10):pe=0,C0[U+3]=pe}for(var U=0;U<3;++U){var Ze=_0[U*3+3]+_0[U*3+4]+_0[U*3+5],Ue=1;_0[U*3+5]*6<Ze&&(Ue*=.5,_0[U*3+4]*6<Ze&&(Ue*=.5)),D[l0][U]=Ue}if(d.analysis){for(var Ke=C0[0],U=1;U<12;U++)Ke<C0[U]&&(Ke=C0[U]);t0.pinfo.ers[I][l0]=t0.pinfo.ers_save[l0],t0.pinfo.ers_save[l0]=Ke}for(var U=0;U<12;U++)N[l0][U/3]==0&&C0[U]>X0&&(N[l0][U/3]=U%3+1);for(var U=1;U<4;U++){var _1=N0[U-1],c1=N0[U],Ne=Math.max(_1,c1);Ne<4e4&&_1<1.7*c1&&c1<1.7*_1&&(U==1&&N[l0][0]<=N[l0][U]&&(N[l0][0]=0),N[l0][U]=0)}N[l0][0]<=t0.nsPsy.lastAttacks[l0]&&(N[l0][0]=0),(t0.nsPsy.lastAttacks[l0]==3||N[l0][0]+N[l0][1]+N[l0][2]+N[l0][3]!=0)&&(U0=0,N[l0][1]!=0&&N[l0][0]!=0&&(N[l0][1]=0),N[l0][2]!=0&&N[l0][1]!=0&&(N[l0][2]=0),N[l0][3]!=0&&N[l0][2]!=0&&(N[l0][3]=0)),l0<2?e0[l0]=U0:U0==0&&(e0[0]=e0[1]=0),H[l0]=t0.tot_ener[l0]}}function Se(d,m,E){if(E==0)for(var I=0;I<d.npart_s;I++)d.nb_s2[m][I]=d.nb_s1[m][I],d.nb_s1[m][I]=0}function Ie(d,m){for(var E=0;E<d.npart_l;E++)d.nb_2[m][E]=d.nb_1[m][E],d.nb_1[m][E]=0}function w1(d,m,E,I){var $=v.length-1,A=0,H=E[A]+E[A+1];if(H>0){var D=m[A];D<m[A+1]&&(D=m[A+1]),Y0(d.numlines_s[A]+d.numlines_s[A+1]-1>0),H=20*(D*2-H)/(H*(d.numlines_s[A]+d.numlines_s[A+1]-1));var N=0|H;N>$&&(N=$),I[A]=N}else I[A]=0;for(A=1;A<d.npart_s-1;A++)if(H=E[A-1]+E[A]+E[A+1],Y0(A+1<d.npart_s),H>0){var D=m[A-1];D<m[A]&&(D=m[A]),D<m[A+1]&&(D=m[A+1]),Y0(d.numlines_s[A-1]+d.numlines_s[A]+d.numlines_s[A+1]-1>0),H=20*(D*3-H)/(H*(d.numlines_s[A-1]+d.numlines_s[A]+d.numlines_s[A+1]-1));var N=0|H;N>$&&(N=$),I[A]=N}else I[A]=0;if(Y0(A==d.npart_s-1),H=E[A-1]+E[A],H>0){var D=m[A-1];D<m[A]&&(D=m[A]),Y0(d.numlines_s[A-1]+d.numlines_s[A]-1>0),H=20*(D*2-H)/(H*(d.numlines_s[A-1]+d.numlines_s[A]-1));var N=0|H;N>$&&(N=$),I[A]=N}else I[A]=0;Y0(A==d.npart_s-1)}function e1(d,m,E,I,$,A){var H=d.internal_flags,D=new float[f.CBANDS],N=ve(f.CBANDS),e0,Z,t0,M0=new int[f.CBANDS];for(t0=Z=0;t0<H.npart_s;++t0){var g0=0,l0=0,O0=H.numlines_s[t0];for(e0=0;e0<O0;++e0,++Z){var U=m[A][Z];g0+=U,l0<U&&(l0=U)}E[t0]=g0,D[t0]=l0,N[t0]=g0/O0,Y0(N[t0]>=0)}for(Y0(t0==H.npart_s);t0<f.CBANDS;++t0)D[t0]=0,N[t0]=0;for(w1(H,D,N,M0),Z=t0=0;t0<H.npart_s;t0++){var T0=H.s3ind_s[t0][0],G0=H.s3ind_s[t0][1],o0,C0,_0,N0,ue;for(o0=M0[T0],C0=1,N0=H.s3_ss[Z]*E[T0]*v[M0[T0]],++Z,++T0;T0<=G0;)o0+=M0[T0],C0+=1,_0=H.s3_ss[Z]*E[T0]*v[M0[T0]],N0=l(N0,_0,T0-t0),++Z,++T0;o0=(1+2*o0)/(2*C0),ue=v[o0]*.5,N0*=ue,I[t0]=N0,H.nb_s2[$][t0]=H.nb_s1[$][t0],H.nb_s1[$][t0]=N0,_0=D[t0],_0*=H.minval_s[t0],_0*=ue,I[t0]>_0&&(I[t0]=_0),H.masking_lower>1&&(I[t0]*=H.masking_lower),I[t0]>E[t0]&&(I[t0]=E[t0]),H.masking_lower<1&&(I[t0]*=H.masking_lower),Y0(I[t0]>=0)}for(;t0<f.CBANDS;++t0)E[t0]=0,I[t0]=0}function De(d,m,E,I,$){var A=ve(f.CBANDS),H=ve(f.CBANDS),D=f1(f.CBANDS+2),N;F0(d,m,E,A,H),k0(d,A,H,D);var e0=0;for(N=0;N<d.npart_l;N++){var Z,t0,M0,g0,l0=d.s3ind[N][0],O0=d.s3ind[N][1],U=0,T0=0;for(U=D[l0],T0+=1,t0=d.s3_ll[e0]*E[l0]*v[D[l0]],++e0,++l0;l0<=O0;)U+=D[l0],T0+=1,Z=d.s3_ll[e0]*E[l0]*v[D[l0]],g0=l(t0,Z,l0-N),t0=g0,++e0,++l0;if(U=(1+2*U)/(2*T0),M0=v[U]*.5,t0*=M0,d.blocktype_old[$&1]==f.SHORT_TYPE){var G0=j*d.nb_1[$][N];G0>0?I[N]=Math.min(t0,G0):I[N]=Math.min(t0,E[N]*b)}else{var o0=q*d.nb_2[$][N],C0=j*d.nb_1[$][N],G0;o0<=0&&(o0=t0),C0<=0&&(C0=t0),d.blocktype_old[$&1]==f.NORM_TYPE?G0=Math.min(C0,o0):G0=C0,I[N]=Math.min(t0,G0)}d.nb_2[$][N]=d.nb_1[$][N],d.nb_1[$][N]=t0,Z=A[N],Z*=d.minval_l[N],Z*=M0,I[N]>Z&&(I[N]=Z),d.masking_lower>1&&(I[N]*=d.masking_lower),I[N]>E[N]&&(I[N]=E[N]),d.masking_lower<1&&(I[N]*=d.masking_lower),Y0(I[N]>=0)}for(;N<f.CBANDS;++N)E[N]=0,I[N]=0}function o1(d,m){var E=d.internal_flags;d.short_blocks==E0.short_block_coupled&&!(m[0]!=0&&m[1]!=0)&&(m[0]=m[1]=0);for(var I=0;I<E.channels_out;I++)d.short_blocks==E0.short_block_dispensed&&(m[I]=1),d.short_blocks==E0.short_block_forced&&(m[I]=0)}function j1(d,m,E){for(var I=d.internal_flags,$=0;$<I.channels_out;$++){var A=f.NORM_TYPE;m[$]!=0?(Y0(I.blocktype_old[$]!=f.START_TYPE),I.blocktype_old[$]==f.SHORT_TYPE&&(A=f.STOP_TYPE)):(A=f.SHORT_TYPE,I.blocktype_old[$]==f.NORM_TYPE&&(I.blocktype_old[$]=f.START_TYPE),I.blocktype_old[$]==f.STOP_TYPE&&(I.blocktype_old[$]=f.SHORT_TYPE)),E[$]=I.blocktype_old[$],I.blocktype_old[$]=A}}function N1(d,m,E,I,$,A,H){for(var D=A*2,N=A>0?Math.pow(10,$):1,e0,Z,t0=0;t0<H;++t0){var M0=d[2][t0],g0=d[3][t0],l0=m[0][t0],O0=m[1][t0],U=m[2][t0],T0=m[3][t0];if(l0<=1.58*O0&&O0<=1.58*l0){var G0=E[t0]*g0,o0=E[t0]*M0;Z=Math.max(U,Math.min(T0,G0)),e0=Math.max(T0,Math.min(U,o0))}else Z=U,e0=T0;if(A>0){var C0,_0,N0=I[t0]*N;if(C0=Math.min(Math.max(l0,N0),Math.max(O0,N0)),U=Math.max(Z,N0),T0=Math.max(e0,N0),_0=U+T0,_0>0&&C0*D<_0){var ue=C0*D/_0;U*=ue,T0*=ue}Z=Math.min(U,Z),e0=Math.min(T0,e0)}Z>M0&&(Z=M0),e0>g0&&(e0=g0),m[2][t0]=Z,m[3][t0]=e0}}this.L3psycho_anal_vbr=function(d,m,E,I,$,A,H,D,N,e0){var Z=d.internal_flags,t0,M0,g0=ve(f.HBLKSIZE),l0=Oe([3,f.HBLKSIZE_s]),O0=Oe([2,f.BLKSIZE]),U=Oe([2,3,f.BLKSIZE_s]),T0=Oe([4,f.CBANDS]),G0=Oe([4,f.CBANDS]),o0=Oe([4,3]),C0=.6,_0=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],N0=f1(2),ue=d.mode==Te.JOINT_STEREO?4:Z.channels_out;fe(d,m,E,I,$,A,N,o0,_0,N0),o1(d,N0);{for(var R0=0;R0<ue;R0++){var X0=R0&1;t0=O0,re(d,m,E,R0,I,g0,t0,X0),J0(d,I,R0,g0),N0[X0]!=0?De(Z,g0,T0[R0],G0[R0],R0):Ie(Z,R0)}N0[0]+N0[1]==2&&d.mode==Te.JOINT_STEREO&&N1(T0,G0,Z.mld_cb_l,Z.ATH.cb_l,d.ATHlower*Z.ATH.adjust,d.msfix,Z.npart_l);for(var R0=0;R0<ue;R0++){var X0=R0&1;N0[X0]!=0&&a(Z,T0[R0],G0[R0],R0)}}{for(var U0=0;U0<3;U0++){for(var R0=0;R0<ue;++R0){var X0=R0&1;N0[X0]!=0?Se(Z,R0,U0):(M0=U,Ee(d,m,E,R0,U0,l0,M0,X0),e1(d,l0,T0[R0],G0[R0],R0,U0))}N0[0]+N0[1]==0&&d.mode==Te.JOINT_STEREO&&N1(T0,G0,Z.mld_cb_s,Z.ATH.cb_s,d.ATHlower*Z.ATH.adjust,d.msfix,Z.npart_s);for(var R0=0;R0<ue;++R0){var X0=R0&1;N0[X0]==0&&V(Z,T0[R0],G0[R0],R0,U0)}}for(var R0=0;R0<ue;R0++){var X0=R0&1;if(N0[X0]==0)for(var me=0;me<f.SBMAX_s;me++){for(var ze=ve(3),U0=0;U0<3;U0++){var Me=Z.thm[R0].s[me][U0];if(Me*=C,_0[R0][U0]>=2||_0[R0][U0+1]==1){var pe=U0!=0?U0-1:2,Ze=J(Z.thm[R0].s[me][pe],Me,s0*C0);Me=Math.min(Me,Ze)}else if(_0[R0][U0]==1){var pe=U0!=0?U0-1:2,Ze=J(Z.thm[R0].s[me][pe],Me,b*C0);Me=Math.min(Me,Ze)}else if(U0!=0&&_0[R0][U0-1]==3||U0==0&&Z.nsPsy.lastAttacks[R0]==3){var pe=U0!=2?U0+1:0,Ze=J(Z.thm[R0].s[me][pe],Me,b*C0);Me=Math.min(Me,Ze)}Me*=o0[R0][U0],ze[U0]=Me}for(var U0=0;U0<3;U0++)Z.thm[R0].s[me][U0]=ze[U0]}}}for(var R0=0;R0<ue;R0++)Z.nsPsy.lastAttacks[R0]=_0[R0][2];j1(d,N0,e0);for(var R0=0;R0<ue;R0++){var Ue,Ke,_1,c1;R0>1?(Ue=D,Ke=-2,_1=f.NORM_TYPE,(e0[0]==f.SHORT_TYPE||e0[1]==f.SHORT_TYPE)&&(_1=f.SHORT_TYPE),c1=A[I][R0-2]):(Ue=H,Ke=0,_1=e0[R0],c1=$[I][R0]),_1==f.SHORT_TYPE?Ue[Ke+R0]=y0(c1,Z.masking_lower):Ue[Ke+R0]=x0(c1,Z.masking_lower),d.analysis&&(Z.pinfo.pe[I][R0]=Ue[Ke+R0])}return 0};function je(d,m){var E=d,I;return E>=0?I=-E*27:I=E*m,I<=-72?0:Math.exp(I*e)}function G1(d){var m=0,E=0;{var I=0,$,A;for(I=0;je(I,d)>1e-20;I-=1);for($=I,A=0;Math.abs(A-$)>1e-12;)I=(A+$)/2,je(I,d)>0?A=I:$=I;m=$}{var I=0,$,A;for(I=0;je(I,d)>1e-20;I+=1);for($=0,A=I;Math.abs(A-$)>1e-12;)I=(A+$)/2,je(I,d)>0?$=I:A=I;E=A}{var H=0,D=1e3,N;for(N=0;N<=D;++N){var I=m+N*(E-m)/D,e0=je(I,d);H+=e0}{var Z=(D+1)/(H*(E-m));return Z}}}function E1(d){var m,E,I,$;return m=d,m>=0?m*=3:m*=1.5,m>=.5&&m<=2.5?($=m-.5,E=8*($*$-2*$)):E=0,m+=.474,I=15.811389+7.5*m-17.5*Math.sqrt(1+m*m),I<=-60?0:(m=Math.exp((E+I)*e),m/=.6609193,m)}function Ge(d){return d<0&&(d=0),d=d*.001,13*Math.atan(.76*d)+3.5*Math.atan(d*d/(7.5*7.5))}function at(d,m,E,I,$,A,H,D,N,e0,Z,t0){var M0=ve(f.CBANDS+1),g0=D/(t0>15?2*576:2*192),l0=f1(f.HBLKSIZE),O0;D/=N;var U=0,T0=0;for(O0=0;O0<f.CBANDS;O0++){var G0,o0;for(G0=Ge(D*U),M0[O0]=D*U,o0=U;Ge(D*o0)-G0<W&&o0<=N/2;o0++);for(d[O0]=o0-U,T0=O0+1;U<o0;)l0[U++]=O0;if(U>N/2){U=N/2,++O0;break}}M0[O0]=D*U;for(var C0=0;C0<t0;C0++){var _0,N0,ue,R0,X0;ue=e0[C0],R0=e0[C0+1],_0=0|Math.floor(.5+Z*(ue-.5)),_0<0&&(_0=0),N0=0|Math.floor(.5+Z*(R0-.5)),N0>N/2&&(N0=N/2),E[C0]=(l0[_0]+l0[N0])/2,m[C0]=l0[N0];var U0=g0*R0;H[C0]=(U0-M0[m[C0]])/(M0[m[C0]+1]-M0[m[C0]]),H[C0]<0?H[C0]=0:H[C0]>1&&(H[C0]=1),X0=Ge(D*e0[C0]*Z),X0=Math.min(X0,15.5)/15.5,A[C0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*X0))-2.5)}U=0;for(var me=0;me<T0;me++){var ze=d[me],G0,Me;G0=Ge(D*U),Me=Ge(D*(U+ze-1)),I[me]=.5*(G0+Me),G0=Ge(D*(U-.5)),Me=Ge(D*(U+ze-.5)),$[me]=Me-G0,U+=ze}return T0}function Ra(d,m,E,I,$,A){var H=Oe([f.CBANDS,f.CBANDS]),D,N=0;if(A)for(var e0=0;e0<m;e0++)for(D=0;D<m;D++){var Z=E1(E[e0]-E[D])*I[D];H[e0][D]=Z*$[e0]}else for(D=0;D<m;D++)for(var t0=15+Math.min(21/E[D],12),M0=G1(t0),e0=0;e0<m;e0++){var Z=M0*je(E[e0]-E[D],t0)*I[D];H[e0][D]=Z*$[e0]}for(var e0=0;e0<m;e0++){for(D=0;D<m&&!(H[e0][D]>0);D++);for(d[e0][0]=D,D=m-1;D>0&&!(H[e0][D]>0);D--);d[e0][1]=D,N+=d[e0][1]-d[e0][0]+1}for(var g0=ve(N),l0=0,e0=0;e0<m;e0++)for(D=d[e0][0];D<=d[e0][1];D++)g0[l0++]=H[e0][D];return g0}function Ba(d){var m=Ge(d);return m=Math.min(m,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*m))-2.5)}this.psymodel_init=function(d){var m=d.internal_flags,E,I=!0,$=13,A=24,H=0,D=0,N=-8.25,e0=-4.5,Z=ve(f.CBANDS),t0=ve(f.CBANDS),M0=ve(f.CBANDS),g0=d.out_samplerate;switch(d.experimentalZ){default:case 0:I=!0;break;case 1:I=!(d.VBR==r1.vbr_mtrh||d.VBR==r1.vbr_mt);break;case 2:I=!1;break;case 3:$=8,H=-1.75,D=-.0125,N=-8.25,e0=-2.25;break}for(m.ms_ener_ratio_old=.25,m.blocktype_old[0]=m.blocktype_old[1]=f.NORM_TYPE,E=0;E<4;++E){for(var U=0;U<f.CBANDS;++U)m.nb_1[E][U]=1e20,m.nb_2[E][U]=1e20,m.nb_s1[E][U]=m.nb_s2[E][U]=1;for(var l0=0;l0<f.SBMAX_l;l0++)m.en[E].l[l0]=1e20,m.thm[E].l[l0]=1e20;for(var U=0;U<3;++U){for(var l0=0;l0<f.SBMAX_s;l0++)m.en[E].s[l0][U]=1e20,m.thm[E].s[l0][U]=1e20;m.nsPsy.lastAttacks[E]=0}for(var U=0;U<9;U++)m.nsPsy.last_en_subshort[E][U]=10}for(m.loudness_sq_save[0]=m.loudness_sq_save[1]=0,m.npart_l=at(m.numlines_l,m.bo_l,m.bm_l,Z,t0,m.mld_l,m.PSY.bo_l_weight,g0,f.BLKSIZE,m.scalefac_band.l,f.BLKSIZE/(2*576),f.SBMAX_l),Y0(m.npart_l<f.CBANDS),E=0;E<m.npart_l;E++){var O0=H;Z[E]>=$&&(O0=D*(Z[E]-$)/(A-$)+H*(A-Z[E])/(A-$)),M0[E]=Math.pow(10,O0/10),m.numlines_l[E]>0?m.rnumlines_l[E]=1/m.numlines_l[E]:m.rnumlines_l[E]=0}m.s3_ll=Ra(m.s3ind,m.npart_l,Z,t0,M0,I);var U=0;for(E=0;E<m.npart_l;E++){var T0;T0=$0.MAX_VALUE;for(var G0=0;G0<m.numlines_l[E];G0++,U++){var o0=g0*U/(1e3*f.BLKSIZE),C0;C0=this.ATHformula(o0*1e3,d)-20,C0=Math.pow(10,.1*C0),C0*=m.numlines_l[E],T0>C0&&(T0=C0)}m.ATH.cb_l[E]=T0,T0=-20+Z[E]*20/10,T0>6&&(T0=100),T0<-15&&(T0=-15),T0-=8,m.minval_l[E]=Math.pow(10,T0/10)*m.numlines_l[E]}for(m.npart_s=at(m.numlines_s,m.bo_s,m.bm_s,Z,t0,m.mld_s,m.PSY.bo_s_weight,g0,f.BLKSIZE_s,m.scalefac_band.s,f.BLKSIZE_s/(2*192),f.SBMAX_s),Y0(m.npart_s<f.CBANDS),U=0,E=0;E<m.npart_s;E++){var T0,O0=N;Z[E]>=$&&(O0=e0*(Z[E]-$)/(A-$)+N*(A-Z[E])/(A-$)),M0[E]=Math.pow(10,O0/10),T0=$0.MAX_VALUE;for(var G0=0;G0<m.numlines_s[E];G0++,U++){var o0=g0*U/(1e3*f.BLKSIZE_s),C0;C0=this.ATHformula(o0*1e3,d)-20,C0=Math.pow(10,.1*C0),C0*=m.numlines_s[E],T0>C0&&(T0=C0)}m.ATH.cb_s[E]=T0,T0=-7+Z[E]*7/12,Z[E]>12&&(T0*=1+Math.log(1+T0)*3.1),Z[E]<12&&(T0*=1+Math.log(1-T0)*2.3),T0<-15&&(T0=-15),T0-=8,m.minval_s[E]=Math.pow(10,T0/10)*m.numlines_s[E]}m.s3_ss=Ra(m.s3ind_s,m.npart_s,Z,t0,M0,I),_(),M.init_fft(m),m.decay=Math.exp(-1*F/(d0*g0/192));{var _0;_0=w,d.exp_nspsytune&2&&(_0=1),Math.abs(d.msfix)>0&&(_0=d.msfix),d.msfix=_0;for(var N0=0;N0<m.npart_l;N0++)m.s3ind[N0][1]>m.npart_l-1&&(m.s3ind[N0][1]=m.npart_l-1)}var ue=576*m.mode_gr/g0;if(m.ATH.decay=Math.pow(10,-12/10*ue),m.ATH.adjust=.01,m.ATH.adjustLimit=1,Y0(m.bo_l[f.SBMAX_l-1]<=m.npart_l),Y0(m.bo_s[f.SBMAX_s-1]<=m.npart_s),d.ATHtype!=-1){var o0,R0=d.out_samplerate/f.BLKSIZE,X0=0;for(o0=0,E=0;E<f.BLKSIZE/2;++E)o0+=R0,m.ATH.eql_w[E]=1/Math.pow(10,this.ATHformula(o0,d)/10),X0+=m.ATH.eql_w[E];for(X0=1/X0,E=f.BLKSIZE/2;--E>=0;)m.ATH.eql_w[E]*=X0}{for(var N0=U=0;N0<m.npart_s;++N0)for(E=0;E<m.numlines_s[N0];++E)++U;for(var N0=U=0;N0<m.npart_l;++N0)for(E=0;E<m.numlines_l[N0];++E)++U}for(U=0,E=0;E<m.npart_l;E++){var o0=g0*(U+m.numlines_l[E]/2)/(1*f.BLKSIZE);m.mld_cb_l[E]=Ba(o0),U+=m.numlines_l[E]}for(;E<f.CBANDS;++E)m.mld_cb_l[E]=1;for(U=0,E=0;E<m.npart_s;E++){var o0=g0*(U+m.numlines_s[E]/2)/(1*f.BLKSIZE_s);m.mld_cb_s[E]=Ba(o0),U+=m.numlines_s[E]}for(;E<f.CBANDS;++E)m.mld_cb_s[E]=1;return 0};function st(d,m){d<-.3&&(d=3410),d/=1e3,d=Math.max(.1,d);var E=3.64*Math.pow(d,-.8)-6.8*Math.exp(-.6*Math.pow(d-3.4,2))+6*Math.exp(-.15*Math.pow(d-8.7,2))+(.6+.04*m)*.001*Math.pow(d,4);return E}this.ATHformula=function(d,m){var E;switch(m.ATHtype){case 0:E=st(d,9);break;case 1:E=st(d,-1);break;case 2:E=st(d,0);break;case 3:E=st(d,1)+6;break;case 4:E=st(d,m.ATHcurve);break;default:E=st(d,0);break}return E}}var J1=Rt;function qe(M){var F=M;this.ordinal=function(){return F}}qe.STEREO=new qe(0),qe.JOINT_STEREO=new qe(1),qe.DUAL_CHANNEL=new qe(2),qe.MONO=new qe(3),qe.NOT_SET=new qe(4);var lt=qe;function Bt(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=lt.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Tt=Bt,ot={};ot.SFBMAX=f.SBMAX_s*3;var m1=ot,Et=G.new_float,p1=G.new_int;function kt(){this.xr=Et(576),this.l3_enc=p1(576),this.scalefac=p1(m1.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=p1(3),this.subblock_gain=p1(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=p1(m1.SFBMAX),this.window=p1(m1.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=p1(4),this.max_nonzero_coeff=0;var M=this;function F(q){return new Int32Array(q)}function j(q){return new Float32Array(q)}this.assign=function(q){M.xr=j(q.xr),M.l3_enc=F(q.l3_enc),M.scalefac=F(q.scalefac),M.xrpow_max=q.xrpow_max,M.part2_3_length=q.part2_3_length,M.big_values=q.big_values,M.count1=q.count1,M.global_gain=q.global_gain,M.scalefac_compress=q.scalefac_compress,M.block_type=q.block_type,M.mixed_block_flag=q.mixed_block_flag,M.table_select=F(q.table_select),M.subblock_gain=F(q.subblock_gain),M.region0_count=q.region0_count,M.region1_count=q.region1_count,M.preflag=q.preflag,M.scalefac_scale=q.scalefac_scale,M.count1table_select=q.count1table_select,M.part2_length=q.part2_length,M.sfb_lmax=q.sfb_lmax,M.sfb_smin=q.sfb_smin,M.psy_lmax=q.psy_lmax,M.sfbmax=q.sfbmax,M.psymax=q.psymax,M.sfbdivide=q.sfbdivide,M.width=F(q.width),M.window=F(q.window),M.count1bits=q.count1bits,M.sfb_partition_table=q.sfb_partition_table.slice(0),M.slen=F(q.slen),M.max_nonzero_coeff=q.max_nonzero_coeff}}var F1=kt,_t=G.new_int;function Ct(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[_t(4),_t(4)];for(var M=0;M<2;M++)for(var F=0;F<2;F++)this.tt[M][F]=new F1}var It=Ct,q1=G.System,le=G.new_int;function n1(M,F,j,q){this.l=le(1+f.SBMAX_l),this.s=le(1+f.SBMAX_s),this.psfb21=le(1+f.PSFB21),this.psfb12=le(1+f.PSFB12);var i0=this.l,X=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],q1.arraycopy(this.arrL,0,i0,0,Math.min(this.arrL.length,this.l.length)),q1.arraycopy(this.arrS,0,X,0,Math.min(this.arrS.length,this.s.length)),q1.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),q1.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var i1=n1,Dt=G.new_float,Ka=G.new_float_n,Qa=G.new_int;function Wa(){this.last_en_subshort=Ka([4,9]),this.lastAttacks=Qa(4),this.pefirbuf=Dt(19),this.longfact=Dt(f.SBMAX_l),this.shortfact=Dt(f.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var Ja=Wa;function es(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var ts=es,as=G.new_byte,ss=G.new_double,Je=G.new_float,X1=G.new_float_n,l1=G.new_int,Lt=G.new_int_n;R1.MFSIZE=3*1152+f.ENCDELAY-f.MDCTDELAY,R1.MAX_HEADER_BUF=256,R1.MAX_BITS_PER_CHANNEL=4095,R1.MAX_BITS_PER_GRANULE=7680,R1.BPC=320;function R1(){var M=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=X1([2,R1.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new It,this.ms_ratio=Je(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=l1(2),this.CurrentStep=l1(2),this.masking_lower=0,this.bv_scf=l1(576),this.pseudohalf=l1(m1.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*R1.BPC+1),this.itime=ss(2),this.sideinfo_len=0,this.sb_sample=X1([2,2,18,f.SBLIMIT]),this.amp_filter=Je(32);function F(){this.write_timing=0,this.ptr=0,this.buf=as(M)}this.header=new Array(R1.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new i1,this.minval_l=Je(f.CBANDS),this.minval_s=Je(f.CBANDS),this.nb_1=X1([4,f.CBANDS]),this.nb_2=X1([4,f.CBANDS]),this.nb_s1=X1([4,f.CBANDS]),this.nb_s2=X1([4,f.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Je(4),this.loudness_sq=X1([2,2]),this.loudness_sq_save=Je(2),this.mld_l=Je(f.SBMAX_l),this.mld_s=Je(f.SBMAX_s),this.bm_l=l1(f.SBMAX_l),this.bo_l=l1(f.SBMAX_l),this.bm_s=l1(f.SBMAX_s),this.bo_s=l1(f.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Lt([f.CBANDS,2]),this.s3ind_s=Lt([f.CBANDS,2]),this.numlines_s=l1(f.CBANDS),this.numlines_l=l1(f.CBANDS),this.rnumlines_l=Je(f.CBANDS),this.mld_cb_l=Je(f.CBANDS),this.mld_cb_s=Je(f.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Je(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=l1(2),this.nsPsy=new Ja,this.VBR_seek_table=new ts,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Lt([16,4+1]),this.bitrate_blockType_Hist=Lt([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var j=0;j<this.en.length;j++)this.en[j]=new Fe;for(var j=0;j<this.thm.length;j++)this.thm[j]=new Fe;for(var j=0;j<this.header.length;j++)this.header[j]=new F}var he=R1,D1=G.new_float;function rs(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=D1(f.SBMAX_l),this.s=D1(f.SBMAX_s),this.psfb21=D1(f.PSFB21),this.psfb12=D1(f.PSFB12),this.cb_l=D1(f.CBANDS),this.cb_s=D1(f.CBANDS),this.eql_w=D1(f.BLKSIZE/2)}var ns=rs,Xe=G.System,va=G.Arrays;ye.STEPS_per_dB=100,ye.MAX_dB=120,ye.GAIN_NOT_ENOUGH_SAMPLES=-24601,ye.GAIN_ANALYSIS_ERROR=0,ye.GAIN_ANALYSIS_OK=1,ye.INIT_GAIN_ANALYSIS_ERROR=0,ye.INIT_GAIN_ANALYSIS_OK=1,ye.YULE_ORDER=10,ye.MAX_ORDER=ye.YULE_ORDER,ye.MAX_SAMP_FREQ=48e3,ye.RMS_WINDOW_TIME_NUMERATOR=1,ye.RMS_WINDOW_TIME_DENOMINATOR=20,ye.MAX_SAMPLES_PER_WINDOW=ye.MAX_SAMP_FREQ*ye.RMS_WINDOW_TIME_NUMERATOR/ye.RMS_WINDOW_TIME_DENOMINATOR+1;function ye(){var M=64.82,F=.95,j=ye.RMS_WINDOW_TIME_NUMERATOR,q=ye.RMS_WINDOW_TIME_DENOMINATOR,i0=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],X=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function W(b,w,B,e,O,L){for(;O--!=0;)B[e]=1e-10+b[w+0]*L[0]-B[e-1]*L[1]+b[w-1]*L[2]-B[e-2]*L[3]+b[w-2]*L[4]-B[e-3]*L[5]+b[w-3]*L[6]-B[e-4]*L[7]+b[w-4]*L[8]-B[e-5]*L[9]+b[w-5]*L[10]-B[e-6]*L[11]+b[w-6]*L[12]-B[e-7]*L[13]+b[w-7]*L[14]-B[e-8]*L[15]+b[w-8]*L[16]-B[e-9]*L[17]+b[w-9]*L[18]-B[e-10]*L[19]+b[w-10]*L[20],++e,++w}function v0(b,w,B,e,O,L){for(;O--!=0;)B[e]=b[w+0]*L[0]-B[e-1]*L[1]+b[w-1]*L[2]-B[e-2]*L[3]+b[w-2]*L[4],++e,++w}function d0(b,w){for(var B=0;B<MAX_ORDER;B++)b.linprebuf[B]=b.lstepbuf[B]=b.loutbuf[B]=b.rinprebuf[B]=b.rstepbuf[B]=b.routbuf[B]=0;switch(0|w){case 48e3:b.reqindex=0;break;case 44100:b.reqindex=1;break;case 32e3:b.reqindex=2;break;case 24e3:b.reqindex=3;break;case 22050:b.reqindex=4;break;case 16e3:b.reqindex=5;break;case 12e3:b.reqindex=6;break;case 11025:b.reqindex=7;break;case 8e3:b.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return b.sampleWindow=0|(w*j+q-1)/q,b.lsum=0,b.rsum=0,b.totsamp=0,va.ill(b.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(b,w){return d0(b,w)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(b.linpre=MAX_ORDER,b.rinpre=MAX_ORDER,b.lstep=MAX_ORDER,b.rstep=MAX_ORDER,b.lout=MAX_ORDER,b.rout=MAX_ORDER,va.fill(b.B,0),INIT_GAIN_ANALYSIS_OK)};function C(b){return b*b}this.AnalyzeSamples=function(b,w,B,e,O,L,T){var r,h,x,y,R,t,v;if(L==0)return GAIN_ANALYSIS_OK;switch(v=0,R=L,T){case 1:e=w,O=B;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(L<MAX_ORDER?(Xe.arraycopy(w,B,b.linprebuf,MAX_ORDER,L),Xe.arraycopy(e,O,b.rinprebuf,MAX_ORDER,L)):(Xe.arraycopy(w,B,b.linprebuf,MAX_ORDER,MAX_ORDER),Xe.arraycopy(e,O,b.rinprebuf,MAX_ORDER,MAX_ORDER));R>0;){t=R>b.sampleWindow-b.totsamp?b.sampleWindow-b.totsamp:R,v<MAX_ORDER?(r=b.linpre+v,h=b.linprebuf,x=b.rinpre+v,y=b.rinprebuf,t>MAX_ORDER-v&&(t=MAX_ORDER-v)):(r=B+v,h=w,x=O+v,y=e),W(h,r,b.lstepbuf,b.lstep+b.totsamp,t,i0[b.reqindex]),W(y,x,b.rstepbuf,b.rstep+b.totsamp,t,i0[b.reqindex]),v0(b.lstepbuf,b.lstep+b.totsamp,b.loutbuf,b.lout+b.totsamp,t,X[b.reqindex]),v0(b.rstepbuf,b.rstep+b.totsamp,b.routbuf,b.rout+b.totsamp,t,X[b.reqindex]),r=b.lout+b.totsamp,h=b.loutbuf,x=b.rout+b.totsamp,y=b.routbuf;for(var _=t%8;_--!=0;)b.lsum+=C(h[r++]),b.rsum+=C(y[x++]);for(_=t/8;_--!=0;)b.lsum+=C(h[r+0])+C(h[r+1])+C(h[r+2])+C(h[r+3])+C(h[r+4])+C(h[r+5])+C(h[r+6])+C(h[r+7]),r+=8,b.rsum+=C(y[x+0])+C(y[x+1])+C(y[x+2])+C(y[x+3])+C(y[x+4])+C(y[x+5])+C(y[x+6])+C(y[x+7]),x+=8;if(R-=t,v+=t,b.totsamp+=t,b.totsamp==b.sampleWindow){var n=ye.STEPS_per_dB*10*Math.log10((b.lsum+b.rsum)/b.totsamp*.5+1e-37),c=n<=0?0:0|n;c>=b.A.length&&(c=b.A.length-1),b.A[c]++,b.lsum=b.rsum=0,Xe.arraycopy(b.loutbuf,b.totsamp,b.loutbuf,0,MAX_ORDER),Xe.arraycopy(b.routbuf,b.totsamp,b.routbuf,0,MAX_ORDER),Xe.arraycopy(b.lstepbuf,b.totsamp,b.lstepbuf,0,MAX_ORDER),Xe.arraycopy(b.rstepbuf,b.totsamp,b.rstepbuf,0,MAX_ORDER),b.totsamp=0}if(b.totsamp>b.sampleWindow)return GAIN_ANALYSIS_ERROR}return L<MAX_ORDER?(Xe.arraycopy(b.linprebuf,L,b.linprebuf,0,MAX_ORDER-L),Xe.arraycopy(b.rinprebuf,L,b.rinprebuf,0,MAX_ORDER-L),Xe.arraycopy(w,B,b.linprebuf,MAX_ORDER-L,L),Xe.arraycopy(e,O,b.rinprebuf,MAX_ORDER-L,L)):(Xe.arraycopy(w,B+L-MAX_ORDER,b.linprebuf,0,MAX_ORDER),Xe.arraycopy(e,O+L-MAX_ORDER,b.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function s0(b,w){var B,e=0;for(B=0;B<w;B++)e+=b[B];if(e==0)return GAIN_NOT_ENOUGH_SAMPLES;var O=0|Math.ceil(e*(1-F));for(B=w;B-- >0&&!((O-=b[B])<=0););return M-B/ye.STEPS_per_dB}this.GetTitleGain=function(b){for(var w=s0(b.A,b.A.length),B=0;B<b.A.length;B++)b.B[B]+=b.A[B],b.A[B]=0;for(var B=0;B<MAX_ORDER;B++)b.linprebuf[B]=b.lstepbuf[B]=b.loutbuf[B]=b.rinprebuf[B]=b.rstepbuf[B]=b.routbuf[B]=0;return b.totsamp=0,b.lsum=b.rsum=0,w}}var $e=ye,et=G.new_float,ha=G.new_int;function is(){this.linprebuf=et($e.MAX_ORDER*2),this.linpre=0,this.lstepbuf=et($e.MAX_SAMPLES_PER_WINDOW+$e.MAX_ORDER),this.lstep=0,this.loutbuf=et($e.MAX_SAMPLES_PER_WINDOW+$e.MAX_ORDER),this.lout=0,this.rinprebuf=et($e.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=et($e.MAX_SAMPLES_PER_WINDOW+$e.MAX_ORDER),this.rstep=0,this.routbuf=et($e.MAX_SAMPLES_PER_WINDOW+$e.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=ha(0|$e.STEPS_per_dB*$e.MAX_dB),this.B=ha(0|$e.STEPS_per_dB*$e.MAX_dB)}var ls=is;function os(M){this.bits=M}var da=os,fa=G.new_float,_s=G.new_int,ma=G.assert;function cs(M){var F=M;this.quantize=F,this.iteration_loop=function(j,q,i0,X){var W=j.internal_flags,v0=fa(m1.SFBMAX),d0=fa(576),C=_s(2),s0=0,b,w=W.l3_side,B=new da(s0);this.quantize.rv.ResvFrameBegin(j,B),s0=B.bits;for(var e=0;e<W.mode_gr;e++){b=this.quantize.qupvt.on_pe(j,q,C,s0,e,e),W.mode_ext==f.MPG_MD_MS_LR&&(this.quantize.ms_convert(W.l3_side,e),this.quantize.qupvt.reduce_side(C,i0[e],s0,b));for(var O=0;O<W.channels_out;O++){var L,T,r=w.tt[e][O];r.block_type!=f.SHORT_TYPE?(L=0,T=W.PSY.mask_adjust-L):(L=0,T=W.PSY.mask_adjust_short-L),W.masking_lower=Math.pow(10,T*.1),this.quantize.init_outer_loop(W,r),this.quantize.init_xrpow(W,r,d0)&&(this.quantize.qupvt.calc_xmin(j,X[e][O],r,v0),this.quantize.outer_loop(j,r,v0,d0,O,C[O])),this.quantize.iteration_finish_one(W,e,O),ma(r.part2_3_length<=he.MAX_BITS_PER_CHANNEL),ma(r.part2_3_length<=C[O])}}this.quantize.rv.ResvFrameEnd(W,s0)}}var us=cs;function ae(M,F,j,q){this.xlen=M,this.linmax=F,this.table=j,this.hlen=q}var u0={};u0.t1HB=[1,1,1,0],u0.t2HB=[1,2,1,3,1,1,3,2,0],u0.t3HB=[3,2,1,1,1,1,3,2,0],u0.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],u0.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],u0.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],u0.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],u0.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],u0.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],u0.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],u0.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],u0.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],u0.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],u0.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],u0.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],u0.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],u0.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],u0.t1l=[1,4,3,5],u0.t2l=[1,4,7,4,5,7,6,7,8],u0.t3l=[2,3,7,4,4,7,6,7,8],u0.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],u0.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],u0.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],u0.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],u0.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],u0.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],u0.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],u0.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],u0.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],u0.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],u0.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],u0.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],u0.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],u0.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4],u0.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4],u0.ht=[new ae(0,0,null,null),new ae(2,0,u0.t1HB,u0.t1l),new ae(3,0,u0.t2HB,u0.t2l),new ae(3,0,u0.t3HB,u0.t3l),new ae(0,0,null,null),new ae(4,0,u0.t5HB,u0.t5l),new ae(4,0,u0.t6HB,u0.t6l),new ae(6,0,u0.t7HB,u0.t7l),new ae(6,0,u0.t8HB,u0.t8l),new ae(6,0,u0.t9HB,u0.t9l),new ae(8,0,u0.t10HB,u0.t10l),new ae(8,0,u0.t11HB,u0.t11l),new ae(8,0,u0.t12HB,u0.t12l),new ae(16,0,u0.t13HB,u0.t13l),new ae(0,0,null,u0.t16_5l),new ae(16,0,u0.t15HB,u0.t15l),new ae(1,1,u0.t16HB,u0.t16l),new ae(2,3,u0.t16HB,u0.t16l),new ae(3,7,u0.t16HB,u0.t16l),new ae(4,15,u0.t16HB,u0.t16l),new ae(6,63,u0.t16HB,u0.t16l),new ae(8,255,u0.t16HB,u0.t16l),new ae(10,1023,u0.t16HB,u0.t16l),new ae(13,8191,u0.t16HB,u0.t16l),new ae(4,15,u0.t24HB,u0.t24l),new ae(5,31,u0.t24HB,u0.t24l),new ae(6,63,u0.t24HB,u0.t24l),new ae(7,127,u0.t24HB,u0.t24l),new ae(8,255,u0.t24HB,u0.t24l),new ae(9,511,u0.t24HB,u0.t24l),new ae(11,2047,u0.t24HB,u0.t24l),new ae(13,8191,u0.t24HB,u0.t24l),new ae(0,0,u0.t32HB,u0.t32l),new ae(0,0,u0.t33HB,u0.t33l)],u0.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],u0.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],u0.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],u0.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],u0.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],u0.scfsi_band=[0,6,11,16,21];var te=u0,Z1=G.VbrMode,Ot=G.Float,Zt=G.Util,P1=G.new_float,vs=G.new_int,ct=G.assert;B1.Q_MAX=256+1,B1.Q_MAX2=116,B1.LARGE_BITS=1e5,B1.IXMAX_VAL=8206;function B1(){var M=null,F=null,j=null;this.setModules=function(r,h,x){M=r,F=h,j=x};function q(r){return b[r+B1.Q_MAX2]}this.IPOW20=function(r){return w[r]};var i0=2220446049250313e-31,X=B1.IXMAX_VAL,W=X+2,v0=B1.Q_MAX,d0=B1.Q_MAX2,C=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var s0=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=s0,this.sfBandIndex=[new i1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var b=P1(v0+d0+1),w=P1(v0),B=P1(W),e=P1(W);this.adj43=e;function O(r,h){var x=j.ATHformula(h,r);return x-=C,x=Math.pow(10,x/10+r.ATHlower),x}function L(r){for(var h=r.internal_flags.ATH.l,x=r.internal_flags.ATH.psfb21,y=r.internal_flags.ATH.s,R=r.internal_flags.ATH.psfb12,t=r.internal_flags,v=r.out_samplerate,_=0;_<f.SBMAX_l;_++){var n=t.scalefac_band.l[_],c=t.scalefac_band.l[_+1];h[_]=Ot.MAX_VALUE;for(var u=n;u<c;u++){var s=u*v/1152,i=O(r,s);h[_]=Math.min(h[_],i)}}for(var _=0;_<f.PSFB21;_++){var n=t.scalefac_band.psfb21[_],c=t.scalefac_band.psfb21[_+1];x[_]=Ot.MAX_VALUE;for(var u=n;u<c;u++){var s=u*v/1152,i=O(r,s);x[_]=Math.min(x[_],i)}}for(var _=0;_<f.SBMAX_s;_++){var n=t.scalefac_band.s[_],c=t.scalefac_band.s[_+1];y[_]=Ot.MAX_VALUE;for(var u=n;u<c;u++){var s=u*v/384,i=O(r,s);y[_]=Math.min(y[_],i)}y[_]*=t.scalefac_band.s[_+1]-t.scalefac_band.s[_]}for(var _=0;_<f.PSFB12;_++){var n=t.scalefac_band.psfb12[_],c=t.scalefac_band.psfb12[_+1];R[_]=Ot.MAX_VALUE;for(var u=n;u<c;u++){var s=u*v/384,i=O(r,s);R[_]=Math.min(R[_],i)}R[_]*=t.scalefac_band.s[13]-t.scalefac_band.s[12]}if(r.noATH){for(var _=0;_<f.SBMAX_l;_++)h[_]=1e-20;for(var _=0;_<f.PSFB21;_++)x[_]=1e-20;for(var _=0;_<f.SBMAX_s;_++)y[_]=1e-20;for(var _=0;_<f.PSFB12;_++)R[_]=1e-20}t.ATH.floor=10*Math.log10(O(r,-1))}this.iteration_init=function(r){var h=r.internal_flags,x=h.l3_side,y;if(h.iteration_init_init==0){for(h.iteration_init_init=1,x.main_data_begin=0,L(r),B[0]=0,y=1;y<W;y++)B[y]=Math.pow(y,4/3);for(y=0;y<W-1;y++)e[y]=y+1-Math.pow(.5*(B[y]+B[y+1]),.75);for(e[y]=.5,y=0;y<v0;y++)w[y]=Math.pow(2,(y-210)*-.1875);for(y=0;y<=v0+d0;y++)b[y]=Math.pow(2,(y-210-d0)*.25);M.huffman_init(h);{var R,t,v,_;for(y=r.exp_nspsytune>>2&63,y>=32&&(y-=64),R=Math.pow(10,y/4/10),y=r.exp_nspsytune>>8&63,y>=32&&(y-=64),t=Math.pow(10,y/4/10),y=r.exp_nspsytune>>14&63,y>=32&&(y-=64),v=Math.pow(10,y/4/10),y=r.exp_nspsytune>>20&63,y>=32&&(y-=64),_=v*Math.pow(10,y/4/10),y=0;y<f.SBMAX_l;y++){var n;y<=6?n=R:y<=13?n=t:y<=20?n=v:n=_,h.nsPsy.longfact[y]=n}for(y=0;y<f.SBMAX_s;y++){var n;y<=5?n=R:y<=10?n=t:y<=11?n=v:n=_,h.nsPsy.shortfact[y]=n}}}},this.on_pe=function(r,h,x,y,R,t){var v=r.internal_flags,_=0,n,c=vs(2),u,s=new da(_),i=F.ResvMaxBits(r,y,s,t);_=s.bits;var l=_+i;for(l>he.MAX_BITS_PER_GRANULE&&(l=he.MAX_BITS_PER_GRANULE),n=0,u=0;u<v.channels_out;++u)x[u]=Math.min(he.MAX_BITS_PER_CHANNEL,_/v.channels_out),c[u]=0|x[u]*h[R][u]/700-x[u],c[u]>y*3/4&&(c[u]=y*3/4),c[u]<0&&(c[u]=0),c[u]+x[u]>he.MAX_BITS_PER_CHANNEL&&(c[u]=Math.max(0,he.MAX_BITS_PER_CHANNEL-x[u])),n+=c[u];if(n>i)for(u=0;u<v.channels_out;++u)c[u]=i*c[u]/n;for(u=0;u<v.channels_out;++u)x[u]+=c[u],i-=c[u];for(n=0,u=0;u<v.channels_out;++u)n+=x[u];if(n>he.MAX_BITS_PER_GRANULE){var S=0;for(u=0;u<v.channels_out;++u)x[u]*=he.MAX_BITS_PER_GRANULE,x[u]/=n,S+=x[u]}return l},this.reduce_side=function(r,h,x,y){ct(r[0]+r[1]<=he.MAX_BITS_PER_GRANULE);var R=.33*(.5-h)/.5;R<0&&(R=0),R>.5&&(R=.5);var t=0|R*.5*(r[0]+r[1]);t>he.MAX_BITS_PER_CHANNEL-r[0]&&(t=he.MAX_BITS_PER_CHANNEL-r[0]),t<0&&(t=0),r[1]>=125&&(r[1]-t>125?(r[0]<x&&(r[0]+=t),r[1]-=t):(r[0]+=r[1]-125,r[1]=125)),t=r[0]+r[1],t>y&&(r[0]=y*r[0]/t,r[1]=y*r[1]/t),ct(r[0]<=he.MAX_BITS_PER_CHANNEL),ct(r[1]<=he.MAX_BITS_PER_CHANNEL),ct(r[0]+r[1]<=he.MAX_BITS_PER_GRANULE)},this.athAdjust=function(r,h,x){var y=90.30873362,R=94.82444863,t=Zt.FAST_LOG10_X(h,10),v=r*r,_=0;return t-=x,v>1e-20&&(_=1+Zt.FAST_LOG10_X(v,10/y)),_<0&&(_=0),t*=_,t+=x+y-R,Math.pow(10,.1*t)},this.calc_xmin=function(r,h,x,y){var R=0,t=r.internal_flags,v,_=0,n=0,c=t.ATH,u=x.xr,s=r.VBR==Z1.vbr_mtrh?1:0,i=t.masking_lower;for((r.VBR==Z1.vbr_mtrh||r.VBR==Z1.vbr_mt)&&(i=1),v=0;v<x.psy_lmax;v++){var l,S,P,k,V,a;r.VBR==Z1.vbr_rh||r.VBR==Z1.vbr_mtrh?S=athAdjust(c.adjust,c.l[v],c.floor):S=c.adjust*c.l[v],V=x.width[v],P=S/V,k=i0,a=V>>1,l=0;do{var o,Y;o=u[_]*u[_],l+=o,k+=o<P?o:P,_++,Y=u[_]*u[_],l+=Y,k+=Y<P?Y:P,_++}while(--a>0);if(l>S&&n++,v==f.SBPSY_l){var J=S*t.nsPsy.longfact[v];k<J&&(k=J)}if(s!=0&&(S=k),!r.ATHonly){var h0=h.en.l[v];if(h0>0){var J;J=l*h.thm.l[v]*i/h0,s!=0&&(J*=t.nsPsy.longfact[v]),S<J&&(S=J)}}s!=0?y[R++]=S:y[R++]=S*t.nsPsy.longfact[v]}var y0=575;if(x.block_type!=f.SHORT_TYPE)for(var f0=576;f0--!=0&&T1.EQ(u[f0],0);)y0=f0;x.max_nonzero_coeff=y0;for(var x0=x.sfb_smin;v<x.psymax;x0++,v+=3){var V,F0,k0;for(r.VBR==Z1.vbr_rh||r.VBR==Z1.vbr_mtrh?k0=athAdjust(c.adjust,c.s[x0],c.floor):k0=c.adjust*c.s[x0],V=x.width[v],F0=0;F0<3;F0++){var l=0,S,P,k,a=V>>1;P=k0/V,k=i0;do{var o,Y;o=u[_]*u[_],l+=o,k+=o<P?o:P,_++,Y=u[_]*u[_],l+=Y,k+=Y<P?Y:P,_++}while(--a>0);if(l>k0&&n++,x0==f.SBPSY_s){var J=k0*t.nsPsy.shortfact[x0];k<J&&(k=J)}if(s!=0?S=k:S=k0,!r.ATHonly&&!r.ATHshort){var h0=h.en.s[x0][F0];if(h0>0){var J;J=l*h.thm.s[x0][F0]*i/h0,s!=0&&(J*=t.nsPsy.shortfact[x0]),S<J&&(S=J)}}s!=0?y[R++]=S:y[R++]=S*t.nsPsy.shortfact[x0]}r.useTemporal&&(y[R-3]>y[R-3+1]&&(y[R-3+1]+=(y[R-3]-y[R-3+1])*t.decay),y[R-3+1]>y[R-3+2]&&(y[R-3+2]+=(y[R-3+1]-y[R-3+2])*t.decay))}return n};function T(r){this.s=r}this.calc_noise_core=function(r,h,x,y){var R=0,t=h.s,v=r.l3_enc;if(t>r.count1)for(;x--!=0;){var _;_=r.xr[t],t++,R+=_*_,_=r.xr[t],t++,R+=_*_}else if(t>r.big_values){var n=P1(2);for(n[0]=0,n[1]=y;x--!=0;){var _;_=Math.abs(r.xr[t])-n[v[t]],t++,R+=_*_,_=Math.abs(r.xr[t])-n[v[t]],t++,R+=_*_}}else for(;x--!=0;){var _;_=Math.abs(r.xr[t])-B[v[t]]*y,t++,R+=_*_,_=Math.abs(r.xr[t])-B[v[t]]*y,t++,R+=_*_}return h.s=t,R},this.calc_noise=function(r,h,x,y,R){var t=0,v=0,_,n,c=0,u=0,s=0,i=-20,l=0,S=r.scalefac,P=0;for(y.over_SSD=0,_=0;_<r.psymax;_++){var k=r.global_gain-(S[P++]+(r.preflag!=0?s0[_]:0)<<r.scalefac_scale+1)-r.subblock_gain[r.window[_]]*8,V=0;if(R!=null&&R.step[_]==k)V=R.noise[_],l+=r.width[_],x[t++]=V/h[v++],V=R.noise_log[_];else{var a=q(k);if(n=r.width[_]>>1,l+r.width[_]>r.max_nonzero_coeff){var o;o=r.max_nonzero_coeff-l+1,o>0?n=o>>1:n=0}var Y=new T(l);V=this.calc_noise_core(r,Y,n,a),l=Y.s,R!=null&&(R.step[_]=k,R.noise[_]=V),V=x[t++]=V/h[v++],V=Zt.FAST_LOG10(Math.max(V,1e-20)),R!=null&&(R.noise_log[_]=V)}if(R!=null&&(R.global_gain=r.global_gain),s+=V,V>0){var J;J=Math.max(0|V*10+.5,1),y.over_SSD+=J*J,c++,u+=V}i=Math.max(i,V)}return y.over_count=c,y.tot_noise=s,y.over_noise=u,y.max_noise=i,c},this.set_pinfo=function(r,h,x,y,R){var t=r.internal_flags,v,_,n,c,u,s=h.scalefac_scale==0?.5:1,i=h.scalefac,l=P1(L3Side.SFBMAX),S=P1(L3Side.SFBMAX),P=new CalcNoiseResult;calc_xmin(r,x,h,l),calc_noise(h,l,S,P,null);var k=0;for(_=h.sfb_lmax,h.block_type!=f.SHORT_TYPE&&h.mixed_block_flag==0&&(_=22),v=0;v<_;v++){var V=t.scalefac_band.l[v],a=t.scalefac_band.l[v+1],o=a-V;for(c=0;k<a;k++)c+=h.xr[k]*h.xr[k];c/=o,u=1e15,t.pinfo.en[y][R][v]=u*c,t.pinfo.xfsf[y][R][v]=u*l[v]*S[v]/o,x.en.l[v]>0&&!r.ATHonly?c=c/x.en.l[v]:c=0,t.pinfo.thr[y][R][v]=u*Math.max(c*x.thm.l[v],t.ATH.l[v]),t.pinfo.LAMEsfb[y][R][v]=0,h.preflag!=0&&v>=11&&(t.pinfo.LAMEsfb[y][R][v]=-s*s0[v]),v<f.SBPSY_l&&(ct(i[v]>=0),t.pinfo.LAMEsfb[y][R][v]-=s*i[v])}if(h.block_type==f.SHORT_TYPE)for(_=v,v=h.sfb_smin;v<f.SBMAX_s;v++)for(var V=t.scalefac_band.s[v],a=t.scalefac_band.s[v+1],o=a-V,Y=0;Y<3;Y++){for(c=0,n=V;n<a;n++)c+=h.xr[k]*h.xr[k],k++;c=Math.max(c/o,1e-20),u=1e15,t.pinfo.en_s[y][R][3*v+Y]=u*c,t.pinfo.xfsf_s[y][R][3*v+Y]=u*l[_]*S[_]/o,x.en.s[v][Y]>0?c=c/x.en.s[v][Y]:c=0,(r.ATHonly||r.ATHshort)&&(c=0),t.pinfo.thr_s[y][R][3*v+Y]=u*Math.max(c*x.thm.s[v][Y],t.ATH.s[v]),t.pinfo.LAMEsfb_s[y][R][3*v+Y]=-2*h.subblock_gain[Y],v<f.SBPSY_s&&(t.pinfo.LAMEsfb_s[y][R][3*v+Y]-=s*i[_]),_++}t.pinfo.LAMEqss[y][R]=h.global_gain,t.pinfo.LAMEmainbits[y][R]=h.part2_3_length+h.part2_length,t.pinfo.LAMEsfbits[y][R]=h.part2_length,t.pinfo.over[y][R]=P.over_count,t.pinfo.max_noise[y][R]=P.max_noise*10,t.pinfo.over_noise[y][R]=P.over_noise*10,t.pinfo.tot_noise[y][R]=P.tot_noise*10,t.pinfo.over_SSD[y][R]=P.over_SSD}}var L1=B1,hs=G.System,ds=G.Arrays,ut=G.new_int,Pt=G.assert;function Yt(){var M=null;this.qupvt=null,this.setModules=function(n){this.qupvt=n,M=n};function F(n){this.bits=0|n}var j=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function q(n,c,u,s,i,l){var S=.5946/c;for(n=n>>1;n--!=0;)i[l++]=S>u[s++]?0:1,i[l++]=S>u[s++]?0:1}function i0(n,c,u,s,i,l){n=n>>1;var S=n%2;for(n=n>>1;n--!=0;){var P,k,V,a,o,Y,J,h0;P=u[s++]*c,k=u[s++]*c,o=0|P,V=u[s++]*c,Y=0|k,a=u[s++]*c,J=0|V,P+=M.adj43[o],h0=0|a,k+=M.adj43[Y],i[l++]=0|P,V+=M.adj43[J],i[l++]=0|k,a+=M.adj43[h0],i[l++]=0|V,i[l++]=0|a}if(S!=0){var P,k,o,Y;P=u[s++]*c,k=u[s++]*c,o=0|P,Y=0|k,P+=M.adj43[o],k+=M.adj43[Y],i[l++]=0|P,i[l++]=0|k}}function X(n,c,u,s,i){var l,S,P=0,k,V=0,a=0,o=0,Y=c,J=0,h0=Y,y0=0,f0=n,x0=0;for(k=i!=null&&s.global_gain==i.global_gain,s.block_type==f.SHORT_TYPE?S=38:S=21,l=0;l<=S;l++){var F0=-1;if((k||s.block_type==f.NORM_TYPE)&&(F0=s.global_gain-(s.scalefac[l]+(s.preflag!=0?M.pretab[l]:0)<<s.scalefac_scale+1)-s.subblock_gain[s.window[l]]*8),Pt(s.width[l]>=0),k&&i.step[l]==F0)V!=0&&(i0(V,u,f0,x0,h0,y0),V=0),a!=0&&(q(a,u,f0,x0,h0,y0),a=0);else{var k0=s.width[l];if(P+s.width[l]>s.max_nonzero_coeff){var b0;b0=s.max_nonzero_coeff-P+1,ds.fill(c,s.max_nonzero_coeff,576,0),k0=b0,k0<0&&(k0=0),l=S+1}if(V==0&&a==0&&(h0=Y,y0=J,f0=n,x0=o),i!=null&&i.sfb_count1>0&&l>=i.sfb_count1&&i.step[l]>0&&F0>=i.step[l]?(V!=0&&(i0(V,u,f0,x0,h0,y0),V=0,h0=Y,y0=J,f0=n,x0=o),a+=k0):(a!=0&&(q(a,u,f0,x0,h0,y0),a=0,h0=Y,y0=J,f0=n,x0=o),V+=k0),k0<=0){a!=0&&(q(a,u,f0,x0,h0,y0),a=0),V!=0&&(i0(V,u,f0,x0,h0,y0),V=0);break}}l<=S&&(J+=s.width[l],o+=s.width[l],P+=s.width[l])}V!=0&&(i0(V,u,f0,x0,h0,y0),V=0),a!=0&&(q(a,u,f0,x0,h0,y0),a=0)}function W(n,c,u){var s=0,i=0;do{var l=n[c++],S=n[c++];s<l&&(s=l),i<S&&(i=S)}while(c<u);return s<i&&(s=i),s}function v0(n,c,u,s,i,l){var S=te.ht[s].xlen*65536+te.ht[i].xlen,P=0,k;do{var V=n[c++],a=n[c++];V!=0&&(V>14&&(V=15,P+=S),V*=16),a!=0&&(a>14&&(a=15,P+=S),V+=a),P+=te.largetbl[V]}while(c<u);return k=P&65535,P>>=16,P>k&&(P=k,s=i),l.bits+=P,s}function d0(n,c,u,s){var i=0,l=te.ht[1].hlen;do{var S=n[c+0]*2+n[c+1];c+=2,i+=l[S]}while(c<u);return s.bits+=i,1}function C(n,c,u,s,i){var l=0,S,P=te.ht[s].xlen,k;s==2?k=te.table23:k=te.table56;do{var V=n[c+0]*P+n[c+1];c+=2,l+=k[V]}while(c<u);return S=l&65535,l>>=16,l>S&&(l=S,s++),i.bits+=l,s}function s0(n,c,u,s,i){var l=0,S=0,P=0,k=te.ht[s].xlen,V=te.ht[s].hlen,a=te.ht[s+1].hlen,o=te.ht[s+2].hlen;do{var Y=n[c+0]*k+n[c+1];c+=2,l+=V[Y],S+=a[Y],P+=o[Y]}while(c<u);var J=s;return l>S&&(l=S,J++),l>P&&(l=P,J=s+2),i.bits+=l,J}var b=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function w(n,c,u,s){var i=W(n,c,u);switch(i){case 0:return i;case 1:return d0(n,c,u,s);case 2:case 3:return C(n,c,u,b[i-1],s);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return s0(n,c,u,b[i-1],s);default:if(i>L1.IXMAX_VAL)return s.bits=L1.LARGE_BITS,-1;i-=15;var l;for(l=24;l<32&&!(te.ht[l].linmax>=i);l++);var S;for(S=l-8;S<24&&!(te.ht[S].linmax>=i);S++);return v0(n,c,u,S,l,s)}}this.noquant_count_bits=function(n,c,u){var s=c.l3_enc,i=Math.min(576,c.max_nonzero_coeff+2>>1<<1);for(u!=null&&(u.sfb_count1=0);i>1&&!(s[i-1]|s[i-2]);i-=2);c.count1=i;for(var l=0,S=0;i>3;i-=4){var P;if(((s[i-1]|s[i-2]|s[i-3]|s[i-4])&2147483647)>1)break;P=((s[i-4]*2+s[i-3])*2+s[i-2])*2+s[i-1],l+=te.t32l[P],S+=te.t33l[P]}var k=l;if(c.count1table_select=0,l>S&&(k=S,c.count1table_select=1),c.count1bits=k,c.big_values=i,i==0)return k;if(c.block_type==f.SHORT_TYPE)l=3*n.scalefac_band.s[3],l>c.big_values&&(l=c.big_values),S=c.big_values;else if(c.block_type==f.NORM_TYPE){if(l=c.region0_count=n.bv_scf[i-2],S=c.region1_count=n.bv_scf[i-1],S=n.scalefac_band.l[l+S+2],l=n.scalefac_band.l[l+1],S<i){var V=new F(k);c.table_select[2]=w(s,S,i,V),k=V.bits}}else c.region0_count=7,c.region1_count=f.SBMAX_l-1-7-1,l=n.scalefac_band.l[7+1],S=i,l>S&&(l=S);if(l=Math.min(l,i),S=Math.min(S,i),0<l){var V=new F(k);c.table_select[0]=w(s,0,l,V),k=V.bits}if(l<S){var V=new F(k);c.table_select[1]=w(s,l,S,V),k=V.bits}if(n.use_best_huffman==2&&(c.part2_3_length=k,best_huffman_divide(n,c),k=c.part2_3_length),u!=null&&c.block_type==f.NORM_TYPE){for(var a=0;n.scalefac_band.l[a]<c.big_values;)a++;u.sfb_count1=a}return k},this.count_bits=function(n,c,u,s){var i=u.l3_enc,l=L1.IXMAX_VAL/M.IPOW20(u.global_gain);if(u.xrpow_max>l)return L1.LARGE_BITS;if(X(c,i,M.IPOW20(u.global_gain),u,s),n.substep_shaping&2)for(var S=0,P=u.global_gain+u.scalefac_scale,k=.634521682242439/M.IPOW20(P),V=0;V<u.sfbmax;V++){var a=u.width[V];if(n.pseudohalf[V]==0)S+=a;else{var o;for(o=S,S+=a;o<S;++o)i[o]=c[o]>=k?i[o]:0}}return this.noquant_count_bits(n,u,s)};function B(n,c,u,s,i,l,S){for(var P=c.big_values,k=0;k<=7+15;k++)s[k]=L1.LARGE_BITS;for(var k=0;k<16;k++){var V=n.scalefac_band.l[k+1];if(V>=P)break;var a=0,o=new F(a),Y=w(u,0,V,o);a=o.bits;for(var J=0;J<8;J++){var h0=n.scalefac_band.l[k+J+2];if(h0>=P)break;var y0=a;o=new F(y0);var f0=w(u,V,h0,o);y0=o.bits,s[k+J]>y0&&(s[k+J]=y0,i[k+J]=k,l[k+J]=Y,S[k+J]=f0)}}}function e(n,c,u,s,i,l,S,P){for(var k=c.big_values,V=2;V<f.SBMAX_l+1;V++){var a=n.scalefac_band.l[V];if(a>=k)break;var o=i[V-2]+c.count1bits;if(u.part2_3_length<=o)break;var Y=new F(o),J=w(s,a,k,Y);o=Y.bits,!(u.part2_3_length<=o)&&(u.assign(c),u.part2_3_length=o,u.region0_count=l[V-2],u.region1_count=V-2-l[V-2],u.table_select[0]=S[V-2],u.table_select[1]=P[V-2],u.table_select[2]=J)}}this.best_huffman_divide=function(n,c){var u=new F1,s=c.l3_enc,i=ut(7+15+1),l=ut(7+15+1),S=ut(7+15+1),P=ut(7+15+1);if(!(c.block_type==f.SHORT_TYPE&&n.mode_gr==1)){u.assign(c),c.block_type==f.NORM_TYPE&&(B(n,c,s,i,l,S,P),e(n,u,c,s,i,l,S,P));var k=u.big_values;if(!(k==0||(s[k-2]|s[k-1])>1)&&(k=c.count1+2,!(k>576))){u.assign(c),u.count1=k;for(var V=0,a=0;k>u.big_values;k-=4){var o=((s[k-4]*2+s[k-3])*2+s[k-2])*2+s[k-1];V+=te.t32l[o],a+=te.t33l[o]}if(u.big_values=k,u.count1table_select=0,V>a&&(V=a,u.count1table_select=1),u.count1bits=V,u.block_type==f.NORM_TYPE)e(n,u,c,s,i,l,S,P);else{if(u.part2_3_length=V,V=n.scalefac_band.l[7+1],V>k&&(V=k),V>0){var Y=new F(u.part2_3_length);u.table_select[0]=w(s,0,V,Y),u.part2_3_length=Y.bits}if(k>V){var Y=new F(u.part2_3_length);u.table_select[1]=w(s,V,k,Y),u.part2_3_length=Y.bits}c.part2_3_length>u.part2_3_length&&c.assign(u)}}}};var O=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],L=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],T=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],r=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Yt.slen1_tab=T,Yt.slen2_tab=r;function h(n,c){for(var u,s=c.tt[1][n],i=c.tt[0][n],l=0;l<te.scfsi_band.length-1;l++){for(u=te.scfsi_band[l];u<te.scfsi_band[l+1]&&!(i.scalefac[u]!=s.scalefac[u]&&s.scalefac[u]>=0);u++);if(u==te.scfsi_band[l+1]){for(u=te.scfsi_band[l];u<te.scfsi_band[l+1];u++)s.scalefac[u]=-1;c.scfsi[n][l]=1}}var S=0,P=0;for(u=0;u<11;u++)s.scalefac[u]!=-1&&(P++,S<s.scalefac[u]&&(S=s.scalefac[u]));for(var k=0,V=0;u<f.SBPSY_l;u++)s.scalefac[u]!=-1&&(V++,k<s.scalefac[u]&&(k=s.scalefac[u]));for(var l=0;l<16;l++)if(S<O[l]&&k<L[l]){var a=T[l]*P+r[l]*V;s.part2_length>a&&(s.part2_length=a,s.scalefac_compress=l)}}this.best_scalefac_store=function(n,c,u,s){var i=s.tt[c][u],l,S,P,k,V=0;for(P=0,l=0;l<i.sfbmax;l++){var a=i.width[l];for(P+=a,k=-a;k<0&&i.l3_enc[k+P]==0;k++);k==0&&(i.scalefac[l]=V=-2)}if(i.scalefac_scale==0&&i.preflag==0){var o=0;for(l=0;l<i.sfbmax;l++)i.scalefac[l]>0&&(o|=i.scalefac[l]);if(!(o&1)&&o!=0){for(l=0;l<i.sfbmax;l++)i.scalefac[l]>0&&(i.scalefac[l]>>=1);i.scalefac_scale=V=1}}if(i.preflag==0&&i.block_type!=f.SHORT_TYPE&&n.mode_gr==2){for(l=11;l<f.SBPSY_l&&!(i.scalefac[l]<M.pretab[l]&&i.scalefac[l]!=-2);l++);if(l==f.SBPSY_l){for(l=11;l<f.SBPSY_l;l++)i.scalefac[l]>0&&(i.scalefac[l]-=M.pretab[l]);i.preflag=V=1}}for(S=0;S<4;S++)s.scfsi[u][S]=0;for(n.mode_gr==2&&c==1&&s.tt[0][u].block_type!=f.SHORT_TYPE&&s.tt[1][u].block_type!=f.SHORT_TYPE&&(h(u,s),V=0),l=0;l<i.sfbmax;l++)i.scalefac[l]==-2&&(i.scalefac[l]=0);V!=0&&(n.mode_gr==2?this.scale_bitcount(i):this.scale_bitcount_lsf(n,i))};function x(n,c){for(var u=0;u<c;++u)if(n[u]<0)return!1;return!0}var y=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],R=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],t=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(n){var c,u,s=0,i=0,l,S=n.scalefac;if(Pt(x(S,n.sfbmax)),n.block_type==f.SHORT_TYPE)l=y,n.mixed_block_flag!=0&&(l=R);else if(l=t,n.preflag==0){for(u=11;u<f.SBPSY_l&&!(S[u]<M.pretab[u]);u++);if(u==f.SBPSY_l)for(n.preflag=1,u=11;u<f.SBPSY_l;u++)S[u]-=M.pretab[u]}for(u=0;u<n.sfbdivide;u++)s<S[u]&&(s=S[u]);for(;u<n.sfbmax;u++)i<S[u]&&(i=S[u]);for(n.part2_length=L1.LARGE_BITS,c=0;c<16;c++)s<O[c]&&i<L[c]&&n.part2_length>l[c]&&(n.part2_length=l[c],n.scalefac_compress=c);return n.part2_length==L1.LARGE_BITS};var v=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(n,c){var u,s,i,l,S,P,k,V,a=ut(4),o=c.scalefac;for(c.preflag!=0?u=2:u=0,k=0;k<4;k++)a[k]=0;if(c.block_type==f.SHORT_TYPE){s=1;var Y=M.nr_of_sfb_block[u][s];for(V=0,i=0;i<4;i++)for(l=Y[i]/3,k=0;k<l;k++,V++)for(S=0;S<3;S++)o[V*3+S]>a[i]&&(a[i]=o[V*3+S])}else{s=0;var Y=M.nr_of_sfb_block[u][s];for(V=0,i=0;i<4;i++)for(l=Y[i],k=0;k<l;k++,V++)o[V]>a[i]&&(a[i]=o[V])}for(P=!1,i=0;i<4;i++)a[i]>v[u][i]&&(P=!0);if(!P){var J,h0,y0,f0;for(c.sfb_partition_table=M.nr_of_sfb_block[u][s],i=0;i<4;i++)c.slen[i]=_[a[i]];switch(J=c.slen[0],h0=c.slen[1],y0=c.slen[2],f0=c.slen[3],u){case 0:c.scalefac_compress=(J*5+h0<<4)+(y0<<2)+f0;break;case 1:c.scalefac_compress=400+(J*5+h0<<2)+y0;break;case 2:c.scalefac_compress=500+J*3+h0;break;default:hs.err.printf(`intensity stereo not implemented yet
`);break}}if(!P)for(Pt(c.sfb_partition_table!=null),c.part2_length=0,i=0;i<4;i++)c.part2_length+=c.slen[i]*c.sfb_partition_table[i];return P};var _=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(n){for(var c=2;c<=576;c+=2){for(var u=0,s;n.scalefac_band.l[++u]<c;);for(s=j[u][0];n.scalefac_band.l[s+1]>c;)s--;for(s<0&&(s=j[u][0]),n.bv_scf[c-2]=s,s=j[u][1];n.scalefac_band.l[s+n.bv_scf[c-2]+2]>c;)s--;s<0&&(s=j[u][1]),n.bv_scf[c-1]=s}}}var jt=Yt,b1=G.System,fs=G.Arrays,ms=G.new_byte,ps=G.new_float_n,bs=G.new_int,Re=G.assert;Vt.EQ=function(M,F){return Math.abs(M)>Math.abs(F)?Math.abs(M-F)<=Math.abs(M)*1e-6:Math.abs(M-F)<=Math.abs(F)*1e-6},Vt.NEQ=function(M,F){return!Vt.EQ(M,F)};function Vt(){var M=this,F=32773,j=null,q=null,i0=null,X=null;this.setModules=function(v,_,n,c){j=v,q=_,i0=n,X=c};var W=null,v0=0,d0=0,C=0;this.getframebits=function(v){var _=v.internal_flags,n;_.bitrate_index!=0?n=te.bitrate_table[v.version][_.bitrate_index]:n=v.brate;var c=0|(v.version+1)*72e3*n/v.out_samplerate+_.padding;return 8*c};function s0(v){b1.arraycopy(v.header[v.w_ptr].buf,0,W,d0,v.sideinfo_len),d0+=v.sideinfo_len,v0+=v.sideinfo_len*8,v.w_ptr=v.w_ptr+1&he.MAX_HEADER_BUF-1}function b(v,_,n){for(;n>0;){var c;C==0&&(C=8,d0++,Re(v.header[v.w_ptr].write_timing>=v0),v.header[v.w_ptr].write_timing==v0&&s0(v),W[d0]=0),c=Math.min(n,C),n-=c,C-=c,W[d0]|=_>>n<<C,v0+=c}}function w(v,_,n){for(;n>0;){var c;C==0&&(C=8,d0++,W[d0]=0),c=Math.min(n,C),n-=c,C-=c,W[d0]|=_>>n<<C,v0+=c}}function B(v,_){var n=v.internal_flags,c;if(_>=8&&(b(n,76,8),_-=8),_>=8&&(b(n,65,8),_-=8),_>=8&&(b(n,77,8),_-=8),_>=8&&(b(n,69,8),_-=8),_>=32){var u=i0.getLameShortVersion();if(_>=32)for(c=0;c<u.length&&_>=8;++c)_-=8,b(n,u.charAt(c),8)}for(;_>=1;_-=1)b(n,n.ancillary_flag,1),n.ancillary_flag^=v.disable_reservoir?0:1}function e(v,_,n){for(var c=v.header[v.h_ptr].ptr;n>0;){var u=Math.min(n,8-(c&7));n-=u,v.header[v.h_ptr].buf[c>>3]|=_>>n<<8-(c&7)-u,c+=u}v.header[v.h_ptr].ptr=c}function O(v,_){v<<=8;for(var n=0;n<8;n++)v<<=1,_<<=1,(_^v)&65536&&(_^=F);return _}this.CRC_writeheader=function(v,_){var n=65535;n=O(_[2]&255,n),n=O(_[3]&255,n);for(var c=6;c<v.sideinfo_len;c++)n=O(_[c]&255,n);_[4]=byte(n>>8),_[5]=byte(n&255)};function L(v,_){var n=v.internal_flags,c,u,s;if(c=n.l3_side,n.header[n.h_ptr].ptr=0,fs.fill(n.header[n.h_ptr].buf,0,n.sideinfo_len,0),v.out_samplerate<16e3?e(n,4094,12):e(n,4095,12),e(n,v.version,1),e(n,4-3,2),e(n,v.error_protection?0:1,1),e(n,n.bitrate_index,4),e(n,n.samplerate_index,2),e(n,n.padding,1),e(n,v.extension,1),e(n,v.mode.ordinal(),2),e(n,n.mode_ext,2),e(n,v.copyright,1),e(n,v.original,1),e(n,v.emphasis,2),v.error_protection&&e(n,0,16),v.version==1){for(Re(c.main_data_begin>=0),e(n,c.main_data_begin,9),n.channels_out==2?e(n,c.private_bits,3):e(n,c.private_bits,5),s=0;s<n.channels_out;s++){var i;for(i=0;i<4;i++)e(n,c.scfsi[s][i],1)}for(u=0;u<2;u++)for(s=0;s<n.channels_out;s++){var l=c.tt[u][s];e(n,l.part2_3_length+l.part2_length,12),e(n,l.big_values/2,9),e(n,l.global_gain,8),e(n,l.scalefac_compress,4),l.block_type!=f.NORM_TYPE?(e(n,1,1),e(n,l.block_type,2),e(n,l.mixed_block_flag,1),l.table_select[0]==14&&(l.table_select[0]=16),e(n,l.table_select[0],5),l.table_select[1]==14&&(l.table_select[1]=16),e(n,l.table_select[1],5),e(n,l.subblock_gain[0],3),e(n,l.subblock_gain[1],3),e(n,l.subblock_gain[2],3)):(e(n,0,1),l.table_select[0]==14&&(l.table_select[0]=16),e(n,l.table_select[0],5),l.table_select[1]==14&&(l.table_select[1]=16),e(n,l.table_select[1],5),l.table_select[2]==14&&(l.table_select[2]=16),e(n,l.table_select[2],5),Re(0<=l.region0_count&&l.region0_count<16),Re(0<=l.region1_count&&l.region1_count<8),e(n,l.region0_count,4),e(n,l.region1_count,3)),e(n,l.preflag,1),e(n,l.scalefac_scale,1),e(n,l.count1table_select,1)}}else for(Re(c.main_data_begin>=0),e(n,c.main_data_begin,8),e(n,c.private_bits,n.channels_out),u=0,s=0;s<n.channels_out;s++){var l=c.tt[u][s];e(n,l.part2_3_length+l.part2_length,12),e(n,l.big_values/2,9),e(n,l.global_gain,8),e(n,l.scalefac_compress,9),l.block_type!=f.NORM_TYPE?(e(n,1,1),e(n,l.block_type,2),e(n,l.mixed_block_flag,1),l.table_select[0]==14&&(l.table_select[0]=16),e(n,l.table_select[0],5),l.table_select[1]==14&&(l.table_select[1]=16),e(n,l.table_select[1],5),e(n,l.subblock_gain[0],3),e(n,l.subblock_gain[1],3),e(n,l.subblock_gain[2],3)):(e(n,0,1),l.table_select[0]==14&&(l.table_select[0]=16),e(n,l.table_select[0],5),l.table_select[1]==14&&(l.table_select[1]=16),e(n,l.table_select[1],5),l.table_select[2]==14&&(l.table_select[2]=16),e(n,l.table_select[2],5),Re(0<=l.region0_count&&l.region0_count<16),Re(0<=l.region1_count&&l.region1_count<8),e(n,l.region0_count,4),e(n,l.region1_count,3)),e(n,l.scalefac_scale,1),e(n,l.count1table_select,1)}v.error_protection&&CRC_writeheader(n,n.header[n.h_ptr].buf);{var S=n.h_ptr;Re(n.header[S].ptr==n.sideinfo_len*8),n.h_ptr=S+1&he.MAX_HEADER_BUF-1,n.header[n.h_ptr].write_timing=n.header[S].write_timing+_,n.h_ptr==n.w_ptr&&b1.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function T(v,_){var n=te.ht[_.count1table_select+32],c,u=0,s=_.big_values,i=_.big_values;for(Re(_.count1table_select<2),c=(_.count1-_.big_values)/4;c>0;--c){var l=0,S=0,P;P=_.l3_enc[s+0],P!=0&&(S+=8,_.xr[i+0]<0&&l++),P=_.l3_enc[s+1],P!=0&&(S+=4,l*=2,_.xr[i+1]<0&&l++),P=_.l3_enc[s+2],P!=0&&(S+=2,l*=2,_.xr[i+2]<0&&l++),P=_.l3_enc[s+3],P!=0&&(S++,l*=2,_.xr[i+3]<0&&l++),s+=4,i+=4,b(v,l+n.table[S],n.hlen[S]),u+=n.hlen[S]}return u}function r(v,_,n,c,u){var s=te.ht[_],i=0;if(_==0)return i;for(var l=n;l<c;l+=2){var S=0,P=0,k=s.xlen,V=s.xlen,a=0,o=u.l3_enc[l],Y=u.l3_enc[l+1];if(o!=0&&(u.xr[l]<0&&a++,S--),_>15){if(o>14){var J=o-15;Re(J<=s.linmax),a|=J<<1,P=k,o=15}if(Y>14){var h0=Y-15;Re(h0<=s.linmax),a<<=k,a|=h0,P+=k,Y=15}V=16}Y!=0&&(a<<=1,u.xr[l+1]<0&&a++,S--),o=o*V+Y,P-=S,S+=s.hlen[o],b(v,s.table[o],S),b(v,a,P),i+=S+P}return i}function h(v,_){var n=3*v.scalefac_band.s[3];n>_.big_values&&(n=_.big_values);var c=r(v,_.table_select[0],0,n,_);return c+=r(v,_.table_select[1],n,_.big_values,_),c}function x(v,_){var n,c,u,s;n=_.big_values;var i=_.region0_count+1;return Re(i<v.scalefac_band.l.length),u=v.scalefac_band.l[i],i+=_.region1_count+1,Re(i<v.scalefac_band.l.length),s=v.scalefac_band.l[i],u>n&&(u=n),s>n&&(s=n),c=r(v,_.table_select[0],0,u,_),c+=r(v,_.table_select[1],u,s,_),c+=r(v,_.table_select[2],s,n,_),c}function y(v){var _,n,c,u,s=0,i=v.internal_flags,l=i.l3_side;if(v.version==1)for(_=0;_<2;_++)for(n=0;n<i.channels_out;n++){var S=l.tt[_][n],P=jt.slen1_tab[S.scalefac_compress],k=jt.slen2_tab[S.scalefac_compress];for(u=0,c=0;c<S.sfbdivide;c++)S.scalefac[c]!=-1&&(b(i,S.scalefac[c],P),u+=P);for(;c<S.sfbmax;c++)S.scalefac[c]!=-1&&(b(i,S.scalefac[c],k),u+=k);Re(u==S.part2_length),S.block_type==f.SHORT_TYPE?u+=h(i,S):u+=x(i,S),u+=T(i,S),Re(u==S.part2_3_length+S.part2_length),s+=u}else for(_=0,n=0;n<i.channels_out;n++){var S=l.tt[_][n],V,a,o=0;if(Re(S.sfb_partition_table!=null),u=0,c=0,a=0,S.block_type==f.SHORT_TYPE){for(;a<4;a++){var Y=S.sfb_partition_table[a]/3,J=S.slen[a];for(V=0;V<Y;V++,c++)b(i,Math.max(S.scalefac[c*3+0],0),J),b(i,Math.max(S.scalefac[c*3+1],0),J),b(i,Math.max(S.scalefac[c*3+2],0),J),o+=3*J}u+=h(i,S)}else{for(;a<4;a++){var Y=S.sfb_partition_table[a],J=S.slen[a];for(V=0;V<Y;V++,c++)b(i,Math.max(S.scalefac[c],0),J),o+=J}u+=x(i,S)}u+=T(i,S),Re(u==S.part2_3_length),Re(o==S.part2_length),s+=o+u}return s}function R(){this.total=0}function t(v,_){var n=v.internal_flags,c,u,s,i,l;return l=n.w_ptr,i=n.h_ptr-1,i==-1&&(i=he.MAX_HEADER_BUF-1),c=n.header[i].write_timing-v0,_.total=c,c>=0&&(u=1+i-l,i<l&&(u=1+i-l+he.MAX_HEADER_BUF),c-=u*8*n.sideinfo_len),s=M.getframebits(v),c+=s,_.total+=s,_.total%8!=0?_.total=1+_.total/8:_.total=_.total/8,_.total+=d0+1,c<0&&b1.err.println(`strange error flushing buffer ... 
`),c}this.flush_bitstream=function(v){var _=v.internal_flags,n,c,u=_.h_ptr-1;if(u==-1&&(u=he.MAX_HEADER_BUF-1),n=_.l3_side,!((c=t(v,new R))<0)){if(B(v,c),Re(_.header[u].write_timing+this.getframebits(v)==v0),_.ResvSize=0,n.main_data_begin=0,_.findReplayGain){var s=j.GetTitleGain(_.rgdata);Re(NEQ(s,ft.GAIN_NOT_ENOUGH_SAMPLES)),_.RadioGain=Math.floor(s*10+.5)|0}_.findPeakSample&&(_.noclipGainChange=Math.ceil(Math.log10(_.PeakSample/32767)*20*10)|0,_.noclipGainChange>0&&(EQ(v.scale,1)||EQ(v.scale,0))?_.noclipScale=Math.floor(32767/_.PeakSample*100)/100:_.noclipScale=-1)}},this.add_dummy_byte=function(v,_,n){for(var c=v.internal_flags,u;n-- >0;)for(w(c,_,8),u=0;u<he.MAX_HEADER_BUF;++u)c.header[u].write_timing+=8},this.format_bitstream=function(v){var _=v.internal_flags,n;n=_.l3_side;var c=this.getframebits(v);B(v,n.resvDrain_pre),L(v,c);var u=8*_.sideinfo_len;if(u+=y(v),B(v,n.resvDrain_post),u+=n.resvDrain_post,n.main_data_begin+=(c-u)/8,t(v,new R)!=_.ResvSize&&b1.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),n.main_data_begin*8!=_.ResvSize&&(b1.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*n.main_data_begin,_.ResvSize,n.resvDrain_post,n.resvDrain_pre,8*_.sideinfo_len,u-n.resvDrain_post-8*_.sideinfo_len,u,u%8,c),b1.err.println("This is a fatal error.  It has several possible causes:"),b1.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),b1.err.println(" 9%%  Your system is overclocked"),b1.err.println(" 1%%  bug in LAME encoding library"),_.ResvSize=n.main_data_begin*8),v0>1e9){var s;for(s=0;s<he.MAX_HEADER_BUF;++s)_.header[s].write_timing-=v0;v0=0}return 0},this.copy_buffer=function(v,_,n,c,u){var s=d0+1;if(s<=0)return 0;if(c!=0&&s>c)return-1;if(b1.arraycopy(W,0,_,n,s),d0=-1,C=0,u!=0){var i=bs(1);if(i[0]=v.nMusicCRC,X.updateMusicCRC(i,_,n,s),v.nMusicCRC=i[0],s>0&&(v.VBR_seek_table.nBytesWritten+=s),v.decode_on_the_fly){for(var l=ps([2,1152]),S=s,P=-1,k;P!=0;)if(P=q.hip_decode1_unclipped(v.hip,_,n,S,l[0],l[1]),S=0,P==-1&&(P=0),P>0){if(v.findPeakSample){for(k=0;k<P;k++)l[0][k]>v.PeakSample?v.PeakSample=l[0][k]:-l[0][k]>v.PeakSample&&(v.PeakSample=-l[0][k]);if(v.channels_out>1)for(k=0;k<P;k++)l[1][k]>v.PeakSample?v.PeakSample=l[1][k]:-l[1][k]>v.PeakSample&&(v.PeakSample=-l[1][k])}if(v.findReplayGain&&j.AnalyzeSamples(v.rgdata,l[0],0,l[1],0,P,v.channels_out)==ft.GAIN_ANALYSIS_ERROR)return-6}}}return s},this.init_bit_stream_w=function(v){W=ms(_e.LAME_MAXMP3BUFFER),v.h_ptr=v.w_ptr=0,v.header[v.h_ptr].write_timing=0,d0=-1,C=0,v0=0}}var O1=Vt,xs=G.System,ce=G.VbrMode,Gt=G.ShortBlock,Y1=G.new_float,pa=G.new_int_n,ws=G.new_short_n,V1=G.assert;function Be(){var M=this,F=128*1024;Be.V9=410,Be.V8=420,Be.V7=430,Be.V6=440,Be.V5=450,Be.V4=460,Be.V3=470,Be.V2=480,Be.V1=490,Be.V0=500,Be.R3MIX=1e3,Be.STANDARD=1001,Be.EXTREME=1002,Be.INSANE=1003,Be.STANDARD_FAST=1004,Be.EXTREME_FAST=1005,Be.MEDIUM=1006,Be.MEDIUM_FAST=1007;var j=16384+F;Be.LAME_MAXMP3BUFFER=j;var q,i0,X,W,v0,d0=new J1,C,s0,b;this.enc=new f,this.setModules=function(a,o,Y,J,h0,y0,f0,x0,F0){q=a,i0=o,X=Y,W=J,v0=h0,C=y0,s0=x0,b=F0,this.enc.setModules(i0,d0,W,C)};function w(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=Y1(f.SBMAX_l),this.bo_s_weight=Y1(f.SBMAX_s)}function B(){this.lowerlimit=0}function e(a,o){this.lowpass=o}var O=4294479419;function L(a){var o;return a.class_id=O,o=a.internal_flags=new he,a.mode=Te.NOT_SET,a.original=1,a.in_samplerate=44100,a.num_channels=2,a.num_samples=-1,a.bWriteVbrTag=!0,a.quality=-1,a.short_blocks=null,o.subblock_gain=-1,a.lowpassfreq=0,a.highpassfreq=0,a.lowpasswidth=-1,a.highpasswidth=-1,a.VBR=ce.vbr_off,a.VBR_q=4,a.ATHcurve=-1,a.VBR_mean_bitrate_kbps=128,a.VBR_min_bitrate_kbps=0,a.VBR_max_bitrate_kbps=0,a.VBR_hard_min=0,o.VBR_min_bitrate=1,o.VBR_max_bitrate=13,a.quant_comp=-1,a.quant_comp_short=-1,a.msfix=-1,o.resample_ratio=1,o.OldValue[0]=180,o.OldValue[1]=180,o.CurrentStep[0]=4,o.CurrentStep[1]=4,o.masking_lower=1,o.nsPsy.attackthre=-1,o.nsPsy.attackthre_s=-1,a.scale=-1,a.athaa_type=-1,a.ATHtype=-1,a.athaa_loudapprox=-1,a.athaa_sensitivity=0,a.useTemporal=null,a.interChRatio=-1,o.mf_samples_to_encode=f.ENCDELAY+f.POSTDELAY,a.encoder_padding=0,o.mf_size=f.ENCDELAY-f.MDCTDELAY,a.findReplayGain=!1,a.decode_on_the_fly=!1,o.decode_on_the_fly=!1,o.findReplayGain=!1,o.findPeakSample=!1,o.RadioGain=0,o.AudiophileGain=0,o.noclipGainChange=0,o.noclipScale=-1,a.preset=0,a.write_id3tag_automatic=!0,0}this.lame_init=function(){var a=new Tt;return L(a),a.lame_allocated_gfp=1,a};function T(a){return a>1?0:a<=0?1:Math.cos(Math.PI/2*a)}this.nearestBitrateFullIndex=function(a){var o=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],Y=0,J=0,h0=0,y0=0;y0=o[16],h0=16,J=o[16],Y=16;for(var f0=0;f0<16;f0++)if(Math.max(a,o[f0+1])!=a){y0=o[f0+1],h0=f0+1,J=o[f0],Y=f0;break}return y0-a>a-J?Y:h0};function r(a,o){var Y=44100;return o>=48e3?Y=48e3:o>=44100?Y=44100:o>=32e3?Y=32e3:o>=24e3?Y=24e3:o>=22050?Y=22050:o>=16e3?Y=16e3:o>=12e3?Y=12e3:o>=11025?Y=11025:o>=8e3&&(Y=8e3),a==-1?Y:(a<=15960&&(Y=44100),a<=15250&&(Y=32e3),a<=11220&&(Y=24e3),a<=9970&&(Y=22050),a<=7230&&(Y=16e3),a<=5420&&(Y=12e3),a<=4510&&(Y=11025),a<=3970&&(Y=8e3),o<Y?o>44100?48e3:o>32e3?44100:o>24e3?32e3:o>22050?24e3:o>16e3?22050:o>12e3?16e3:o>11025?12e3:o>8e3?11025:8e3:Y)}function h(a,o){switch(a){case 44100:return o.version=1,0;case 48e3:return o.version=1,1;case 32e3:return o.version=1,2;case 22050:return o.version=0,0;case 24e3:return o.version=0,1;case 16e3:return o.version=0,2;case 11025:return o.version=0,0;case 12e3:return o.version=0,1;case 8e3:return o.version=0,2;default:return o.version=0,-1}}function x(a,o,Y){Y<16e3&&(o=2);for(var J=te.bitrate_table[o][1],h0=2;h0<=14;h0++)te.bitrate_table[o][h0]>0&&Math.abs(te.bitrate_table[o][h0]-a)<Math.abs(J-a)&&(J=te.bitrate_table[o][h0]);return J}function y(a,o,Y){Y<16e3&&(o=2);for(var J=0;J<=14;J++)if(te.bitrate_table[o][J]>0&&te.bitrate_table[o][J]==a)return J;return-1}function R(a,o){var Y=[new e(8,2e3),new e(16,3700),new e(24,3900),new e(32,5500),new e(40,7e3),new e(48,7500),new e(56,1e4),new e(64,11e3),new e(80,13500),new e(96,15100),new e(112,15600),new e(128,17e3),new e(160,17500),new e(192,18600),new e(224,19400),new e(256,19700),new e(320,20500)],J=M.nearestBitrateFullIndex(o);a.lowerlimit=Y[J].lowpass}function t(a){var o=a.internal_flags,Y=32,J=-1;if(o.lowpass1>0){for(var h0=999,y0=0;y0<=31;y0++){var f0=y0/31;f0>=o.lowpass2&&(Y=Math.min(Y,y0)),o.lowpass1<f0&&f0<o.lowpass2&&(h0=Math.min(h0,y0))}h0==999?o.lowpass1=(Y-.75)/31:o.lowpass1=(h0-.75)/31,o.lowpass2=Y/31}if(o.highpass2>0&&o.highpass2<.9*(.75/31)&&(o.highpass1=0,o.highpass2=0,xs.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),o.highpass2>0){for(var x0=-1,y0=0;y0<=31;y0++){var f0=y0/31;f0<=o.highpass1&&(J=Math.max(J,y0)),o.highpass1<f0&&f0<o.highpass2&&(x0=Math.max(x0,y0))}o.highpass1=J/31,x0==-1?o.highpass2=(J+.75)/31:o.highpass2=(x0+.75)/31}for(var y0=0;y0<32;y0++){var F0,k0,f0=y0/31;o.highpass2>o.highpass1?F0=T((o.highpass2-f0)/(o.highpass2-o.highpass1+1e-20)):F0=1,o.lowpass2>o.lowpass1?k0=T((f0-o.lowpass1)/(o.lowpass2-o.lowpass1+1e-20)):k0=1,o.amp_filter[y0]=F0*k0}}function v(a){var o=a.internal_flags;switch(a.quality){default:case 9:o.psymodel=0,o.noise_shaping=0,o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.use_best_huffman=0,o.full_outer_loop=0;break;case 8:a.quality=7;case 7:o.psymodel=1,o.noise_shaping=0,o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.use_best_huffman=0,o.full_outer_loop=0;break;case 6:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=0,o.full_outer_loop=0;break;case 5:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=0,o.full_outer_loop=0;break;case 4:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 3:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=1,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 2:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=1,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 1:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=2,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 0:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=2,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break}}function _(a){var o=a.internal_flags;a.frameNum=0,a.write_id3tag_automatic&&s0.id3tag_write_v2(a),o.bitrate_stereoMode_Hist=pa([16,4+1]),o.bitrate_blockType_Hist=pa([16,4+1+1]),o.PeakSample=0,a.bWriteVbrTag&&C.InitVbrTag(a)}this.lame_init_params=function(a){var o=a.internal_flags;if(o.Class_ID=0,o.ATH==null&&(o.ATH=new ns),o.PSY==null&&(o.PSY=new w),o.rgdata==null&&(o.rgdata=new ls),o.channels_in=a.num_channels,o.channels_in==1&&(a.mode=Te.MONO),o.channels_out=a.mode==Te.MONO?1:2,o.mode_ext=f.MPG_MD_MS_LR,a.mode==Te.MONO&&(a.force_ms=!1),a.VBR==ce.vbr_off&&a.VBR_mean_bitrate_kbps!=128&&a.brate==0&&(a.brate=a.VBR_mean_bitrate_kbps),a.VBR==ce.vbr_off||a.VBR==ce.vbr_mtrh||a.VBR==ce.vbr_mt||(a.free_format=!1),a.VBR==ce.vbr_off&&a.brate==0&&O1.EQ(a.compression_ratio,0)&&(a.compression_ratio=11.025),a.VBR==ce.vbr_off&&a.compression_ratio>0&&(a.out_samplerate==0&&(a.out_samplerate=map2MP3Frequency(int(.97*a.in_samplerate))),a.brate=0|a.out_samplerate*16*o.channels_out/(1e3*a.compression_ratio),o.samplerate_index=h(a.out_samplerate,a),a.free_format||(a.brate=x(a.brate,a.version,a.out_samplerate))),a.out_samplerate!=0&&(a.out_samplerate<16e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):a.out_samplerate<32e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320))),a.lowpassfreq==0){var Y=16e3;switch(a.VBR){case ce.vbr_off:{var J=new B;R(J,a.brate),Y=J.lowerlimit;break}case ce.vbr_abr:{var J=new B;R(J,a.VBR_mean_bitrate_kbps),Y=J.lowerlimit;break}case ce.vbr_rh:{var h0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=a.VBR_q&&a.VBR_q<=9){var y0=h0[a.VBR_q],f0=h0[a.VBR_q+1],x0=a.VBR_q_frac;Y=linear_int(y0,f0,x0)}else Y=19500;break}default:{var h0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=a.VBR_q&&a.VBR_q<=9){var y0=h0[a.VBR_q],f0=h0[a.VBR_q+1],x0=a.VBR_q_frac;Y=linear_int(y0,f0,x0)}else Y=19500}}a.mode==Te.MONO&&(a.VBR==ce.vbr_off||a.VBR==ce.vbr_abr)&&(Y*=1.5),a.lowpassfreq=Y|0}if(a.out_samplerate==0&&(2*a.lowpassfreq>a.in_samplerate&&(a.lowpassfreq=a.in_samplerate/2),a.out_samplerate=r(a.lowpassfreq|0,a.in_samplerate)),a.lowpassfreq=Math.min(20500,a.lowpassfreq),a.lowpassfreq=Math.min(a.out_samplerate/2,a.lowpassfreq),a.VBR==ce.vbr_off&&(a.compression_ratio=a.out_samplerate*16*o.channels_out/(1e3*a.brate)),a.VBR==ce.vbr_abr&&(a.compression_ratio=a.out_samplerate*16*o.channels_out/(1e3*a.VBR_mean_bitrate_kbps)),a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=!1,o.findPeakSample=!1),o.findReplayGain=a.findReplayGain,o.decode_on_the_fly=a.decode_on_the_fly,o.decode_on_the_fly&&(o.findPeakSample=!0),o.findReplayGain&&q.InitGainAnalysis(o.rgdata,a.out_samplerate)==ft.INIT_GAIN_ANALYSIS_ERROR)return a.internal_flags=null,-6;switch(o.decode_on_the_fly&&!a.decode_only&&(o.hip!=null&&b.hip_decode_exit(o.hip),o.hip=b.hip_decode_init()),o.mode_gr=a.out_samplerate<=24e3?1:2,a.framesize=576*o.mode_gr,a.encoder_delay=f.ENCDELAY,o.resample_ratio=a.in_samplerate/a.out_samplerate,a.VBR){case ce.vbr_mt:case ce.vbr_rh:case ce.vbr_mtrh:{var F0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];a.compression_ratio=F0[a.VBR_q]}break;case ce.vbr_abr:a.compression_ratio=a.out_samplerate*16*o.channels_out/(1e3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=a.out_samplerate*16*o.channels_out/(1e3*a.brate);break}if(a.mode==Te.NOT_SET&&(a.mode=Te.JOINT_STEREO),a.highpassfreq>0?(o.highpass1=2*a.highpassfreq,a.highpasswidth>=0?o.highpass2=2*(a.highpassfreq+a.highpasswidth):o.highpass2=(1+0)*2*a.highpassfreq,o.highpass1/=a.out_samplerate,o.highpass2/=a.out_samplerate):(o.highpass1=0,o.highpass2=0),a.lowpassfreq>0?(o.lowpass2=2*a.lowpassfreq,a.lowpasswidth>=0?(o.lowpass1=2*(a.lowpassfreq-a.lowpasswidth),o.lowpass1<0&&(o.lowpass1=0)):o.lowpass1=(1-0)*2*a.lowpassfreq,o.lowpass1/=a.out_samplerate,o.lowpass2/=a.out_samplerate):(o.lowpass1=0,o.lowpass2=0),t(a),o.samplerate_index=h(a.out_samplerate,a),o.samplerate_index<0)return a.internal_flags=null,-1;if(a.VBR==ce.vbr_off){if(a.free_format)o.bitrate_index=0;else if(a.brate=x(a.brate,a.version,a.out_samplerate),o.bitrate_index=y(a.brate,a.version,a.out_samplerate),o.bitrate_index<=0)return a.internal_flags=null,-1}else o.bitrate_index=1;a.analysis&&(a.bWriteVbrTag=!1),o.pinfo!=null&&(a.bWriteVbrTag=!1),i0.init_bit_stream_w(o);for(var k0=o.samplerate_index+3*a.version+6*(a.out_samplerate<16e3?1:0),b0=0;b0<f.SBMAX_l+1;b0++)o.scalefac_band.l[b0]=W.sfBandIndex[k0].l[b0];for(var b0=0;b0<f.PSFB21+1;b0++){var re=(o.scalefac_band.l[22]-o.scalefac_band.l[21])/f.PSFB21,Ee=o.scalefac_band.l[21]+b0*re;o.scalefac_band.psfb21[b0]=Ee}o.scalefac_band.psfb21[f.PSFB21]=576;for(var b0=0;b0<f.SBMAX_s+1;b0++)o.scalefac_band.s[b0]=W.sfBandIndex[k0].s[b0];for(var b0=0;b0<f.PSFB12+1;b0++){var re=(o.scalefac_band.s[13]-o.scalefac_band.s[12])/f.PSFB12,Ee=o.scalefac_band.s[12]+b0*re;o.scalefac_band.psfb12[b0]=Ee}o.scalefac_band.psfb12[f.PSFB12]=192,a.version==1?o.sideinfo_len=o.channels_out==1?4+17:4+32:o.sideinfo_len=o.channels_out==1?4+9:4+17,a.error_protection&&(o.sideinfo_len+=2),_(a),o.Class_ID=O;{var J0;for(J0=0;J0<19;J0++)o.nsPsy.pefirbuf[J0]=700*o.mode_gr*o.channels_out;a.ATHtype==-1&&(a.ATHtype=4)}switch(V1(a.VBR_q<=9),V1(a.VBR_q>=0),a.VBR){case ce.vbr_mt:a.VBR=ce.vbr_mtrh;case ce.vbr_mtrh:{a.useTemporal==null&&(a.useTemporal=!1),X.apply_preset(a,500-a.VBR_q*10,0),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),a.quality<5&&(a.quality=0),a.quality>5&&(a.quality=5),o.PSY.mask_adjust=a.maskingadjust,o.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?o.sfb21_extra=!1:o.sfb21_extra=a.out_samplerate>44e3,o.iteration_loop=new VBRNewIterationLoop(v0);break}case ce.vbr_rh:{X.apply_preset(a,500-a.VBR_q*10,0),o.PSY.mask_adjust=a.maskingadjust,o.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?o.sfb21_extra=!1:o.sfb21_extra=a.out_samplerate>44e3,a.quality>6&&(a.quality=6),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),o.iteration_loop=new VBROldIterationLoop(v0);break}default:{var de;o.sfb21_extra=!1,a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),de=a.VBR,de==ce.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),X.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=de,o.PSY.mask_adjust=a.maskingadjust,o.PSY.mask_adjust_short=a.maskingadjust_short,de==ce.vbr_off?o.iteration_loop=new us(v0):o.iteration_loop=new ABRIterationLoop(v0);break}}if(V1(a.scale>=0),a.VBR!=ce.vbr_off){if(o.VBR_min_bitrate=1,o.VBR_max_bitrate=14,a.out_samplerate<16e3&&(o.VBR_max_bitrate=8),a.VBR_min_bitrate_kbps!=0&&(a.VBR_min_bitrate_kbps=x(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),o.VBR_min_bitrate=y(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),o.VBR_min_bitrate<0)||a.VBR_max_bitrate_kbps!=0&&(a.VBR_max_bitrate_kbps=x(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),o.VBR_max_bitrate=y(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),o.VBR_max_bitrate<0))return-1;a.VBR_min_bitrate_kbps=te.bitrate_table[a.version][o.VBR_min_bitrate],a.VBR_max_bitrate_kbps=te.bitrate_table[a.version][o.VBR_max_bitrate],a.VBR_mean_bitrate_kbps=Math.min(te.bitrate_table[a.version][o.VBR_max_bitrate],a.VBR_mean_bitrate_kbps),a.VBR_mean_bitrate_kbps=Math.max(te.bitrate_table[a.version][o.VBR_min_bitrate],a.VBR_mean_bitrate_kbps)}return a.tune&&(o.PSY.mask_adjust+=a.tune_value_a,o.PSY.mask_adjust_short+=a.tune_value_a),v(a),V1(a.scale>=0),a.athaa_type<0?o.ATH.useAdjust=3:o.ATH.useAdjust=a.athaa_type,o.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10),a.short_blocks==null&&(a.short_blocks=Gt.short_block_allowed),a.short_blocks==Gt.short_block_allowed&&(a.mode==Te.JOINT_STEREO||a.mode==Te.STEREO)&&(a.short_blocks=Gt.short_block_coupled),a.quant_comp<0&&(a.quant_comp=1),a.quant_comp_short<0&&(a.quant_comp_short=0),a.msfix<0&&(a.msfix=0),a.exp_nspsytune=a.exp_nspsytune|1,a.internal_flags.nsPsy.attackthre<0&&(a.internal_flags.nsPsy.attackthre=J1.NSATTACKTHRE),a.internal_flags.nsPsy.attackthre_s<0&&(a.internal_flags.nsPsy.attackthre_s=J1.NSATTACKTHRE_S),V1(a.scale>=0),a.scale<0&&(a.scale=1),a.ATHtype<0&&(a.ATHtype=4),a.ATHcurve<0&&(a.ATHcurve=4),a.athaa_loudapprox<0&&(a.athaa_loudapprox=2),a.interChRatio<0&&(a.interChRatio=0),a.useTemporal==null&&(a.useTemporal=!0),o.slot_lag=o.frac_SpF=0,a.VBR==ce.vbr_off&&(o.slot_lag=o.frac_SpF=(a.version+1)*72e3*a.brate%a.out_samplerate|0),W.iteration_init(a),d0.psymodel_init(a),V1(a.scale>=0),0};function n(a,o){(a.in_buffer_0==null||a.in_buffer_nsamples<o)&&(a.in_buffer_0=Y1(o),a.in_buffer_1=Y1(o),a.in_buffer_nsamples=o)}this.lame_encode_flush=function(a,o,Y,J){var h0=a.internal_flags,y0=ws([2,1152]),f0=0,x0,F0,k0,b0,re=h0.mf_samples_to_encode-f.POSTDELAY,Ee=c(a);if(h0.mf_samples_to_encode<1)return 0;for(x0=0,a.in_samplerate!=a.out_samplerate&&(re+=16*a.out_samplerate/a.in_samplerate),k0=a.framesize-re%a.framesize,k0<576&&(k0+=a.framesize),a.encoder_padding=k0,b0=(re+k0)/a.framesize;b0>0&&f0>=0;){var J0=Ee-h0.mf_size,de=a.frameNum;J0*=a.in_samplerate,J0/=a.out_samplerate,J0>1152&&(J0=1152),J0<1&&(J0=1),F0=J-x0,J==0&&(F0=0),f0=this.lame_encode_buffer(a,y0[0],y0[1],J0,o,Y,F0),Y+=f0,x0+=f0,b0-=de!=a.frameNum?1:0}if(h0.mf_samples_to_encode=0,f0<0||(F0=J-x0,J==0&&(F0=0),i0.flush_bitstream(a),f0=i0.copy_buffer(h0,o,Y,F0,1),f0<0))return f0;if(Y+=f0,x0+=f0,F0=J-x0,J==0&&(F0=0),a.write_id3tag_automatic){if(s0.id3tag_write_v1(a),f0=i0.copy_buffer(h0,o,Y,F0,0),f0<0)return f0;x0+=f0}return x0},this.lame_encode_buffer=function(a,o,Y,J,h0,y0,f0){var x0=a.internal_flags,F0=[null,null];if(x0.Class_ID!=O)return-3;if(J==0)return 0;n(x0,J),F0[0]=x0.in_buffer_0,F0[1]=x0.in_buffer_1;for(var k0=0;k0<J;k0++)F0[0][k0]=o[k0],x0.channels_in>1&&(F0[1][k0]=Y[k0]);return u(a,F0[0],F0[1],J,h0,y0,f0)};function c(a){var o=f.BLKSIZE+a.framesize-f.FFTOFFSET;return o=Math.max(o,512+a.framesize-32),o}function u(a,o,Y,J,h0,y0,f0){var x0=a.internal_flags,F0=0,k0,b0,re,Ee,J0,de=[null,null],fe=[null,null];if(x0.Class_ID!=O)return-3;if(J==0)return 0;if(J0=i0.copy_buffer(x0,h0,y0,f0,0),J0<0)return J0;if(y0+=J0,F0+=J0,fe[0]=o,fe[1]=Y,O1.NEQ(a.scale,0)&&O1.NEQ(a.scale,1))for(b0=0;b0<J;++b0)fe[0][b0]*=a.scale,x0.channels_out==2&&(fe[1][b0]*=a.scale);if(O1.NEQ(a.scale_left,0)&&O1.NEQ(a.scale_left,1))for(b0=0;b0<J;++b0)fe[0][b0]*=a.scale_left;if(O1.NEQ(a.scale_right,0)&&O1.NEQ(a.scale_right,1))for(b0=0;b0<J;++b0)fe[1][b0]*=a.scale_right;if(a.num_channels==2&&x0.channels_out==1)for(b0=0;b0<J;++b0)fe[0][b0]=.5*(fe[0][b0]+fe[1][b0]),fe[1][b0]=0;Ee=c(a),de[0]=x0.mfbuf[0],de[1]=x0.mfbuf[1];for(var Se=0;J>0;){var Ie=[null,null],w1=0,e1=0;Ie[0]=fe[0],Ie[1]=fe[1];var De=new i;if(V(a,de,Ie,Se,J,De),w1=De.n_in,e1=De.n_out,x0.findReplayGain&&!x0.decode_on_the_fly&&q.AnalyzeSamples(x0.rgdata,de[0],x0.mf_size,de[1],x0.mf_size,e1,x0.channels_out)==ft.GAIN_ANALYSIS_ERROR)return-6;if(J-=w1,Se+=w1,x0.channels_out==2,x0.mf_size+=e1,V1(x0.mf_size<=he.MFSIZE),x0.mf_samples_to_encode<1&&(x0.mf_samples_to_encode=f.ENCDELAY+f.POSTDELAY),x0.mf_samples_to_encode+=e1,x0.mf_size>=Ee){var o1=f0-F0;if(f0==0&&(o1=0),k0=s(a,de[0],de[1],h0,y0,o1),k0<0)return k0;for(y0+=k0,F0+=k0,x0.mf_size-=a.framesize,x0.mf_samples_to_encode-=a.framesize,re=0;re<x0.channels_out;re++)for(b0=0;b0<x0.mf_size;b0++)de[re][b0]=de[re][b0+a.framesize]}}return F0}function s(a,o,Y,J,h0,y0){var f0=M.enc.lame_encode_mp3_frame(a,o,Y,J,h0,y0);return a.frameNum++,f0}function i(){this.n_in=0,this.n_out=0}function l(){this.num_used=0}function S(a,o){return o!=0?S(o,a%o):a}function P(a,o,Y){var J=Math.PI*o;a/=Y,a<0&&(a=0),a>1&&(a=1);var h0=a-.5,y0=.42-.5*Math.cos(2*a*Math.PI)+.08*Math.cos(4*a*Math.PI);return Math.abs(h0)<1e-9?J/Math.PI:y0*Math.sin(Y*J*h0)/(Math.PI*Y*h0)}function k(a,o,Y,J,h0,y0,f0,x0,F0){var k0=a.internal_flags,b0,re=0,Ee,J0=a.out_samplerate/S(a.out_samplerate,a.in_samplerate);J0>he.BPC&&(J0=he.BPC);var de=Math.abs(k0.resample_ratio-Math.floor(.5+k0.resample_ratio))<1e-4?1:0,fe=1/k0.resample_ratio;fe>1&&(fe=1);var Se=31;Se%2==0&&--Se,Se+=de;var Ie=Se+1;if(k0.fill_buffer_resample_init==0){for(k0.inbuf_old[0]=Y1(Ie),k0.inbuf_old[1]=Y1(Ie),b0=0;b0<=2*J0;++b0)k0.blackfilt[b0]=Y1(Ie);for(k0.itime[0]=0,k0.itime[1]=0,re=0;re<=2*J0;re++){var w1=0,e1=(re-J0)/(2*J0);for(b0=0;b0<=Se;b0++)w1+=k0.blackfilt[re][b0]=P(b0-e1,fe,Se);for(b0=0;b0<=Se;b0++)k0.blackfilt[re][b0]/=w1}k0.fill_buffer_resample_init=1}var De=k0.inbuf_old[F0];for(Ee=0;Ee<J;Ee++){var o1,j1;if(o1=Ee*k0.resample_ratio,re=0|Math.floor(o1-k0.itime[F0]),Se+re-Se/2>=f0)break;var e1=o1-k0.itime[F0]-(re+.5*(Se%2));j1=0|Math.floor(e1*2*J0+J0+.5);var N1=0;for(b0=0;b0<=Se;++b0){var je=b0+re-Se/2,G1;G1=je<0?De[Ie+je]:h0[y0+je],N1+=G1*k0.blackfilt[j1][b0]}o[Y+Ee]=N1}if(x0.num_used=Math.min(f0,Se+re-Se/2),k0.itime[F0]+=x0.num_used-Ee*k0.resample_ratio,x0.num_used>=Ie)for(b0=0;b0<Ie;b0++)De[b0]=h0[y0+x0.num_used+b0-Ie];else{var E1=Ie-x0.num_used;for(b0=0;b0<E1;++b0)De[b0]=De[b0+x0.num_used];for(re=0;b0<Ie;++b0,++re)De[b0]=h0[y0+re];V1(re==x0.num_used)}return Ee}function V(a,o,Y,J,h0,y0){var f0=a.internal_flags;if(f0.resample_ratio<.9999||f0.resample_ratio>1.0001)for(var x0=0;x0<f0.channels_out;x0++){var F0=new l;y0.n_out=k(a,o[x0],f0.mf_size,a.framesize,Y[x0],J,h0,F0,x0),y0.n_in=F0.num_used}else{y0.n_out=Math.min(a.framesize,h0),y0.n_in=y0.n_out;for(var k0=0;k0<y0.n_out;++k0)o[0][f0.mf_size+k0]=Y[0][J+k0],f0.channels_out==2&&(o[1][f0.mf_size+k0]=Y[1][J+k0])}}}var ys=Be,x1=G.VbrMode;function Ss(){function M(C,s0,b,w,B,e,O,L,T,r,h,x,y,R,t){this.vbr_q=C,this.quant_comp=s0,this.quant_comp_s=b,this.expY=w,this.st_lrm=B,this.st_s=e,this.masking_adj=O,this.masking_adj_short=L,this.ath_lower=T,this.ath_curve=r,this.ath_sensitivity=h,this.interch=x,this.safejoint=y,this.sfb21mod=R,this.msfix=t}function F(C,s0,b,w,B,e,O,L,T,r,h,x,y,R){this.quant_comp=s0,this.quant_comp_s=b,this.safejoint=w,this.nsmsfix=B,this.st_lrm=e,this.st_s=O,this.nsbass=L,this.scale=T,this.masking_adj=r,this.ath_lower=h,this.ath_curve=x,this.interch=y,this.sfscale=R}var j;this.setModules=function(C){j=C};var q=[new M(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new M(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new M(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new M(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new M(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new M(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new M(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new M(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new M(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new M(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new M(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],i0=[new M(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new M(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new M(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new M(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new M(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new M(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new M(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new M(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new M(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new M(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new M(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function X(C,s0,b){var w=C.VBR==x1.vbr_rh?q:i0,B=C.VBR_q_frac,e=w[s0],O=w[s0+1],L=e;e.st_lrm=e.st_lrm+B*(O.st_lrm-e.st_lrm),e.st_s=e.st_s+B*(O.st_s-e.st_s),e.masking_adj=e.masking_adj+B*(O.masking_adj-e.masking_adj),e.masking_adj_short=e.masking_adj_short+B*(O.masking_adj_short-e.masking_adj_short),e.ath_lower=e.ath_lower+B*(O.ath_lower-e.ath_lower),e.ath_curve=e.ath_curve+B*(O.ath_curve-e.ath_curve),e.ath_sensitivity=e.ath_sensitivity+B*(O.ath_sensitivity-e.ath_sensitivity),e.interch=e.interch+B*(O.interch-e.interch),e.msfix=e.msfix+B*(O.msfix-e.msfix),d0(C,L.vbr_q),b!=0?C.quant_comp=L.quant_comp:Math.abs(C.quant_comp- -1)>0||(C.quant_comp=L.quant_comp),b!=0?C.quant_comp_short=L.quant_comp_s:Math.abs(C.quant_comp_short- -1)>0||(C.quant_comp_short=L.quant_comp_s),L.expY!=0&&(C.experimentalY=L.expY!=0),b!=0?C.internal_flags.nsPsy.attackthre=L.st_lrm:Math.abs(C.internal_flags.nsPsy.attackthre- -1)>0||(C.internal_flags.nsPsy.attackthre=L.st_lrm),b!=0?C.internal_flags.nsPsy.attackthre_s=L.st_s:Math.abs(C.internal_flags.nsPsy.attackthre_s- -1)>0||(C.internal_flags.nsPsy.attackthre_s=L.st_s),b!=0?C.maskingadjust=L.masking_adj:Math.abs(C.maskingadjust-0)>0||(C.maskingadjust=L.masking_adj),b!=0?C.maskingadjust_short=L.masking_adj_short:Math.abs(C.maskingadjust_short-0)>0||(C.maskingadjust_short=L.masking_adj_short),b!=0?C.ATHlower=-L.ath_lower/10:Math.abs(-C.ATHlower*10-0)>0||(C.ATHlower=-L.ath_lower/10),b!=0?C.ATHcurve=L.ath_curve:Math.abs(C.ATHcurve- -1)>0||(C.ATHcurve=L.ath_curve),b!=0?C.athaa_sensitivity=L.ath_sensitivity:Math.abs(C.athaa_sensitivity- -1)>0||(C.athaa_sensitivity=L.ath_sensitivity),L.interch>0&&(b!=0?C.interChRatio=L.interch:Math.abs(C.interChRatio- -1)>0||(C.interChRatio=L.interch)),L.safejoint>0&&(C.exp_nspsytune=C.exp_nspsytune|L.safejoint),L.sfb21mod>0&&(C.exp_nspsytune=C.exp_nspsytune|L.sfb21mod<<20),b!=0?C.msfix=L.msfix:Math.abs(C.msfix- -1)>0||(C.msfix=L.msfix),b==0&&(C.VBR_q=s0,C.VBR_q_frac=B)}var W=[new F(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new F(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new F(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new F(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new F(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new F(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new F(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new F(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new F(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new F(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new F(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new F(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new F(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new F(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new F(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new F(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new F(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function v0(C,s0,b){var w=s0,B=j.nearestBitrateFullIndex(s0);if(C.VBR=x1.vbr_abr,C.VBR_mean_bitrate_kbps=w,C.VBR_mean_bitrate_kbps=Math.min(C.VBR_mean_bitrate_kbps,320),C.VBR_mean_bitrate_kbps=Math.max(C.VBR_mean_bitrate_kbps,8),C.brate=C.VBR_mean_bitrate_kbps,C.VBR_mean_bitrate_kbps>320&&(C.disable_reservoir=!0),W[B].safejoint>0&&(C.exp_nspsytune=C.exp_nspsytune|2),W[B].sfscale>0&&(C.internal_flags.noise_shaping=2),Math.abs(W[B].nsbass)>0){var e=int(W[B].nsbass*4);e<0&&(e+=64),C.exp_nspsytune=C.exp_nspsytune|e<<2}return b!=0?C.quant_comp=W[B].quant_comp:Math.abs(C.quant_comp- -1)>0||(C.quant_comp=W[B].quant_comp),b!=0?C.quant_comp_short=W[B].quant_comp_s:Math.abs(C.quant_comp_short- -1)>0||(C.quant_comp_short=W[B].quant_comp_s),b!=0?C.msfix=W[B].nsmsfix:Math.abs(C.msfix- -1)>0||(C.msfix=W[B].nsmsfix),b!=0?C.internal_flags.nsPsy.attackthre=W[B].st_lrm:Math.abs(C.internal_flags.nsPsy.attackthre- -1)>0||(C.internal_flags.nsPsy.attackthre=W[B].st_lrm),b!=0?C.internal_flags.nsPsy.attackthre_s=W[B].st_s:Math.abs(C.internal_flags.nsPsy.attackthre_s- -1)>0||(C.internal_flags.nsPsy.attackthre_s=W[B].st_s),b!=0?C.scale=W[B].scale:Math.abs(C.scale- -1)>0||(C.scale=W[B].scale),b!=0?C.maskingadjust=W[B].masking_adj:Math.abs(C.maskingadjust-0)>0||(C.maskingadjust=W[B].masking_adj),W[B].masking_adj>0?b!=0?C.maskingadjust_short=W[B].masking_adj*.9:Math.abs(C.maskingadjust_short-0)>0||(C.maskingadjust_short=W[B].masking_adj*.9):b!=0?C.maskingadjust_short=W[B].masking_adj*1.1:Math.abs(C.maskingadjust_short-0)>0||(C.maskingadjust_short=W[B].masking_adj*1.1),b!=0?C.ATHlower=-W[B].ath_lower/10:Math.abs(-C.ATHlower*10-0)>0||(C.ATHlower=-W[B].ath_lower/10),b!=0?C.ATHcurve=W[B].ath_curve:Math.abs(C.ATHcurve- -1)>0||(C.ATHcurve=W[B].ath_curve),b!=0?C.interChRatio=W[B].interch:Math.abs(C.interChRatio- -1)>0||(C.interChRatio=W[B].interch),s0}this.apply_preset=function(C,s0,b){switch(s0){case _e.R3MIX:{s0=_e.V3,C.VBR=x1.vbr_mtrh;break}case _e.MEDIUM:{s0=_e.V4,C.VBR=x1.vbr_rh;break}case _e.MEDIUM_FAST:{s0=_e.V4,C.VBR=x1.vbr_mtrh;break}case _e.STANDARD:{s0=_e.V2,C.VBR=x1.vbr_rh;break}case _e.STANDARD_FAST:{s0=_e.V2,C.VBR=x1.vbr_mtrh;break}case _e.EXTREME:{s0=_e.V0,C.VBR=x1.vbr_rh;break}case _e.EXTREME_FAST:{s0=_e.V0,C.VBR=x1.vbr_mtrh;break}case _e.INSANE:return s0=320,C.preset=s0,v0(C,s0,b),C.VBR=x1.vbr_off,s0}switch(C.preset=s0,s0){case _e.V9:return X(C,9,b),s0;case _e.V8:return X(C,8,b),s0;case _e.V7:return X(C,7,b),s0;case _e.V6:return X(C,6,b),s0;case _e.V5:return X(C,5,b),s0;case _e.V4:return X(C,4,b),s0;case _e.V3:return X(C,3,b),s0;case _e.V2:return X(C,2,b),s0;case _e.V1:return X(C,1,b),s0;case _e.V0:return X(C,0,b),s0}return 8<=s0&&s0<=320?v0(C,s0,b):(C.preset=0,s0)};function d0(C,s0){var b=0;return 0>s0&&(b=-1,s0=0),9<s0&&(b=-1,s0=9),C.VBR_q=s0,C.VBR_q_frac=0,b}}var Ms=Ss;function As(){this.setModules=function(M,F){}}var Rs=As;function Bs(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var zt=Bs,ba=G.new_float,Ts=G.new_int;function Es(){this.global_gain=0,this.sfb_count1=0,this.step=Ts(39),this.noise=ba(39),this.noise_log=ba(39)}var ks=Es,g1=G.System,xa=G.VbrMode,Ut=G.Util,tt=G.Arrays,vt=G.new_float,ht=G.assert;function Cs(){var M;this.rv=null;var F;this.qupvt=null;var j,q=new Rs,i0;this.setModules=function(T,r,h,x){M=T,F=r,this.rv=r,j=h,this.qupvt=h,i0=x,q.setModules(j,i0)},this.ms_convert=function(T,r){for(var h=0;h<576;++h){var x=T.tt[r][0].xr[h],y=T.tt[r][1].xr[h];T.tt[r][0].xr[h]=(x+y)*(Ut.SQRT2*.5),T.tt[r][1].xr[h]=(x-y)*(Ut.SQRT2*.5)}};function X(T,r,h,x){x=0;for(var y=0;y<=h;++y){var R=Math.abs(T.xr[y]);x+=R,r[y]=Math.sqrt(R*Math.sqrt(R)),r[y]>T.xrpow_max&&(T.xrpow_max=r[y])}return x}this.init_xrpow=function(T,r,h){var x=0,y=0|r.max_nonzero_coeff;if(r.xrpow_max=0,tt.fill(h,y,576,0),x=X(r,h,y,x),x>1e-20){var R=0;T.substep_shaping&2&&(R=1);for(var t=0;t<r.psymax;t++)T.pseudohalf[t]=R;return!0}return tt.fill(r.l3_enc,0,576,0),!1};function W(T,r){var h=T.ATH,x=r.xr;if(r.block_type!=f.SHORT_TYPE)for(var y=!1,R=f.PSFB21-1;R>=0&&!y;R--){var t=T.scalefac_band.psfb21[R],v=T.scalefac_band.psfb21[R+1],_=j.athAdjust(h.adjust,h.psfb21[R],h.floor);T.nsPsy.longfact[21]>1e-12&&(_*=T.nsPsy.longfact[21]);for(var n=v-1;n>=t;n--)if(Math.abs(x[n])<_)x[n]=0;else{y=!0;break}}else for(var c=0;c<3;c++)for(var y=!1,R=f.PSFB12-1;R>=0&&!y;R--){var t=T.scalefac_band.s[12]*3+(T.scalefac_band.s[13]-T.scalefac_band.s[12])*c+(T.scalefac_band.psfb12[R]-T.scalefac_band.psfb12[0]),v=t+(T.scalefac_band.psfb12[R+1]-T.scalefac_band.psfb12[R]),u=j.athAdjust(h.adjust,h.psfb12[R],h.floor);T.nsPsy.shortfact[12]>1e-12&&(u*=T.nsPsy.shortfact[12]);for(var n=v-1;n>=t;n--)if(Math.abs(x[n])<u)x[n]=0;else{y=!0;break}}}this.init_outer_loop=function(T,r){r.part2_3_length=0,r.big_values=0,r.count1=0,r.global_gain=210,r.scalefac_compress=0,r.table_select[0]=0,r.table_select[1]=0,r.table_select[2]=0,r.subblock_gain[0]=0,r.subblock_gain[1]=0,r.subblock_gain[2]=0,r.subblock_gain[3]=0,r.region0_count=0,r.region1_count=0,r.preflag=0,r.scalefac_scale=0,r.count1table_select=0,r.part2_length=0,r.sfb_lmax=f.SBPSY_l,r.sfb_smin=f.SBPSY_s,r.psy_lmax=T.sfb21_extra?f.SBMAX_l:f.SBPSY_l,r.psymax=r.psy_lmax,r.sfbmax=r.sfb_lmax,r.sfbdivide=11;for(var h=0;h<f.SBMAX_l;h++)r.width[h]=T.scalefac_band.l[h+1]-T.scalefac_band.l[h],r.window[h]=3;if(r.block_type==f.SHORT_TYPE){var x=vt(576);r.sfb_smin=0,r.sfb_lmax=0,r.mixed_block_flag!=0&&(r.sfb_smin=3,r.sfb_lmax=T.mode_gr*2+4),r.psymax=r.sfb_lmax+3*((T.sfb21_extra?f.SBMAX_s:f.SBPSY_s)-r.sfb_smin),r.sfbmax=r.sfb_lmax+3*(f.SBPSY_s-r.sfb_smin),r.sfbdivide=r.sfbmax-18,r.psy_lmax=r.sfb_lmax;var y=T.scalefac_band.l[r.sfb_lmax];g1.arraycopy(r.xr,0,x,0,576);for(var h=r.sfb_smin;h<f.SBMAX_s;h++)for(var R=T.scalefac_band.s[h],t=T.scalefac_band.s[h+1],v=0;v<3;v++)for(var _=R;_<t;_++)r.xr[y++]=x[3*_+v];for(var n=r.sfb_lmax,h=r.sfb_smin;h<f.SBMAX_s;h++)r.width[n]=r.width[n+1]=r.width[n+2]=T.scalefac_band.s[h+1]-T.scalefac_band.s[h],r.window[n]=0,r.window[n+1]=1,r.window[n+2]=2,n+=3}r.count1bits=0,r.sfb_partition_table=j.nr_of_sfb_block[0][0],r.slen[0]=0,r.slen[1]=0,r.slen[2]=0,r.slen[3]=0,r.max_nonzero_coeff=575,tt.fill(r.scalefac,0),W(T,r)};function v0(T){this.ordinal=T}v0.BINSEARCH_NONE=new v0(0),v0.BINSEARCH_UP=new v0(1),v0.BINSEARCH_DOWN=new v0(2);function d0(T,r,h,x,y){var R,t=T.CurrentStep[x],v=!1,_=T.OldValue[x],n=v0.BINSEARCH_NONE;for(r.global_gain=_,h-=r.part2_length;;){var c;if(R=i0.count_bits(T,y,r,null),t==1||R==h)break;R>h?(n==v0.BINSEARCH_DOWN&&(v=!0),v&&(t/=2),n=v0.BINSEARCH_UP,c=t):(n==v0.BINSEARCH_UP&&(v=!0),v&&(t/=2),n=v0.BINSEARCH_DOWN,c=-t),r.global_gain+=c,r.global_gain<0&&(r.global_gain=0,v=!0),r.global_gain>255&&(r.global_gain=255,v=!0)}for(ht(r.global_gain>=0),ht(r.global_gain<256);R>h&&r.global_gain<255;)r.global_gain++,R=i0.count_bits(T,y,r,null);return T.CurrentStep[x]=_-r.global_gain>=4?4:2,T.OldValue[x]=r.global_gain,r.part2_3_length=R,R}this.trancate_smallspectrums=function(T,r,h,x){var y=vt(m1.SFBMAX);if(!(!(T.substep_shaping&4)&&r.block_type==f.SHORT_TYPE||T.substep_shaping&128)){j.calc_noise(r,h,y,new zt,null);for(var t=0;t<576;t++){var R=0;r.l3_enc[t]!=0&&(R=Math.abs(r.xr[t])),x[t]=R}var t=0,v=8;r.block_type==f.SHORT_TYPE&&(v=6);do{var _,n,c,u,s=r.width[v];if(t+=s,!(y[v]>=1)&&(tt.sort(x,t-s,s),!T1.EQ(x[t-1],0))){_=(1-y[v])*h[v],n=0,u=0;do{var i;for(c=1;u+c<s&&!T1.NEQ(x[u+t-s],x[u+t+c-s]);c++);if(i=x[u+t-s]*x[u+t-s]*c,_<i){u!=0&&(n=x[u+t-s-1]);break}_-=i,u+=c}while(u<s);if(!T1.EQ(n,0))do Math.abs(r.xr[t-s])<=n&&(r.l3_enc[t-s]=0);while(--s>0)}}while(++v<r.psymax);r.part2_3_length=i0.noquant_count_bits(T,r,null)}};function C(T){for(var r=0;r<T.sfbmax;r++)if(T.scalefac[r]+T.subblock_gain[T.window[r]]==0)return!1;return!0}function s0(T){return Ut.FAST_LOG10(.368+.632*T*T*T)}function b(T,r){for(var h=1e-37,x=0;x<r.psymax;x++)h+=s0(T[x]);return Math.max(1e-20,h)}function w(T,r,h,x,y){var R;switch(T){default:case 9:{r.over_count>0?(R=h.over_SSD<=r.over_SSD,h.over_SSD==r.over_SSD&&(R=h.bits<r.bits)):R=h.max_noise<0&&h.max_noise*10+h.bits<=r.max_noise*10+r.bits;break}case 0:R=h.over_count<r.over_count||h.over_count==r.over_count&&h.over_noise<r.over_noise||h.over_count==r.over_count&&T1.EQ(h.over_noise,r.over_noise)&&h.tot_noise<r.tot_noise;break;case 8:h.max_noise=b(y,x);case 1:R=h.max_noise<r.max_noise;break;case 2:R=h.tot_noise<r.tot_noise;break;case 3:R=h.tot_noise<r.tot_noise&&h.max_noise<r.max_noise;break;case 4:R=h.max_noise<=0&&r.max_noise>.2||h.max_noise<=0&&r.max_noise<0&&r.max_noise>h.max_noise-.2&&h.tot_noise<r.tot_noise||h.max_noise<=0&&r.max_noise>0&&r.max_noise>h.max_noise-.2&&h.tot_noise<r.tot_noise+r.over_noise||h.max_noise>0&&r.max_noise>-.05&&r.max_noise>h.max_noise-.1&&h.tot_noise+h.over_noise<r.tot_noise+r.over_noise||h.max_noise>0&&r.max_noise>-.1&&r.max_noise>h.max_noise-.15&&h.tot_noise+h.over_noise+h.over_noise<r.tot_noise+r.over_noise+r.over_noise;break;case 5:R=h.over_noise<r.over_noise||T1.EQ(h.over_noise,r.over_noise)&&h.tot_noise<r.tot_noise;break;case 6:R=h.over_noise<r.over_noise||T1.EQ(h.over_noise,r.over_noise)&&(h.max_noise<r.max_noise||T1.EQ(h.max_noise,r.max_noise)&&h.tot_noise<=r.tot_noise);break;case 7:R=h.over_count<r.over_count||h.over_noise<r.over_noise;break}return r.over_count==0&&(R=R&&h.bits<r.bits),R}function B(T,r,h,x,y){var R=T.internal_flags,t;r.scalefac_scale==0?t=1.2968395546510096:t=1.6817928305074292;for(var v=0,_=0;_<r.sfbmax;_++)v<h[_]&&(v=h[_]);var n=R.noise_shaping_amp;switch(n==3&&(y?n=2:n=1),n){case 2:break;case 1:v>1?v=Math.pow(v,.5):v*=.95;break;case 0:default:v>1?v=1:v*=.95;break}for(var c=0,_=0;_<r.sfbmax;_++){var u=r.width[_],s;if(c+=u,!(h[_]<v)){if(R.substep_shaping&2&&(R.pseudohalf[_]=R.pseudohalf[_]==0?1:0,R.pseudohalf[_]==0&&R.noise_shaping_amp==2))return;for(r.scalefac[_]++,s=-u;s<0;s++)x[c+s]*=t,x[c+s]>r.xrpow_max&&(r.xrpow_max=x[c+s]);if(R.noise_shaping_amp==2)return}}}function e(T,r){for(var h=1.2968395546510096,x=0,y=0;y<T.sfbmax;y++){var R=T.width[y],t=T.scalefac[y];if(T.preflag!=0&&(t+=j.pretab[y]),x+=R,t&1){t++;for(var v=-R;v<0;v++)r[x+v]*=h,r[x+v]>T.xrpow_max&&(T.xrpow_max=r[x+v])}T.scalefac[y]=t>>1}T.preflag=0,T.scalefac_scale=1}function O(T,r,h){var x,y=r.scalefac;for(x=0;x<r.sfb_lmax;x++)if(y[x]>=16)return!0;for(var R=0;R<3;R++){var t=0,v=0;for(x=r.sfb_lmax+R;x<r.sfbdivide;x+=3)t<y[x]&&(t=y[x]);for(;x<r.sfbmax;x+=3)v<y[x]&&(v=y[x]);if(!(t<16&&v<8)){if(r.subblock_gain[R]>=7)return!0;r.subblock_gain[R]++;var _=T.scalefac_band.l[r.sfb_lmax];for(x=r.sfb_lmax+R;x<r.sfbmax;x+=3){var n,c=r.width[x],u=y[x];if(u=u-(4>>r.scalefac_scale),u>=0){y[x]=u,_+=c*3;continue}y[x]=0;{var s=210+(u<<r.scalefac_scale+1);n=j.IPOW20(s)}_+=c*(R+1);for(var i=-c;i<0;i++)h[_+i]*=n,h[_+i]>r.xrpow_max&&(r.xrpow_max=h[_+i]);_+=c*(3-R-1)}{var n=j.IPOW20(202);_+=r.width[x]*(R+1);for(var i=-r.width[x];i<0;i++)h[_+i]*=n,h[_+i]>r.xrpow_max&&(r.xrpow_max=h[_+i])}}}return!1}function L(T,r,h,x,y){var R=T.internal_flags;B(T,r,h,x,y);var t=C(r);return t?!1:(R.mode_gr==2?t=i0.scale_bitcount(r):t=i0.scale_bitcount_lsf(R,r),t?(R.noise_shaping>1&&(tt.fill(R.pseudohalf,0),r.scalefac_scale==0?(e(r,x),t=!1):r.block_type==f.SHORT_TYPE&&R.subblock_gain>0&&(t=O(R,r,x)||C(r))),t||(R.mode_gr==2?t=i0.scale_bitcount(r):t=i0.scale_bitcount_lsf(R,r)),!t):!0)}this.outer_loop=function(T,r,h,x,y,R){var t=T.internal_flags,v=new F1,_=vt(576),n=vt(m1.SFBMAX),c=new zt,u,s=new ks,i=9999999,l=!1,S=!1,P=0;if(d0(t,r,R,y,x),t.noise_shaping==0)return 100;j.calc_noise(r,h,n,c,s),c.bits=r.part2_3_length,v.assign(r);var k=0;for(g1.arraycopy(x,0,_,0,576);!l;){do{var V=new zt,a,o=255;if(t.substep_shaping&2?a=20:a=3,t.sfb21_extra&&(n[v.sfbmax]>1||v.block_type==f.SHORT_TYPE&&(n[v.sfbmax+1]>1||n[v.sfbmax+2]>1))||!L(T,v,n,x,S))break;v.scalefac_scale!=0&&(o=254);var Y=R-v.part2_length;if(Y<=0)break;for(;(v.part2_3_length=i0.count_bits(t,x,v,s))>Y&&v.global_gain<=o;)v.global_gain++;if(v.global_gain>o)break;if(c.over_count==0){for(;(v.part2_3_length=i0.count_bits(t,x,v,s))>i&&v.global_gain<=o;)v.global_gain++;if(v.global_gain>o)break}if(j.calc_noise(v,h,n,V,s),V.bits=v.part2_3_length,r.block_type!=f.SHORT_TYPE?u=T.quant_comp:u=T.quant_comp_short,u=w(u,c,V,v,n)?1:0,u!=0)i=r.part2_3_length,c=V,r.assign(v),k=0,g1.arraycopy(x,0,_,0,576);else if(t.full_outer_loop==0&&(++k>a&&c.over_count==0||t.noise_shaping_amp==3&&S&&k>30||t.noise_shaping_amp==3&&S&&v.global_gain-P>15))break}while(v.global_gain+v.scalefac_scale<255);t.noise_shaping_amp==3?S?l=!0:(v.assign(r),g1.arraycopy(_,0,x,0,576),k=0,P=v.global_gain,S=!0):l=!0}return ht(r.global_gain+r.scalefac_scale<=255),T.VBR==xa.vbr_rh||T.VBR==xa.vbr_mtrh?g1.arraycopy(_,0,x,0,576):t.substep_shaping&1&&trancate_smallspectrums(t,r,h,x),c.over_count},this.iteration_finish_one=function(T,r,h){var x=T.l3_side,y=x.tt[r][h];i0.best_scalefac_store(T,r,h,x),T.use_best_huffman==1&&i0.best_huffman_divide(T,y),F.ResvAdjust(T,y)},this.VBR_encode_granule=function(T,r,h,x,y,R,t){var v=T.internal_flags,_=new F1,n=vt(576),c=t,u=t+1,s=(t+R)/2,i,l,S=0,P=v.sfb21_extra;ht(c<=LameInternalFlags.MAX_BITS_PER_CHANNEL),tt.fill(_.l3_enc,0);do s>c-42?v.sfb21_extra=!1:v.sfb21_extra=P,l=outer_loop(T,r,h,x,y,s),l<=0?(S=1,u=r.part2_3_length,_.assign(r),g1.arraycopy(x,0,n,0,576),t=u-32,i=t-R,s=(t+R)/2):(R=s+32,i=t-R,s=(t+R)/2,S!=0&&(S=2,r.assign(_),g1.arraycopy(n,0,x,0,576)));while(i>12);v.sfb21_extra=P,S==2&&g1.arraycopy(_.l3_enc,0,r.l3_enc,0,576),ht(r.part2_3_length<=c)},this.get_framebits=function(T,r){var h=T.internal_flags;h.bitrate_index=h.VBR_min_bitrate;var x=M.getframebits(T);h.bitrate_index=1,x=M.getframebits(T);for(var y=1;y<=h.VBR_max_bitrate;y++){h.bitrate_index=y;var R=new MeanBits(x);r[y]=F.ResvFrameBegin(T,R),x=R.bits}},this.VBR_old_prepare=function(T,r,h,x,y,R,t,v,_){var n=T.internal_flags,c,u=0,s=1,i=0;n.bitrate_index=n.VBR_max_bitrate;var l=F.ResvFrameBegin(T,new MeanBits(0))/n.mode_gr;get_framebits(T,R);for(var S=0;S<n.mode_gr;S++){var P=j.on_pe(T,r,v[S],l,S,0);n.mode_ext==f.MPG_MD_MS_LR&&(ms_convert(n.l3_side,S),j.reduce_side(v[S],h[S],l,P));for(var k=0;k<n.channels_out;++k){var V=n.l3_side.tt[S][k];V.block_type!=f.SHORT_TYPE?(u=1.28/(1+Math.exp(3.5-r[S][k]/300))-.05,c=n.PSY.mask_adjust-u):(u=2.56/(1+Math.exp(3.5-r[S][k]/300))-.14,c=n.PSY.mask_adjust_short-u),n.masking_lower=Math.pow(10,c*.1),init_outer_loop(n,V),_[S][k]=j.calc_xmin(T,x[S][k],V,y[S][k]),_[S][k]!=0&&(s=0),t[S][k]=126,i+=v[S][k]}}for(var S=0;S<n.mode_gr;S++)for(var k=0;k<n.channels_out;k++)i>R[n.VBR_max_bitrate]&&(v[S][k]*=R[n.VBR_max_bitrate],v[S][k]/=i),t[S][k]>v[S][k]&&(t[S][k]=v[S][k]);return s},this.bitpressure_strategy=function(T,r,h,x){for(var y=0;y<T.mode_gr;y++)for(var R=0;R<T.channels_out;R++){for(var t=T.l3_side.tt[y][R],v=r[y][R],_=0,n=0;n<t.psy_lmax;n++)v[_++]*=1+.029*n*n/f.SBMAX_l/f.SBMAX_l;if(t.block_type==f.SHORT_TYPE)for(var n=t.sfb_smin;n<f.SBMAX_s;n++)v[_++]*=1+.029*n*n/f.SBMAX_s/f.SBMAX_s,v[_++]*=1+.029*n*n/f.SBMAX_s/f.SBMAX_s,v[_++]*=1+.029*n*n/f.SBMAX_s/f.SBMAX_s;x[y][R]=0|Math.max(h[y][R],.9*x[y][R])}},this.VBR_new_prepare=function(T,r,h,x,y,R){var t=T.internal_flags,v=1,_=0,n=0,c;if(T.free_format){t.bitrate_index=0;var u=new MeanBits(_);c=F.ResvFrameBegin(T,u),_=u.bits,y[0]=c}else{t.bitrate_index=t.VBR_max_bitrate;var u=new MeanBits(_);F.ResvFrameBegin(T,u),_=u.bits,get_framebits(T,y),c=y[t.VBR_max_bitrate]}for(var s=0;s<t.mode_gr;s++){j.on_pe(T,r,R[s],_,s,0),t.mode_ext==f.MPG_MD_MS_LR&&ms_convert(t.l3_side,s);for(var i=0;i<t.channels_out;++i){var l=t.l3_side.tt[s][i];t.masking_lower=Math.pow(10,t.PSY.mask_adjust*.1),init_outer_loop(t,l),j.calc_xmin(T,h[s][i],l,x[s][i])!=0&&(v=0),n+=R[s][i]}}for(var s=0;s<t.mode_gr;s++)for(var i=0;i<t.channels_out;i++)n>c&&(R[s][i]*=c,R[s][i]/=n);return v},this.calc_target_bits=function(T,r,h,x,y,R){var t=T.internal_flags,v=t.l3_side,_,n,c,u,s=0;t.bitrate_index=t.VBR_max_bitrate;var i=new MeanBits(s);for(R[0]=F.ResvFrameBegin(T,i),s=i.bits,t.bitrate_index=1,s=M.getframebits(T)-t.sideinfo_len*8,y[0]=s/(t.mode_gr*t.channels_out),s=T.VBR_mean_bitrate_kbps*T.framesize*1e3,t.substep_shaping&1&&(s*=1.09),s/=T.out_samplerate,s-=t.sideinfo_len*8,s/=t.mode_gr*t.channels_out,_=.93+.07*(11-T.compression_ratio)/(11-5.5),_<.9&&(_=.9),_>1&&(_=1),n=0;n<t.mode_gr;n++){var l=0;for(c=0;c<t.channels_out;c++){if(x[n][c]=int(_*s),r[n][c]>700){var S=int((r[n][c]-700)/1.4),P=v.tt[n][c];x[n][c]=int(_*s),P.block_type==f.SHORT_TYPE&&S<s/2&&(S=s/2),S>s*3/2?S=s*3/2:S<0&&(S=0),x[n][c]+=S}x[n][c]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(x[n][c]=LameInternalFlags.MAX_BITS_PER_CHANNEL),l+=x[n][c]}if(l>LameInternalFlags.MAX_BITS_PER_GRANULE)for(c=0;c<t.channels_out;++c)x[n][c]*=LameInternalFlags.MAX_BITS_PER_GRANULE,x[n][c]/=l}if(t.mode_ext==f.MPG_MD_MS_LR)for(n=0;n<t.mode_gr;n++)j.reduce_side(x[n],h[n],s*t.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(u=0,n=0;n<t.mode_gr;n++)for(c=0;c<t.channels_out;c++)x[n][c]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(x[n][c]=LameInternalFlags.MAX_BITS_PER_CHANNEL),u+=x[n][c];if(u>R[0])for(n=0;n<t.mode_gr;n++)for(c=0;c<t.channels_out;c++)x[n][c]*=R[0],x[n][c]/=u}}var Is=Cs,wa=G.assert;function Ls(){var M;this.setModules=function(F){M=F},this.ResvFrameBegin=function(F,j){var q=F.internal_flags,i0,X=q.l3_side,W=M.getframebits(F);j.bits=(W-q.sideinfo_len*8)/q.mode_gr;var v0=8*256*q.mode_gr-8;F.brate>320?i0=8*int(F.brate*1e3/(F.out_samplerate/1152)/8+.5):(i0=8*1440,F.strict_ISO&&(i0=8*int(32e4/(F.out_samplerate/1152)/8+.5))),q.ResvMax=i0-W,q.ResvMax>v0&&(q.ResvMax=v0),(q.ResvMax<0||F.disable_reservoir)&&(q.ResvMax=0);var d0=j.bits*q.mode_gr+Math.min(q.ResvSize,q.ResvMax);return d0>i0&&(d0=i0),wa(q.ResvMax%8==0),wa(q.ResvMax>=0),X.resvDrain_pre=0,q.pinfo!=null&&(q.pinfo.mean_bits=j.bits/2,q.pinfo.resvsize=q.ResvSize),d0},this.ResvMaxBits=function(F,j,q,i0){var X=F.internal_flags,W,v0=X.ResvSize,d0=X.ResvMax;i0!=0&&(v0+=j),X.substep_shaping&1&&(d0*=.9),q.bits=j,v0*10>d0*9?(W=v0-d0*9/10,q.bits+=W,X.substep_shaping|=128):(W=0,X.substep_shaping&=127,!F.disable_reservoir&&!(X.substep_shaping&1)&&(q.bits-=.1*j));var C=v0<X.ResvMax*6/10?v0:X.ResvMax*6/10;return C-=W,C<0&&(C=0),C},this.ResvAdjust=function(F,j){F.ResvSize-=j.part2_3_length+j.part2_length},this.ResvFrameEnd=function(F,j){var q,i0=F.l3_side;F.ResvSize+=j*F.mode_gr;var X=0;i0.resvDrain_post=0,i0.resvDrain_pre=0,(q=F.ResvSize%8)!=0&&(X+=q),q=F.ResvSize-X-F.ResvMax,q>0&&(X+=q);{var W=Math.min(i0.main_data_begin*8,X)/8;i0.resvDrain_pre+=8*W,X-=8*W,F.ResvSize-=8*W,i0.main_data_begin-=W}i0.resvDrain_post+=X,F.ResvSize-=X}}var Os=Ls;function Vs(){var M="http://www.mp3dev.org/",F=3,j=98,q=4,i0=0,X=93;this.getLameVersion=function(){return F+"."+j+"."+q},this.getLameShortVersion=function(){return F+"."+j+"."+q},this.getLameVeryShortVersion=function(){return"LAME"+F+"."+j+"r"},this.getPsyVersion=function(){return i0+"."+X},this.getLameUrl=function(){return M},this.getLameOsBitness=function(){return"32bits"}}var gs=Vs,Ns=G.System,Kt=G.VbrMode,ya=G.ShortBlock,$s=G.Arrays,gt=G.new_byte,Hs=G.assert;dt.NUMTOCENTRIES=100,dt.MAXFRAMESIZE=2880;function dt(){var M,F,j;this.setModules=function(s,i,l){M=s,F=i,j=l};var q=1,i0=2,X=4,W=8,v0=dt.NUMTOCENTRIES,d0=dt.MAXFRAMESIZE,C=v0+4+4+4+4+4,s0=C+9+1+1+8+1+1+3+1+1+2+4+2+2,b=128,w=64,B=32,e=null,O="Xing",L="Info",T=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function r(s,i){if(s.nVbrNumFrames++,s.sum+=i,s.seen++,!(s.seen<s.want)&&(s.pos<s.size&&(s.bag[s.pos]=s.sum,s.pos++,s.seen=0),s.pos==s.size)){for(var l=1;l<s.size;l+=2)s.bag[l/2]=s.bag[l];s.want*=2,s.pos/=2}}function h(s,i){if(!(s.pos<=0))for(var l=1;l<v0;++l){var S=l/v0,P,k,V=0|Math.floor(S*s.pos);V>s.pos-1&&(V=s.pos-1),P=s.bag[V],k=s.sum;var a=0|256*P/k;a>255&&(a=255),i[l]=255&a}}this.addVbrFrame=function(s){var i=s.internal_flags,l=Tables.bitrate_table[s.version][i.bitrate_index];Hs(i.VBR_seek_table.bag!=null),r(i.VBR_seek_table,l)};function x(s,i){var l=s[i+0]&255;return l<<=8,l|=s[i+1]&255,l<<=8,l|=s[i+2]&255,l<<=8,l|=s[i+3]&255,l}function y(s,i,l){s[i+0]=255&(l>>24&255),s[i+1]=255&(l>>16&255),s[i+2]=255&(l>>8&255),s[i+3]=255&(l&255)}function R(s,i,l){s[i+0]=255&(l>>8&255),s[i+1]=255&(l&255)}function t(s,i){return new String(s,i,O.length(),e).equals(O)||new String(s,i,L.length(),e).equals(L)}function v(s,i,l){return 255&(s<<i|l&~(-1<<i))}function _(s,i){var l=s.internal_flags;i[0]=v(i[0],8,255),i[1]=v(i[1],3,7),i[1]=v(i[1],1,s.out_samplerate<16e3?0:1),i[1]=v(i[1],1,s.version),i[1]=v(i[1],2,4-3),i[1]=v(i[1],1,s.error_protection?0:1),i[2]=v(i[2],4,l.bitrate_index),i[2]=v(i[2],2,l.samplerate_index),i[2]=v(i[2],1,0),i[2]=v(i[2],1,s.extension),i[3]=v(i[3],2,s.mode.ordinal()),i[3]=v(i[3],2,l.mode_ext),i[3]=v(i[3],1,s.copyright),i[3]=v(i[3],1,s.original),i[3]=v(i[3],2,s.emphasis),i[0]=255;var S=255&(i[1]&241),P;s.version==1?P=b:s.out_samplerate<16e3?P=B:P=w,s.VBR==Kt.vbr_off&&(P=s.brate);var k;s.free_format?k=0:k=255&16*M.BitrateIndex(P,s.version,s.out_samplerate),s.version==1?(i[1]=255&(S|10),S=255&(i[2]&13),i[2]=255&(k|S)):(i[1]=255&(S|2),S=255&(i[2]&13),i[2]=255&(k|S))}this.getVbrTag=function(s){var i=new VBRTagData,l=0;i.flags=0;var S=s[l+1]>>3&1,P=s[l+2]>>2&3,k=s[l+3]>>6&3,V=s[l+2]>>4&15;if(V=Tables.bitrate_table[S][V],s[l+1]>>4==14?i.samprate=Tables.samplerate_table[2][P]:i.samprate=Tables.samplerate_table[S][P],S!=0?k!=3?l+=32+4:l+=17+4:k!=3?l+=17+4:l+=9+4,!t(s,l))return null;l+=4,i.hId=S;var a=i.flags=x(s,l);if(l+=4,a&q&&(i.frames=x(s,l),l+=4),a&i0&&(i.bytes=x(s,l),l+=4),a&X){if(i.toc!=null)for(var o=0;o<v0;o++)i.toc[o]=s[l+o];l+=v0}i.vbrScale=-1,a&W&&(i.vbrScale=x(s,l),l+=4),i.headersize=(S+1)*72e3*V/i.samprate,l+=21;var Y=s[l+0]<<4;Y+=s[l+1]>>4;var J=(s[l+1]&15)<<8;return J+=s[l+2]&255,(Y<0||Y>3e3)&&(Y=-1),(J<0||J>3e3)&&(J=-1),i.encDelay=Y,i.encPadding=J,i},this.InitVbrTag=function(s){var i=s.internal_flags,l;s.version==1?l=b:s.out_samplerate<16e3?l=B:l=w,s.VBR==Kt.vbr_off&&(l=s.brate);var S=(s.version+1)*72e3*l/s.out_samplerate,P=i.sideinfo_len+s0;if(i.VBR_seek_table.TotalFrameSize=S,S<P||S>d0){s.bWriteVbrTag=!1;return}i.VBR_seek_table.nVbrNumFrames=0,i.VBR_seek_table.nBytesWritten=0,i.VBR_seek_table.sum=0,i.VBR_seek_table.seen=0,i.VBR_seek_table.want=1,i.VBR_seek_table.pos=0,i.VBR_seek_table.bag==null&&(i.VBR_seek_table.bag=new int[400],i.VBR_seek_table.size=400);var k=gt(d0);_(s,k);for(var V=i.VBR_seek_table.TotalFrameSize,a=0;a<V;++a)F.add_dummy_byte(s,k[a]&255,1)};function n(s,i){var l=i^s;return i=i>>8^T[l&255],i}this.updateMusicCRC=function(s,i,l,S){for(var P=0;P<S;++P)s[0]=n(i[l+P],s[0])};function c(s,i,l,S,P){var k=s.internal_flags,V=0,a=s.encoder_delay,o=s.encoder_padding,Y=100-10*s.VBR_q-s.quality,J=j.getLameVeryShortVersion(),h0,y0=0,f0,x0=[1,5,3,2,4,0,3],F0=0|(s.lowpassfreq/100+.5>255?255:s.lowpassfreq/100+.5),k0=0,b0=0,re=0,Ee=s.internal_flags.noise_shaping,J0=0,de=0,fe=0,Se=0,Ie=0,w1=(s.exp_nspsytune&1)!=0,e1=(s.exp_nspsytune&2)!=0,De=!1,o1=!1,j1=s.internal_flags.nogap_total,N1=s.internal_flags.nogap_current,je=s.ATHtype,G1=0,E1;switch(s.VBR){case vbr_abr:E1=s.VBR_mean_bitrate_kbps;break;case vbr_off:E1=s.brate;break;default:E1=s.VBR_min_bitrate_kbps}switch(s.VBR.ordinal()<x0.length?h0=x0[s.VBR.ordinal()]:h0=0,f0=16*y0+h0,k.findReplayGain&&(k.RadioGain>510&&(k.RadioGain=510),k.RadioGain<-510&&(k.RadioGain=-510),b0=8192,b0|=3072,k.RadioGain>=0?b0|=k.RadioGain:(b0|=512,b0|=-k.RadioGain)),k.findPeakSample&&(k0=Math.abs(0|k.PeakSample/32767*Math.pow(2,23)+.5)),j1!=-1&&(N1>0&&(o1=!0),N1<j1-1&&(De=!0)),G1=je+((w1?1:0)<<4)+((e1?1:0)<<5)+((De?1:0)<<6)+((o1?1:0)<<7),Y<0&&(Y=0),s.mode){case MONO:J0=0;break;case STEREO:J0=1;break;case DUAL_CHANNEL:J0=2;break;case JOINT_STEREO:s.force_ms?J0=4:J0=3;break;case NOT_SET:default:J0=7;break}s.in_samplerate<=32e3?fe=0:s.in_samplerate==48e3?fe=2:s.in_samplerate>48e3?fe=3:fe=1,(s.short_blocks==ya.short_block_forced||s.short_blocks==ya.short_block_dispensed||s.lowpassfreq==-1&&s.highpassfreq==-1||s.scale_left<s.scale_right||s.scale_left>s.scale_right||s.disable_reservoir&&s.brate<320||s.noATH||s.ATHonly||je==0||s.in_samplerate<=32e3)&&(de=1),Se=Ee+(J0<<2)+(de<<5)+(fe<<6),Ie=k.nMusicCRC,y(l,S+V,Y),V+=4;for(var Ge=0;Ge<9;Ge++)l[S+V+Ge]=255&J.charAt(Ge);V+=9,l[S+V]=255&f0,V++,l[S+V]=255&F0,V++,y(l,S+V,k0),V+=4,R(l,S+V,b0),V+=2,R(l,S+V,re),V+=2,l[S+V]=255&G1,V++,E1>=255?l[S+V]=255:l[S+V]=255&E1,V++,l[S+V]=255&a>>4,l[S+V+1]=255&(a<<4)+(o>>8),l[S+V+2]=255&o,V+=3,l[S+V]=255&Se,V++,l[S+V++]=0,R(l,S+V,s.preset),V+=2,y(l,S+V,i),V+=4,R(l,S+V,Ie),V+=2;for(var at=0;at<V;at++)P=n(l[S+at],P);return R(l,S+V,P),V+=2,V}function u(s){s.seek(0);var i=gt(10);s.readFully(i);var l;return new String(i,"ISO-8859-1").startsWith("ID3")?l=0:l=((i[6]&127)<<21|(i[7]&127)<<14|(i[8]&127)<<7|i[9]&127)+i.length,l}this.getLameTagFrame=function(s,i){var l=s.internal_flags;if(!s.bWriteVbrTag||l.Class_ID!=_e.LAME_ID||l.VBR_seek_table.pos<=0)return 0;if(i.length<l.VBR_seek_table.TotalFrameSize)return l.VBR_seek_table.TotalFrameSize;$s.fill(i,0,l.VBR_seek_table.TotalFrameSize,0),_(s,i);var S=gt(v0);if(s.free_format)for(var P=1;P<v0;++P)S[P]=255&255*P/100;else h(l.VBR_seek_table,S);var k=l.sideinfo_len;s.error_protection&&(k-=2),s.VBR==Kt.vbr_off?(i[k++]=255&L.charAt(0),i[k++]=255&L.charAt(1),i[k++]=255&L.charAt(2),i[k++]=255&L.charAt(3)):(i[k++]=255&O.charAt(0),i[k++]=255&O.charAt(1),i[k++]=255&O.charAt(2),i[k++]=255&O.charAt(3)),y(i,k,q+i0+X+W),k+=4,y(i,k,l.VBR_seek_table.nVbrNumFrames),k+=4;var V=l.VBR_seek_table.nBytesWritten+l.VBR_seek_table.TotalFrameSize;y(i,k,0|V),k+=4,Ns.arraycopy(S,0,i,k,S.length),k+=S.length,s.error_protection&&F.CRC_writeheader(l,i);for(var a=0,P=0;P<k;P++)a=n(i[P],a);return k+=c(s,V,i,k,a),l.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(s,i){var l=s.internal_flags;if(l.VBR_seek_table.pos<=0||(i.seek(i.length()),i.length()==0))return-1;var S=u(i);i.seek(S);var P=gt(d0),k=getLameTagFrame(s,P);return k>P.length?-1:(k<1||i.write(P,0,k),0)}}var Fs=dt,Sa=G.new_byte,qs=G.assert,_e=ys,Xs=Ms,ft=$e,Ds=L1,Zs=Is,Ps=jt,Ys=Os,Te=lt,T1=O1;function js(){this.setModules=function(M,F){}}function Gs(){this.setModules=function(M,F,j){}}function zs(){}function Us(){this.setModules=function(M,F){}}function Ks(M,F,j){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),M=1,F=44100,j=128);var q=new _e,i0=new js,X=new ft,W=new T1,v0=new Xs,d0=new Ds,C=new Zs,s0=new Fs,b=new gs,w=new Us,B=new Ys,e=new Ps,O=new Gs,L=new zs;q.setModules(X,W,v0,d0,C,s0,b,w,L),W.setModules(X,L,b,s0),w.setModules(W,b),v0.setModules(q),C.setModules(W,B,d0,e),d0.setModules(e,B,q.enc.psy),B.setModules(W),e.setModules(d0),s0.setModules(q,W,b),i0.setModules(O,L),O.setModules(b,w,v0);var T=q.lame_init();T.num_channels=M,T.in_samplerate=F,T.brate=j,T.mode=Te.STEREO,T.quality=3,T.bWriteVbrTag=!1,T.disable_reservoir=!0,T.write_id3tag_automatic=!1,q.lame_init_params(T);var r=1152,h=0|1.25*r+7200,x=Sa(h);this.encodeBuffer=function(y,R){M==1&&(R=y),qs(y.length==R.length),y.length>r&&(r=y.length,h=0|1.25*r+7200,x=Sa(h));var t=q.lame_encode_buffer(T,y,R,y.length,x,0,h);return new Int8Array(x.subarray(0,t))},this.flush=function(){var y=q.lame_encode_flush(T,x,0,h);return new Int8Array(x.subarray(0,y))}}function Nt(M){return M.charCodeAt(0)<<24|M.charCodeAt(1)<<16|M.charCodeAt(2)<<8|M.charCodeAt(3)}Nt("RIFF"),Nt("WAVE"),Nt("fmt "),Nt("data");var Qs=Ks,Ma=function(M,F){if(!(M instanceof F))throw new TypeError("Cannot call a class as a function")},Aa=function(){function M(F,j){for(var q=0;q<j.length;q++){var i0=j[q];i0.enumerable=i0.enumerable||!1,i0.configurable=!0,"value"in i0&&(i0.writable=!0),Object.defineProperty(F,i0.key,i0)}}return function(F,j,q){return j&&M(F.prototype,j),q&&M(F,q),F}}(),Ws=function(){function M(F){Ma(this,M),this.config={sampleRate:44100,bitRate:128},Object.assign(this.config,F),this.mp3Encoder=new Qs(1,this.config.sampleRate,this.config.bitRate),this.maxSamples=1152,this.samplesMono=null,this.clearBuffer()}return Aa(M,[{key:"clearBuffer",value:function(){this.dataBuffer=[]}},{key:"appendToBuffer",value:function(j){this.dataBuffer.push(new Int8Array(j))}},{key:"floatTo16BitPCM",value:function(j,q){for(var i0=0;i0<j.length;i0++){var X=Math.max(-1,Math.min(1,j[i0]));q[i0]=X<0?X*32768:X*32767}}},{key:"convertBuffer",value:function(j){var q=new Float32Array(j),i0=new Int16Array(j.length);return this.floatTo16BitPCM(q,i0),i0}},{key:"encode",value:function(j){this.samplesMono=this.convertBuffer(j);for(var q=this.samplesMono.length,i0=0;q>=0;i0+=this.maxSamples){var X=this.samplesMono.subarray(i0,i0+this.maxSamples),W=this.mp3Encoder.encodeBuffer(X);this.appendToBuffer(W),q-=this.maxSamples}}},{key:"finish",value:function(){return this.appendToBuffer(this.mp3Encoder.flush()),this.dataBuffer}}]),M}(),Js=function(){function M(F){Ma(this,M),this.config={bitRate:128,startRecordingAt:300,deviceId:null},this.activeStream=null,this.context=null,this.microphone=null,this.processor=null,this.startTime=0,Object.assign(this.config,F)}return Aa(M,[{key:"addMicrophoneListener",value:function(j){var q=this;this.activeStream=j,this.timerToStart=setTimeout(function(){delete q.timerToStart},this.config.startRecordingAt),this.microphone=this.context.createMediaStreamSource(j),this.processor=this.context.createScriptProcessor(0,1,1),this.processor.onaudioprocess=function(i0){q.timerToStart||q.lameEncoder.encode(i0.inputBuffer.getChannelData(0))},this.microphone.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"stop",value:function(){return this.processor&&this.microphone&&(this.microphone.disconnect(),this.processor.disconnect(),this.context&&this.context.state!=="closed"&&this.context.close(),this.processor.onaudioprocess=null,this.activeStream.getAudioTracks().forEach(function(j){return j.stop()})),this}},{key:"start",value:function(){var j=this,q=window.AudioContext||window.webkitAudioContext;this.context=new q,this.config.sampleRate=this.context.sampleRate,this.lameEncoder=new Ws(this.config);var i0=this.config.deviceId?{deviceId:{exact:this.config.deviceId}}:!0;return new Promise(function(X,W){navigator.mediaDevices.getUserMedia({audio:i0}).then(function(v0){j.addMicrophoneListener(v0),X(v0)}).catch(function(v0){W(v0)})})}},{key:"getMp3",value:function(){var j=this,q=this.lameEncoder.finish();return new Promise(function(i0,X){q.length===0?X(new Error("No buffer to send")):(i0([q,new Blob(q,{type:"audio/mp3"})]),j.lameEncoder.clearBuffer())})}}]),M}();return Js})})(ja);var br=ja.exports;const xr=ar(br),wr={key:0,class:"flex justify-center items-center w-full px-6 md:px-4"},yr={class:"flex items-start space-x-4 bg-orange-100 rounded-lg p-2 mb-2 px-4"},Sr=Qe('<span class="text-red-700"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 36 36"><path fill="currentColor" d="M18 21.32a1.3 1.3 0 0 0 1.3-1.3V14a1.3 1.3 0 1 0-2.6 0v6a1.3 1.3 0 0 0 1.3 1.32Z" class="clr-i-outline clr-i-outline-path-1"></path><circle cx="17.95" cy="24.27" r="1.5" fill="currentColor" class="clr-i-outline clr-i-outline-path-2"></circle><path fill="currentColor" d="M30.33 25.54L20.59 7.6a3 3 0 0 0-5.27 0L5.57 25.54A3 3 0 0 0 8.21 30h19.48a3 3 0 0 0 2.64-4.43Zm-1.78 1.94a1 1 0 0 1-.86.49H8.21a1 1 0 0 1-.88-1.48l9.74-17.94a1 1 0 0 1 1.76 0l9.74 17.94a1 1 0 0 1-.02.99Z" class="clr-i-outline clr-i-outline-path-3"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></span>',1),Mr={class:"text-sm"},Ar={class:"text-sm"},Rr={key:1,class:"flex justify-center items-center w-full px-6 md:px-4"},Br={class:"flex items-center justify-between space-x-4 bg-orange-100 rounded-lg p-2 mb-2 px-4"},Tr={class:"flex items-start justify-between space-x-4"},Er=Qe('<span class="text-red-700"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 36 36"><path fill="currentColor" d="M18 21.32a1.3 1.3 0 0 0 1.3-1.3V14a1.3 1.3 0 1 0-2.6 0v6a1.3 1.3 0 0 0 1.3 1.32Z" class="clr-i-outline clr-i-outline-path-1"></path><circle cx="17.95" cy="24.27" r="1.5" fill="currentColor" class="clr-i-outline clr-i-outline-path-2"></circle><path fill="currentColor" d="M30.33 25.54L20.59 7.6a3 3 0 0 0-5.27 0L5.57 25.54A3 3 0 0 0 8.21 30h19.48a3 3 0 0 0 2.64-4.43Zm-1.78 1.94a1 1 0 0 1-.86.49H8.21a1 1 0 0 1-.88-1.48l9.74-17.94a1 1 0 0 1 1.76 0l9.74 17.94a1 1 0 0 1-.02.99Z" class="clr-i-outline clr-i-outline-path-3"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></span>',1),kr={class:"text-sm"},Cr={class:"text-sm"},Ir={class:"absolute"},Lr=["onKeydown","placeholder","disabled"],Or=["accept"],Vr=Qe('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M6.5 8a2 2 0 1 0 4 0a2 2 0 0 0-4 0Zm14.427 1.99c-6.61-.908-12.31 4-11.927 10.51"></path><path d="M3 13.066c2.78-.385 5.275.958 6.624 3.1"></path><path d="M3 12c0-4.243 0-6.364 1.318-7.682C5.636 3 7.758 3 12 3c4.243 0 6.364 0 7.682 1.318C21 5.636 21 7.758 21 12c0 4.243 0 6.364-1.318 7.682C18.364 21 16.242 21 12 21c-4.243 0-6.364 0-7.682-1.318C3 18.364 3 16.242 3 12Z"></path></g></svg>',1),gr=[Vr],Nr=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[p("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[p("path",{d:"M3 10c0-3.771 0-5.657 1.172-6.828C5.343 2 7.229 2 11 2h2c3.771 0 5.657 0 6.828 1.172C21 4.343 21 6.229 21 10v4c0 3.771 0 5.657-1.172 6.828C18.657 22 16.771 22 13 22h-2c-3.771 0-5.657 0-6.828-1.172C3 19.657 3 17.771 3 14v-4Z"}),p("path",{"stroke-linecap":"round",d:"M8 10h8m-8 4h5"})])],-1),$r=[Nr],Hr=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 1024 1024"},[p("path",{fill:"currentColor",d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1M512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168m-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92z"})],-1),Fr=[Hr],qr=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 32 32"},[p("path",{fill:"currentColor",d:"M6.5 5.5A4.5 4.5 0 0 0 2 10v12a4.5 4.5 0 0 0 4.5 4.5h12A4.5 4.5 0 0 0 23 22v-1.5l4.2 3.15c1.153.865 2.8.042 2.8-1.4V9.75c0-1.442-1.647-2.265-2.8-1.4L23 11.5V10a4.5 4.5 0 0 0-4.5-4.5zM23 14l5-3.75v11.5L23 18zm-2-4v12a2.5 2.5 0 0 1-2.5 2.5h-12A2.5 2.5 0 0 1 4 22V10a2.5 2.5 0 0 1 2.5-2.5h12A2.5 2.5 0 0 1 21 10"})],-1),Xr=[qr],Dr=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 256 256"},[p("path",{fill:"currentColor",d:"M216 80h-32V48a16 16 0 0 0-16-16H40a16 16 0 0 0-16 16v128a8 8 0 0 0 13 6.22L72 154v30a16 16 0 0 0 16 16h93.59L219 230.22a8 8 0 0 0 5 1.78a8 8 0 0 0 8-8V96a16 16 0 0 0-16-16M66.55 137.78L40 159.25V48h128v88H71.58a8 8 0 0 0-5.03 1.78M216 207.25l-26.55-21.47a8 8 0 0 0-5-1.78H88v-32h80a16 16 0 0 0 16-16V96h32Z"})],-1),Zr=[Dr],Pr=["disabled"],Yr=p("path",{fill:"currentColor",d:"M1.724 1.053a.5.5 0 0 0-.714.545l1.403 4.85a.5.5 0 0 0 .397.354l5.69.953c.268.053.268.437 0 .49l-5.69.953a.5.5 0 0 0-.397.354l-1.403 4.85a.5.5 0 0 0 .714.545l13-6.5a.5.5 0 0 0 0-.894l-13-6.5Z"},null,-1),jr=[Yr],Gr={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},zr=Qe('<circle cx="12" cy="2" r="0" fill="currentColor"><animate attributeName="r" begin="0" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(45 12 12)"><animate attributeName="r" begin="0.125s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(90 12 12)"><animate attributeName="r" begin="0.25s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(135 12 12)"><animate attributeName="r" begin="0.375s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(180 12 12)"><animate attributeName="r" begin="0.5s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(225 12 12)"><animate attributeName="r" begin="0.625s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(270 12 12)"><animate attributeName="r" begin="0.75s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(315 12 12)"><animate attributeName="r" begin="0.875s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle>',8),Ur=[zr],Kr={class:"bg-white rounded-md w-full p-4"},Qr=["onKeydown","placeholder","disabled"],Wr=["accept"],Jr={key:0,class:"bg-slate-50 rounded-lg border px-2 mb-2"},e2={class:"flex items-center justify-between"},t2={class:"flex items-center"},a2={class:"text-red-500 mr-2"},s2={key:0,class:"animate-pulse"},r2=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("circle",{cx:"12",cy:"12",r:"7",fill:"red",opacity:"0.5"}),p("path",{fill:"#fee2e2","fill-rule":"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10m0-3a7 7 0 1 0 0-14a7 7 0 0 0 0 14","clip-rule":"evenodd"})],-1),n2=[r2],i2={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l2=p("path",{fill:"#22c55e",stroke:"#22c55e","stroke-linecap":"round","stroke-width":"1.5",d:"M3 12v6.967c0 2.31 2.534 3.769 4.597 2.648l3.203-1.742M3 8V5.033c0-2.31 2.534-3.769 4.597-2.648l12.812 6.968a2.998 2.998 0 0 1 0 5.294l-6.406 3.484"},null,-1),o2=[l2],_2={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},c2=p("path",{fill:"none",stroke:"red","stroke-linecap":"round","stroke-width":"1.5",d:"M2 18c0 1.886 0 2.828.586 3.414S4.114 22 6 22s2.828 0 3.414-.586S10 19.886 10 18V6c0-1.886 0-2.828-.586-3.414S7.886 2 6 2s-2.828 0-3.414.586S2 4.114 2 6v8m20-8c0-1.886 0-2.828-.586-3.414S19.886 2 18 2s-2.828 0-3.414.586S14 4.114 14 6v12c0 1.886 0 2.828.586 3.414S16.114 22 18 22s2.828 0 3.414-.586S22 19.886 22 18v-8"},null,-1),u2=[c2],v2={key:0,class:"text-sm"},h2={key:1,class:"text-sm"},d2={class:"flex gap-2"},f2=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("path",{fill:"red",stroke:"red","stroke-width":"1.5",d:"M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"})],-1),m2=[f2],p2=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("path",{fill:"none",stroke:"red","stroke-linecap":"round","stroke-width":"1.5",d:"M9.17 4a3.001 3.001 0 0 1 5.66 0m5.67 2h-17m14.874 9.4c-.177 2.654-.266 3.981-1.131 4.79s-2.195.81-4.856.81h-.774c-2.66 0-3.99 0-4.856-.81c-.865-.809-.953-2.136-1.13-4.79l-.46-6.9m13.666 0l-.2 3M9.5 11l.5 5m4.5-5l-.5 5"})],-1),b2=[p2],x2=["src"],w2={class:"flex gap-x-4 items-center text-gray-600"},y2=p("span",null,[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 256 256"},[p("path",{fill:"currentColor",d:"M216 80h-32V48a16 16 0 0 0-16-16H40a16 16 0 0 0-16 16v128a8 8 0 0 0 13 6.22L72 154v30a16 16 0 0 0 16 16h93.59L219 230.22a8 8 0 0 0 5 1.78a8 8 0 0 0 8-8V96a16 16 0 0 0-16-16M66.55 137.78L40 159.25V48h128v88H71.58a8 8 0 0 0-5.03 1.78M216 207.25l-26.55-21.47a8 8 0 0 0-5-1.78H88v-32h80a16 16 0 0 0 16-16V96h32Z"})])],-1),S2=p("div",null,"|",-1),M2={class:"flex gap-x-4 text-sm items-center"},A2=p("span",null,[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},[p("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.111 2.18a7 7 0 1 1 7.778 11.64A7 7 0 0 1 4.11 2.18zm.556 10.809a6 6 0 1 0 6.666-9.978a6 6 0 0 0-6.666 9.978M6.5 7a1 1 0 1 1-2 0a1 1 0 0 1 2 0m5 0a1 1 0 1 1-2 0a1 1 0 0 1 2 0M8 11a3 3 0 0 1-2.65-1.58l-.87.48a4 4 0 0 0 7.12-.16l-.9-.43A3 3 0 0 1 8 11","clip-rule":"evenodd"})])],-1),R2=[A2],B2={class:"absolute"},T2=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 56 56"},[p("path",{fill:"currentColor",d:"M44.09 28.867L26.863 46.094c-4.476 4.5-10.5 4.054-14.343.164c-3.867-3.844-4.313-9.82.187-14.32L36.191 8.453c2.696-2.695 6.657-3.07 9.235-.515c2.555 2.601 2.18 6.539-.492 9.234L21.988 40.14c-1.171 1.195-2.554.843-3.375.047c-.796-.82-1.125-2.18.047-3.376l16.031-16.007c.704-.727.75-1.758.07-2.438c-.679-.656-1.71-.61-2.413.094L16.246 34.563c-2.39 2.39-2.297 6.046-.187 8.156c2.297 2.297 5.789 2.25 8.18-.164l23.085-23.063c4.383-4.383 4.172-10.148.375-13.969c-3.75-3.726-9.586-4.007-13.992.375L10.082 29.547c-5.789 5.789-5.344 14.062-.117 19.289c5.227 5.203 13.5 5.648 19.289-.117l17.344-17.344c.703-.68.68-1.922-.024-2.555c-.68-.726-1.78-.633-2.484.047"})],-1),E2=[T2],k2=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[p("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[p("path",{d:"M9 19a3 3 0 1 1-6 0a3 3 0 0 1 6 0Zm12-2a3 3 0 1 1-6 0a3 3 0 0 1 6 0ZM9 19V8m12 9V6"}),p("path",{"stroke-linecap":"round",d:"m15.735 3.755l-4 1.333c-1.32.44-1.98.66-2.357 1.184S9 7.492 9 8.882V12l12-4v-.45c0-2.533 0-3.8-.83-4.398c-.831-.599-2.032-.198-4.435.603Z"})])],-1),C2=[k2],I2=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 32 32"},[p("path",{fill:"currentColor",d:"M6.5 5.5A4.5 4.5 0 0 0 2 10v12a4.5 4.5 0 0 0 4.5 4.5h12A4.5 4.5 0 0 0 23 22v-1.5l4.2 3.15c1.153.865 2.8.042 2.8-1.4V9.75c0-1.442-1.647-2.265-2.8-1.4L23 11.5V10a4.5 4.5 0 0 0-4.5-4.5zM23 14l5-3.75v11.5L23 18zm-2-4v12a2.5 2.5 0 0 1-2.5 2.5h-12A2.5 2.5 0 0 1 4 22V10a2.5 2.5 0 0 1 2.5-2.5h12A2.5 2.5 0 0 1 21 10"})],-1),L2=[I2],O2=Qe('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M6.5 8a2 2 0 1 0 4 0a2 2 0 0 0-4 0Zm14.427 1.99c-6.61-.908-12.31 4-11.927 10.51"></path><path d="M3 13.066c2.78-.385 5.275.958 6.624 3.1"></path><path d="M3 12c0-4.243 0-6.364 1.318-7.682C5.636 3 7.758 3 12 3c4.243 0 6.364 0 7.682 1.318C21 5.636 21 7.758 21 12c0 4.243 0 6.364-1.318 7.682C18.364 21 16.242 21 12 21c-4.243 0-6.364 0-7.682-1.318C3 18.364 3 16.242 3 12Z"></path></g></svg>',1),V2=[O2],g2=p("div",null,"|",-1),N2=p("span",{class:"relative"},[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 1024 1024"},[p("path",{fill:"currentColor",d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1M512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168m-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92z"})])],-1),$2=[N2],H2={class:"ms-[-5px]"},F2=Qe('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" color="#000"><path d="m7 8l2.942 1.74c1.715 1.014 2.4 1.014 4.116 0L17 8"></path><path d="M21.984 12.976c.021-.986.021-1.966 0-2.952c-.065-3.065-.098-4.598-1.229-5.733c-1.131-1.136-2.705-1.175-5.854-1.254a115 115 0 0 0-5.802 0c-3.149.079-4.723.118-5.854 1.254c-1.131 1.135-1.164 2.668-1.23 5.733a69 69 0 0 0 0 2.952c.066 3.065.099 4.598 1.23 5.733c1.131 1.136 2.705 1.175 5.854 1.254c1.305.033 2.601.044 3.901.033"></path><path d="m18.5 14l.258.697c.338.914.507 1.371.84 1.704c.334.334.791.503 1.705.841L22 17.5l-.697.258c-.914.338-1.371.507-1.704.84c-.334.334-.503.791-.841 1.705L18.5 21l-.258-.697c-.338-.914-.507-1.371-.84-1.704c-.334-.334-.791-.503-1.705-.841L15 17.5l.697-.258c.914-.338 1.371-.507 1.704-.84c.334-.334.503-.791.841-1.705z"></path></g></svg>',1),q2={key:1,class:"text-[14px] flex items-center gap-2 bg-gray-100 p-1 px-2 rounded-md"},X2=Qe('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="18" cy="12" r="0" fill="currentColor"><animate attributeName="r" begin=".67" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="12" r="0" fill="currentColor"><animate attributeName="r" begin=".33" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="6" cy="12" r="0" fill="currentColor"><animate attributeName="r" begin="0" calcMode="spline" dur="1.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle></svg>',1),D2={class:"ml-auto"},Z2=["disabled"],P2=p("path",{fill:"currentColor",d:"M1.724 1.053a.5.5 0 0 0-.714.545l1.403 4.85a.5.5 0 0 0 .397.354l5.69.953c.268.053.268.437 0 .49l-5.69.953a.5.5 0 0 0-.397.354l-1.403 4.85a.5.5 0 0 0 .714.545l13-6.5a.5.5 0 0 0 0-.894l-13-6.5Z"},null,-1),Y2=[P2],j2={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},G2=Qe('<circle cx="12" cy="2" r="0" fill="currentColor"><animate attributeName="r" begin="0" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(45 12 12)"><animate attributeName="r" begin="0.125s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(90 12 12)"><animate attributeName="r" begin="0.25s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(135 12 12)"><animate attributeName="r" begin="0.375s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(180 12 12)"><animate attributeName="r" begin="0.5s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(225 12 12)"><animate attributeName="r" begin="0.625s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(270 12 12)"><animate attributeName="r" begin="0.75s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(315 12 12)"><animate attributeName="r" begin="0.875s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle>',8),z2=[G2],U2={__name:"ChatForm",props:["contact","chatLimitReached","simpleForm"],emits:["response","viewTemplate"],setup(g,{emit:K}){const Q=V0(null),p0=g,n0=V0(null),w0=V0(!1),c0=V0(null),H0=V0(!1);V0(null);const ne=V0([]),K0=V0(0),j0=V0(null),D0=V0(0),Z0=V0(null),z0=V0(0),B0=V0(null),S0=V0(!1),m0=V0(null),r0=V0(!1),G=V0({uuid:p0.contact.uuid,message:null,type:null,file:null}),ee=V0({uuid:p0.contact.uuid,message:null,type:null,file:null}),P0=V0(!1),we=V0(null);qa(()=>{G.value.uuid=p0.contact.uuid});const Ce=K,se=()=>{Ce("viewTemplate",!0)},oe=async()=>{if(G.value.message=c0.value,n0.value=!0,G.value.message!=null||G.value.file!=null){const $0=new FormData;$0.append("message",G.value.message),$0.append("type",G.value.type),$0.append("uuid",G.value.uuid),G.value.file&&$0.append("file",G.value.file);try{const E0=await wt.post("/chats",$0);r0.value==!0&&await ge(),G.value.message=null,c0.value=null,G.value.file=null,n0.value=!1}catch{}}else r0.value==!0&&await ge(),n0.value=!1},ge=async()=>{const $0=new FormData;$0.append("type",ee.value.type),$0.append("uuid",ee.value.uuid),ee.value.file&&$0.append("file",ee.value.file);try{const E0=await wt.post("/chats",$0);r0.value==!0&&Ye()}catch{}},W0=V0(null),Q0=()=>{const $0=W0.value;$0.style.height="auto",$0.style.height=$0.scrollHeight+"px"},ie=$0=>{c0.value!=null&&c0.value.trim()!=""&&oe()},Fe=Xt(()=>{if(p0.contact.last_inbound_chat){const $0=new Date(p0.contact.last_inbound_chat.created_at);return new Date-$0<24*60*60*1e3}return!1}),h1=$0=>{const E0=$0.target.files[0],L0=new FileReader;L0.onload=A1=>{G.value.file=E0,oe()},L0.readAsDataURL(E0)},d1=()=>{switch(G.value.type){case"image":return".jpg, .png";case"document":return".txt, .pdf, .ppt, .doc, .xls, .docx, .pptx, .xlsx";case"audio":return".mp3, .ogg";case"video":return".mp4";default:return""}},t1=$0=>{$0.stopPropagation(),P0.value=!P0.value},We=()=>{P0.value=!1},a1=$0=>{const E0=W0.value,L0=c0.value||"",A1=E0.selectionStart||0,ve=E0.selectionEnd||0,Oe=L0.substring(0,A1)+$0.i+L0.substring(ve);c0.value=Oe,setTimeout(()=>{E0.focus(),E0.setSelectionRange(A1+$0.i.length,A1+$0.i.length)},0)},s1=$0=>{we.value&&!we.value.contains($0.target)&&!W0.value.contains($0.target)&&We()},S1=async()=>{try{r0.value=!0,await Q.value.start(),H0.value=!0,f()}catch($0){console.error("Error accessing microphone:",$0)}},M1=async()=>{if(H0.value)try{const[$0,E0]=await Q.value.stop().getMp3(),L0=new File($0,"audio-message.mp3",{type:E0.type,lastModified:Date.now()});B0.value=URL.createObjectURL(E0),ee.value.type="audio",ee.value.file=L0,H0.value=!1,k1()}catch($0){console.error("Error stopping recording:",$0)}},Ye=()=>{B0.value&&URL.revokeObjectURL(B0.value),B0.value=null,K0.value=0,D0.value=0,z0.value=0,ne.value=[],ee.value.type=null,ee.value.file=null,C1()},q0=()=>{m0.value&&(S0.value?(m0.value.pause(),C1()):(m0.value.play(),H1()),S0.value=!S0.value)},f=()=>{K0.value=0,j0.value=setInterval(()=>{K0.value++},1e3)},H1=()=>{D0.value=0,Z0.value=setInterval(()=>{m0.value&&(D0.value=Math.floor(m0.value.currentTime))},100)},k1=()=>{j0.value&&(clearInterval(j0.value),j0.value=null)},C1=()=>{Z0.value&&(clearInterval(Z0.value),Z0.value=null)},I1=$0=>{const E0=Math.floor($0/60),L0=$0%60;return`${E0.toString().padStart(2,"0")}:${L0.toString().padStart(2,"0")}`},r1=async()=>{var $0,E0;w0.value=!0;try{const L0=await wt.get("/automation/chat/suggestion",{params:{contact:p0.contact.uuid}});L0.data.success?(G.value.type="text",c0.value=L0.data.data.text):console.error("Failed to get suggestion:",L0.data.message)}catch(L0){console.error("Error getting suggestion:",((E0=($0=L0.response)==null?void 0:$0.data)==null?void 0:E0.message)||L0.message)}finally{w0.value=!1}};return At(()=>{document.addEventListener("click",s1),Q.value=new xr({bitRate:128})}),ca(()=>{document.removeEventListener("click",s1),k1(),C1(),B0.value&&URL.revokeObjectURL(B0.value)}),($0,E0)=>(z(),a0(u1,null,[p0.chatLimitReached?(z(),a0("div",wr,[p("div",yr,[Sr,p("div",null,[p("div",Mr,A0($0.$t("Maximum chat limit reached")),1),p("div",Ar,A0($0.$t("You have reached the maximum chat limit for your subscription! Please upgrade to send/receive more messages")),1)])])])):I0("",!0),!Fe.value&&!p0.chatLimitReached?(z(),a0("div",Rr,[p("div",Br,[p("div",Tr,[Er,p("div",null,[p("div",kr,A0($0.$t("24 hour limit")),1),p("div",Cr,A0($0.$t("Whatsapp does not allow sending messages 24 hours after they last messaged you. However, you can send them a template message")),1)])]),p("button",{onClick:E0[0]||(E0[0]=L0=>se()),class:"rounded-md bg-primary px-3 py-1 text-sm text-white shadow-sm w-[25%]"},"Send Template")])])):I0("",!0),g.simpleForm&&Fe.value&&!p0.chatLimitReached?(z(),a0("form",{key:2,onSubmit:E0[9]||(E0[9]=W1(L0=>oe(),["prevent"])),class:"flex items-center px-2 md:px-10 space-x-2"},[p("div",{class:ke(["flex items-center w-full rounded-lg py-4 md:py-2 pl-2 pr-2",n0.value?"bg-gray-200":"bg-white"])},[p("div",Ir,[p("button",{type:"button",onClick:t1},"😀"),P0.value?(z(),a0("div",{key:0,class:"absolute left-0 bottom-full",ref_key:"emojiPickerRef",ref:we},[Ae(xe(Va),{native:!0,onSelect:a1})],512)):I0("",!0)]),la(p("textarea",{ref_key:"textInputRef",ref:W0,onFocus:E0[1]||(E0[1]=L0=>G.value.type="text"),onKeydown:Oa(W1(ie,["exact","prevent"]),["enter"]),class:ke(["w-full ml-3 outline-none resize-none text-sm md:text-base pl-6",n0.value?"bg-gray-200":"bg-white"]),"onUpdate:modelValue":E0[2]||(E0[2]=L0=>c0.value=L0),onInput:Q0,type:"text",rows:"1",placeholder:$0.$t("Type your message..."),disabled:n0.value},`
            `,42,Lr),[[oa,c0.value]]),p("input",{type:"file",class:"sr-only",accept:d1(),id:"file-upload",onChange:E0[3]||(E0[3]=L0=>h1(L0))},null,40,Or),p("label",{onClick:E0[4]||(E0[4]=L0=>G.value.type="image"),for:"file-upload",class:"text-slate-500 mr-2 cursor-pointer"},gr),p("label",{onClick:E0[5]||(E0[5]=L0=>G.value.type="document"),for:"file-upload",class:"text-slate-500 mr-1 cursor-pointer"},$r),p("label",{onClick:E0[6]||(E0[6]=L0=>G.value.type="audio"),for:"file-upload",class:"text-slate-500 mr-1 cursor-pointer"},Fr),p("label",{onClick:E0[7]||(E0[7]=L0=>G.value.type="video"),for:"file-upload",class:"text-slate-500 mr-2 cursor-pointer"},Xr),p("label",{onClick:E0[8]||(E0[8]=L0=>se()),class:"text-slate-500 mr-4 cursor-pointer"},Zr),p("button",{class:"flex items-center",type:"submit",disabled:c0.value===null||c0.value.trim()===""||n0.value},[n0.value?(z(),a0("svg",Gr,Ur)):(z(),a0("svg",{key:0,class:ke(c0.value===null||c0.value.trim()===""?"text-slate-300":"text-black"),xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 16 16"},jr,2))],8,Pr)],2)],32)):I0("",!0),!g.simpleForm&&Fe.value&&!p0.chatLimitReached?(z(),a0("form",{key:3,onSubmit:E0[20]||(E0[20]=W1(L0=>oe(),["prevent"])),class:"flex items-center px-2 md:px-10 space-x-2"},[p("div",Kr,[p("div",null,[la(p("textarea",{ref_key:"textInputRef",ref:W0,onFocus:E0[10]||(E0[10]=L0=>G.value.type="text"),onKeydown:Oa(W1(ie,["exact","prevent"]),["enter"]),class:ke(["w-full outline-none resize-none text-sm rounded-md p-2",n0.value?"bg-gray-100":"bg-white"]),"onUpdate:modelValue":E0[11]||(E0[11]=L0=>c0.value=L0),onInput:Q0,type:"text",rows:"3",placeholder:$0.$t("Type your message..."),disabled:n0.value},`
                `,42,Qr),[[oa,c0.value]]),p("input",{type:"file",class:"sr-only",accept:d1(),id:"file-upload",onChange:E0[12]||(E0[12]=L0=>h1(L0))},null,40,Wr)]),H0.value||B0.value?(z(),a0("div",Jr,[p("div",e2,[p("div",t2,[p("span",a2,[H0.value?(z(),a0("span",s2,n2)):I0("",!0),B0.value?(z(),a0("span",{key:1,onClick:q0},[S0.value?(z(),a0("svg",_2,u2)):(z(),a0("svg",i2,o2))])):I0("",!0)]),H0.value?(z(),a0("span",v2,A0(I1(K0.value)),1)):(z(),a0("span",h2,A0(I1(D0.value))+" / "+A0(I1(K0.value)),1))]),p("div",d2,[H0.value?(z(),a0("button",{key:0,onClick:M1,class:"p-2 rounded-full hover:bg-red-100",title:"Stop Recording"},m2)):I0("",!0),B0.value?(z(),a0("button",{key:1,onClick:Ye,class:"p-2 rounded-full hover:bg-red-100 text-red-500",title:"Delete Recording"},b2)):I0("",!0)])]),p("audio",{ref_key:"audioPlayer",ref:m0,src:B0.value,onEnded:E0[13]||(E0[13]=L0=>S0.value=!1),class:"hidden"},null,40,x2)])):I0("",!0),p("div",w2,[p("div",{onClick:E0[14]||(E0[14]=L0=>se()),class:"flex gap-x-1 text-sm items-center"},[y2,p("button",null,A0($0.$t("Templates")),1)]),S2,p("div",M2,[p("div",null,[p("button",{type:"button",class:"py-1",onClick:t1},R2),p("div",B2,[P0.value?(z(),a0("div",{key:0,class:"absolute left-0 bottom-full",ref_key:"emojiPickerRef",ref:we},[Ae(xe(Va),{native:!0,onSelect:a1})],512)):I0("",!0)])]),p("div",null,[p("label",{class:"py-1 cursor-pointer",onClick:E0[15]||(E0[15]=L0=>G.value.type="document"),for:"file-upload"},E2)]),p("div",null,[p("label",{onClick:E0[16]||(E0[16]=L0=>G.value.type="audio"),class:"py-1 cursor-pointer",for:"file-upload"},C2)]),p("div",null,[p("label",{onClick:E0[17]||(E0[17]=L0=>G.value.type="video"),class:"py-1 cursor-pointer",for:"file-upload"},L2)]),p("div",null,[p("label",{class:"py-1 cursor-pointer",onClick:E0[18]||(E0[18]=L0=>G.value.type="image"),for:"file-upload"},V2)])]),g2,!H0.value&&!B0.value?(z(),a0("button",{key:0,type:"button",class:"py-1 cursor-pointer relative",onClick:S1},$2)):I0("",!0),p("div",H2,[w0.value?(z(),a0("div",q2,[p("span",null,A0($0.$t("Searching for suggestions")),1),X2])):(z(),a0("button",{key:0,class:"text-[14px] flex items-center gap-2 hover:bg-gray-100 p-1 rounded-md",type:"button",onClick:E0[19]||(E0[19]=L0=>r1())},[F2,p("span",null,A0($0.$t("AI Assist")),1)]))]),p("div",D2,[p("button",{class:"flex items-center gap-x-2 p-1 px-2 rounded-md border border-gray-400 text-sm",disabled:(c0.value===null||c0.value.trim()==="")&&!ee.value.file},[p("span",{class:ke((c0.value===null||c0.value.trim()==="")&&!ee.value.file?"text-slate-300":"text-black")},"Send",2),p("div",null,[n0.value?(z(),a0("svg",j2,z2)):(z(),a0("svg",{key:0,class:ke((c0.value===null||c0.value.trim()==="")&&!ee.value.file?"text-slate-300":"text-black"),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Y2,2))])],8,Z2)])])])],32)):I0("",!0)],64))}},K2=$1(U2,[["__file","ChatForm.vue"]]),Q2={class:"h-20 bg-white border-b border-1 flex items-center justify-between px-4 md:px-4"},W2={class:"flex items-center gap-x-4 cursor-pointer w-3/4"},J2=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 24 24"},[p("path",{fill:"currentColor",d:"M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23a1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2"})],-1),en=["src"],tn={key:1,class:"rounded-full w-10 h-10 flex items-center justify-center bg-slate-100"},an={class:"flex items-center w-full gap-x-8"},sn={class:"w-full flex items-center text-xs"},rn={class:"flex items-center space-x-4"},nn=p("button",{type:"button",class:"inline-flex w-full justify-center items-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[p("span",{class:"bg-slate-200 p-1 rounded-full cursor-pointer flex items-center justify-center"},[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 6.75a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5Zm0 6a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5Zm0 6a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5Z"})])])],-1),ln={key:0,class:"flex justify-between items-center bg-white border-b border-1 py-2 px-4 md:px-4"},on=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24"},[p("path",{fill:"currentColor",d:"M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"})],-1),_n=[on],cn={class:"flex items-center gap-x-2"},un={class:"text-[13px]"},vn={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},hn={class:"mt-4 flex"},dn=["disabled"],fn={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},mn=p("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),pn=p("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[p("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),bn=[mn,pn],xn={key:1},wn={__name:"ChatHeader",props:["contact","displayContactInfo","ticketingIsEnabled","ticket","addon"],emits:["toggleView","deleteThread","closeThread"],setup(g,{emit:K}){var ee,P0,we,Ce,se,oe,ge;const Q=g,p0=Xt(()=>Xa().props.auth.user),n0=V0(!1),w0=V0(Q.displayContactInfo),c0=V0(null),H0=V0(!1),ne=V0({label:(ee=Q.ticket)!=null&&ee.user?(we=(P0=Q.ticket)==null?void 0:P0.user)==null?void 0:we.full_name:dr("Unassigned"),value:(Ce=Q.ticket)!=null&&Ce.user?(oe=(se=Q.ticket)==null?void 0:se.user)==null?void 0:oe.id:0});qa(()=>{var W0;w0.value=Q.displayContactInfo,c0.value=(W0=Q.ticket)==null?void 0:W0.status});const K0=K,j0=()=>{w0.value=!w0.value,K0("toggleView",w0.value)},D0=()=>{yt.visit("/chats/"+Q.contact.uuid,{method:"delete",onFinish:()=>{n0.value=!1}})};na({status:c0});const Z0=na({notes:null,contact:null}),z0=na({ai_assistant:(ge=Q.contact)==null?void 0:ge.ai_assistance_enabled}),B0=W0=>{yt.put("/tickets/"+Q.contact.uuid+"/update",{status:W0},{})},S0=()=>{yt.put("/tickets/"+Q.contact.uuid+"/assign",{id:ne.value.value},{})};function m0(W0,Q0){fetch("/team?search="+W0,{headers:{Accept:"application/json"}}).then(ie=>ie.json()).then(ie=>{Q0(ie.rows)}).catch(ie=>{console.error("Error fetching agents:",ie)})}const r0=()=>{Z0.contact=Q.contact.uuid,Z0.post("/notes",{preserveState:!1,onSuccess:()=>{Z0.reset(),H0.value=!1}})},G=()=>{z0.ai_assistant=!z0.ai_assistant,z0.post("/automation/contact/"+Q.contact.uuid,{preserveState:!0})};return(W0,Q0)=>(z(),a0(u1,null,[p("div",Q2,[p("div",W2,[Ae(xe(nt),{href:"/chats",class:"sm:block md:hidden"},{default:Ve(()=>[J2]),_:1}),p("div",{onClick:j0},[g.contact.avatar?(z(),a0("img",{key:0,class:"rounded-full w-14 h-14",src:g.contact.avatar},null,8,en)):(z(),a0("div",tn,A0(g.contact.full_name.substring(0,1)),1))]),p("div",an,[p("div",null,[p("div",{class:"flex items-center",onClick:j0},[p("span",null,A0(g.contact.full_name),1)]),p("div",sn,[p("span",{onClick:j0},A0(g.contact.formatted_phone_number),1)])]),g.ticketingIsEnabled&&p0.value.teams[0].role!="agent"?(z(),v1(vr,{key:0,modelValue:ne.value,"onUpdate:modelValue":[Q0[0]||(Q0[0]=ie=>ne.value=ie),Q0[1]||(Q0[1]=ie=>S0())],name:"",loadOptions:m0,class:ke("col-span-1 md:block hidden"),placeholder:"Select Agent"},null,8,["modelValue"])):I0("",!0)])]),p("div",null,[p("div",rn,[c0.value==="open"&&g.ticketingIsEnabled?(z(),a0("button",{key:0,onClick:Q0[2]||(Q0[2]=ie=>B0("closed")),class:"text-sm md:inline-flex hidden justify-center rounded-md border border-transparent bg-red-800 px-4 py-1 text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},A0(W0.$t("Mark as closed")),1)):I0("",!0),c0.value==="closed"&&g.ticketingIsEnabled?(z(),a0("button",{key:1,onClick:Q0[3]||(Q0[3]=ie=>B0("open")),class:"text-sm md:inline-flex hidden justify-center rounded-md border border-transparent bg-primary px-4 py-1 text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},A0(W0.$t("Mark as open")),1)):I0("",!0),w0.value?(z(),a0("div",{key:3,onClick:j0,class:"bg-slate-200 p-2 rounded-lg text-sm cursor-pointer"},[p("span",null,A0(W0.$t("Back")),1)])):(z(),v1(cr,{key:2},{items:Ve(()=>[Ae(ur,null,{default:Ve(()=>[Ae(Ft,{onClick:Q0[4]||(Q0[4]=ie=>{H0.value=!0}),as:"button"},{default:Ve(()=>[He(A0(W0.$t("Add notes")),1)]),_:1}),c0.value==="open"&&g.ticketingIsEnabled?(z(),v1(Ft,{key:0,onClick:Q0[5]||(Q0[5]=ie=>B0("closed")),as:"button"},{default:Ve(()=>[He(A0(W0.$t("Mark as closed")),1)]),_:1})):I0("",!0),c0.value==="closed"&&g.ticketingIsEnabled?(z(),v1(Ft,{key:1,onClick:Q0[6]||(Q0[6]=ie=>B0("open")),as:"button"},{default:Ve(()=>[He(A0(W0.$t("Mark as open")),1)]),_:1})):I0("",!0),Ae(Ft,{onClick:Q0[7]||(Q0[7]=ie=>n0.value=!0),as:"button"},{default:Ve(()=>[He(A0(W0.$t("Clear chat")),1)]),_:1})]),_:1})]),default:Ve(()=>[nn]),_:1}))])])]),g.addon==1?(z(),a0("div",ln,[p("div",{class:ke(["text-sm py-1 px-3 rounded-md flex items-center gap-x-2 w-[fit-content]",xe(z0).ai_assistant?"bg-green-50":"bg-red-50"])},[p("span",{class:ke(xe(z0).ai_assistant?"text-green-500":"text-red-500")},_n,2),p("span",null,A0(W0.$t("AI Assistant")),1)],2),p("div",cn,[p("span",un,A0(W0.$t("Enable/disable AI assistant")),1),p("div",{class:ke(["w-12 h-6 flex items-center bg-gray-300 rounded-full p-1 cursor-pointer",{"bg-primary":xe(z0).ai_assistant}]),onClick:Q0[8]||(Q0[8]=ie=>G())},[p("div",{class:ke(["bg-white w-4 h-4 rounded-full shadow-md transform duration-300 ease-in-out",{"translate-x-6":xe(z0).ai_assistant}])},null,2)],2)])])):I0("",!0),Ae(Ya,{label:"Add Note",isOpen:H0.value},{default:Ve(()=>[p("div",vn,[p("form",{onSubmit:Q0[11]||(Q0[11]=W1(ie=>r0(),["prevent"])),class:""},[Ae(hr,{modelValue:xe(Z0).notes,"onUpdate:modelValue":Q0[9]||(Q0[9]=ie=>xe(Z0).notes=ie),error:xe(Z0).errors.note,name:"",class:ke("col-span-2")},null,8,["modelValue","error"]),p("div",hn,[p("button",{type:"button",onClick:Q0[10]||(Q0[10]=W1(ie=>H0.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},A0(W0.$t("Cancel")),1),p("button",{class:ke(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":xe(Z0).processing}]),disabled:xe(Z0).processing},[xe(Z0).processing?(z(),a0("svg",fn,bn)):(z(),a0("span",xn,A0(W0.$t("Save")),1))],10,dn)])],32)])]),_:1},8,["isOpen"]),Ae(_r,{modelValue:n0.value,"onUpdate:modelValue":Q0[12]||(Q0[12]=ie=>n0.value=ie),label:W0.$t("Clear chat"),description:W0.$t("Are you sure you want to delete this thread? You can't undo this action"),onConfirm:D0},null,8,["modelValue","label","description"])],64))}},yn=$1(wn,[["__file","ChatHeader.vue"]]),Sn={class:"relative text-sm"},Mn={class:"cursor-pointer flex items-center space-x-1 bg-slate-50 w-[fit-content] h-[fit-content] rounded-md p-1 px-2 text-sm"},An={class:"capitalize"},Rn={class:"text-slate-500"},Bn=p("span",null,[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("path",{fill:"currentColor","fill-rule":"evenodd",d:"M16.53 8.97a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06L12 12.44l3.47-3.47a.75.75 0 0 1 1.06 0","clip-rule":"evenodd"})])],-1),Tn={key:0,class:"absolute bg-white z-10 px-1 py-2 mt-2 shadow w-full rounded-md text-black"},En={__name:"TicketStatusToggle",props:{languages:Object,currentLanguage:String,status:String,rowCount:Number},setup(g){const K=g,Q=V0(!1),p0=()=>{Q.value=!Q.value},n0=c0=>{Q.value&&!c0.target.closest(".status-dd")&&(Q.value=!1)},w0=c0=>c0?c0.charAt(0).toUpperCase()+c0.slice(1):"";return At(()=>{document.body.addEventListener("click",n0)}),Da(()=>{document.body.removeEventListener("click",n0)}),(c0,H0)=>(z(),a0("div",Sn,[p("div",{onClick:H0[0]||(H0[0]=ne=>p0()),class:"status-dd"},[p("div",Mn,[p("span",An,A0(c0.$t(w0(K.status))),1),p("span",Rn,A0(K.rowCount),1),Bn])]),Q.value?(z(),a0("div",Tn,[p("div",null,[Ae(xe(nt),{href:"/chats?status=unassigned",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:Ve(()=>[He(A0(c0.$t("Unassigned")),1)]),_:1}),Ae(xe(nt),{href:"/chats?status=open",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:Ve(()=>[He(A0(c0.$t("Open")),1)]),_:1}),Ae(xe(nt),{href:"/chats?status=closed",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:Ve(()=>[He(A0(c0.$t("Closed")),1)]),_:1}),Ae(xe(nt),{href:"/chats?status=all",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:Ve(()=>[He(A0(c0.$t("All")),1)]),_:1})])])):I0("",!0)]))}},kn=$1(En,[["__file","TicketStatusToggle.vue"]]),Cn={class:"text-sm"},In={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},Ln=p("path",{fill:"currentColor",d:"M3.5 13.5a.5.5 0 0 1-1 0V4.707L1.354 5.854a.5.5 0 1 1-.708-.708l2-1.999l.007-.007a.5.5 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L3.5 4.707zm4-9.5a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1zm0 3a.5.5 0 0 1 0-1h3a.5.5 0 0 1 0 1zm0 3a.5.5 0 0 1 0-1h5a.5.5 0 0 1 0 1zM7 12.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5"},null,-1),On=[Ln],Vn={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},gn=p("path",{fill:"currentColor",d:"M3.5 2.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999l.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 11.293zm3.5 1a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5M7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"},null,-1),Nn=[gn],$n={key:0,class:"absolute bg-white z-10 px-1 py-2 mt-2 shadow w-[7em] rounded-md text-black"},Hn={__name:"SortDirectionToggle",props:{direction:String,url:String},setup(g){const K=g,Q=V0(!1),p0=()=>{Q.value=!Q.value},n0=c0=>{Q.value&&!c0.target.closest(".sort-dd")&&(Q.value=!1)};At(()=>{document.body.addEventListener("click",n0)}),Da(()=>{document.body.removeEventListener("click",n0)});const w0=c0=>{yt.post(K.url,{sort:c0},{preserveState:!1})};return(c0,H0)=>(z(),a0("div",Cn,[p("span",{onClick:H0[0]||(H0[0]=ne=>p0()),class:"cursor-pointer hover:bg-slate-50 p-1 rounded-full sort-dd block"},[g.direction=="desc"?(z(),a0("svg",In,On)):(z(),a0("svg",Vn,Nn))]),Q.value?(z(),a0("div",$n,[p("div",null,[p("div",{onClick:H0[1]||(H0[1]=ne=>w0("desc")),class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"}," Newest "),p("div",{onClick:H0[2]||(H0[2]=ne=>w0("asc")),class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"}," Oldest ")])])):I0("",!0)]))}},Fn=$1(Hn,[["__file","SortDirectionToggle.vue"]]),qn={class:"px-4 py-4 border-b"},Xn={class:"flex items-center justify-between space-x-1 text-xl"},Dn={class:"flex space-x-1"},Zn={class:"text-slate-500"},Pn={class:"bg-slate-50 rounded-md mt-3 flex items-center py-[2px]"},Yn=p("div",{class:"pl-3 py-2"},[p("svg",{class:"text-slate-600",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10a7 7 0 1 0 14 0a7 7 0 1 0-14 0m18 11l-6-6"})])],-1),jn=["placeholder"],Gn=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2zm3.7 12.3c.4.4.4 1 0 1.4c-.4.4-1 .4-1.4 0L12 13.4l-2.3 2.3c-.4.4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4l2.3-2.3l-2.3-2.3c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0l2.3 2.3l2.3-2.3c.4-.4 1-.4 1.4 0c.4.4.4 1 0 1.4L13.4 12l2.3 2.3z"})],-1),zn=[Gn],Un={key:1,class:"pr-2"},Kn=Qe('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"></animateTransform><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"></animateTransform><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"></animateTransform><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle></svg>',1),Qn=[Kn],Wn={key:0,class:"grid grid-cols-2 mt-4 items-center w-full"},Jn={class:"flex ml-auto gap-x-1"},ei={class:"flex-grow overflow-y-auto h-[65vh]",ref:"scrollContainer"},ti={class:"flex space-x-2 hover:bg-gray-50 cursor-pointer py-3 px-4"},ai={class:"w-[15%]"},si=["src"],ri={key:1,class:"rounded-full w-10 h-10 flex items-center justify-center bg-slate-200 capitalize"},ni={class:"w-[85%]"},ii={class:"flex justify-between"},li={class:"truncate"},oi={class:"self-center text-slate-500 text-xs"},_i={key:0,class:"flex justify-between"},ci={key:0,class:"text-slate-500 text-xs truncate self-end"},ui={key:1,class:"text-slate-500 text-xs truncate self-end"},vi={key:2,class:"text-slate-500 text-xs truncate self-end"},hi={key:3,class:"text-slate-500 text-xs truncate self-end"},di={class:"flex items-center"},fi=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[p("path",{fill:"currentColor",d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.9 13.98l2.1 2.53l3.1-3.99c.2-.26.6-.26.8.01l3.51 4.68a.5.5 0 0 1-.4.8H6.02c-.42 0-.65-.48-.39-.81L8.12 14c.19-.26.57-.27.78-.02z"})],-1),mi={class:"ml-2"},pi={key:4,class:"text-slate-500 text-xs truncate self-end"},bi={class:"flex items-center"},xi=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[p("path",{fill:"currentColor","fill-rule":"evenodd",d:"M14.25 2.5a.25.25 0 0 0-.25-.25H7A2.75 2.75 0 0 0 4.25 5v14A2.75 2.75 0 0 0 7 21.75h10A2.75 2.75 0 0 0 19.75 19V9.147a.25.25 0 0 0-.25-.25H15a.75.75 0 0 1-.75-.75V2.5Zm.75 9.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h6Zm0 4a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h6Z","clip-rule":"evenodd"}),p("path",{fill:"currentColor",d:"M15.75 2.824c0-.184.193-.301.336-.186c.121.098.23.212.323.342l3.013 4.197c.068.096-.006.22-.124.22H16a.25.25 0 0 1-.25-.25V2.824Z"})],-1),wi={class:"ml-2"},yi={key:5,class:"text-slate-500 text-xs truncate self-end"},Si={class:"flex items-center"},Mi=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[p("path",{fill:"currentColor",d:"M3.5 2.5A2.5 2.5 0 0 0 1 5v6a2.5 2.5 0 0 0 2.5 2.5h5A2.5 2.5 0 0 0 11 11V5a2.5 2.5 0 0 0-2.5-2.5h-5Zm10.684 1.61L12 5.893v4.215l2.184 1.78a.5.5 0 0 0 .816-.389v-7a.5.5 0 0 0-.816-.387Z"})],-1),Ai={class:"ml-2"},Ri={key:6,class:"text-slate-500 text-xs truncate self-end"},Bi={class:"flex items-center"},Ti=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 512 512"},[p("path",{fill:"currentColor",d:"M256 80C149.9 80 62.4 159.4 49.6 262c9.4-3.8 19.6-6 30.4-6c26.5 0 48 21.5 48 48v128c0 26.5-21.5 48-48 48c-44.2 0-80-35.8-80-80V288C0 146.6 114.6 32 256 32s256 114.6 256 256v112c0 44.2-35.8 80-80 80c-26.5 0-48-21.5-48-48V304c0-26.5 21.5-48 48-48c10.8 0 21 2.1 30.4 6C449.6 159.4 362.1 80 256 80z"})],-1),Ei={class:"ml-2"},ki={key:7,class:"text-slate-500 text-xs truncate self-end"},Ci={class:"flex items-center"},Ii=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 256 256"},[p("path",{fill:"currentColor",d:"M168 32H88a56.06 56.06 0 0 0-56 56v80a56.06 56.06 0 0 0 56 56h48a8.07 8.07 0 0 0 2.53-.41c26.23-8.75 76.31-58.83 85.06-85.06A8.07 8.07 0 0 0 224 136V88a56.06 56.06 0 0 0-56-56Zm-32 175.42V176a40 40 0 0 1 40-40h31.42c-9.26 21.55-49.87 62.16-71.42 71.42Z"})],-1),Li={class:"ml-2"},Oi={key:8,class:"text-slate-500 text-xs truncate self-end"},Vi={class:"flex items-center"},gi=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[p("path",{fill:"currentColor",d:"M3 14s-1 0-1-1s1-4 6-4s6 3 6 4s-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"})],-1),Ni={class:"ml-2"},$i={key:9,class:"text-slate-500 text-xs truncate self-end"},Hi={class:"flex items-center"},Fi=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[p("path",{fill:"currentColor",d:"M9.156 14.544C10.899 13.01 14 9.876 14 7A6 6 0 0 0 2 7c0 2.876 3.1 6.01 4.844 7.544a1.736 1.736 0 0 0 2.312 0ZM6 7a2 2 0 1 1 4 0a2 2 0 0 1-4 0Z"})],-1),qi={class:"ml-2"},Xi={key:10,class:"bg-green-600 text-white rounded-md py-[1px] px-[8px] min-w-10 text-[10px] flex items-center justify-center"},Di={class:"px-4 pb-4"},Zi={__name:"ChatTable",props:{rows:{type:Object,required:!0},filters:{type:Object},rowCount:{type:Number,required:!0},ticketingIsEnabled:{type:Boolean},status:{type:String},chatSortDirection:{type:String}},emits:["view"],setup(g,{emit:K}){const Q=g,p0=V0(!1);V0(null);const n0=S0=>JSON.parse(S0).type,w0=S0=>JSON.parse(S0),c0=S0=>({"text/plain":"TXT","application/pdf":"PDF","application/vnd.ms-powerpoint":"PPT","application/msword":"DOC","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOCX","application/vnd.openxmlformats-officedocument.presentationml.presentation":"PPTX","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLSX"})[S0]||"Unknown",H0=S0=>{const m0=JSON.parse(S0).contacts;if(m0.length===1){const r0=m0[0];return r0.name.formatted_name||`${r0.name.first_name} ${r0.name.last_name}`}else if(m0.length>1){const r0=m0[0].name.first_name,G=m0.length-1;return`${r0} and ${G} other contacts`}else return"No contacts available"},ne=S0=>{if(S0){const m0=new Date,r0=new Date(S0);if(r0.getDate()===m0.getDate()&&r0.getMonth()===m0.getMonth()&&r0.getFullYear()===m0.getFullYear())return K0(r0,"h:mm a");const G=new Date;return G.setDate(m0.getDate()-1),r0.getDate()===G.getDate()&&r0.getMonth()===G.getMonth()&&r0.getFullYear()===G.getFullYear()?"Yesterday":K0(r0,"d/m/y")}else return"Invalid time"},K0=(S0,m0)=>{let r0=null;return m0==="h:mm a"?r0={hour12:!0,hour:"numeric",minute:"numeric"}:r0={day:"numeric",month:"numeric",year:"numeric"},new Intl.DateTimeFormat("en-US",r0).format(S0)},j0=window.location.search;Mt(()=>j0,(S0,m0)=>{console.log("Query parameters changed:",S0)});const D0=V0({search:Q.filters.search}),Z0=fr(()=>{p0.value=!0,z0()},1e3),z0=()=>{const S0=window.location.pathname;yt.visit(S0,{method:"get",data:D0.value})},B0=()=>{D0.value.search=null,z0()};return(S0,m0)=>(z(),a0(u1,null,[p("div",qn,[p("div",Xn,[p("div",Dn,[p("h2",null,A0(S0.$t("Chats")),1),p("span",Zn,A0(g.rowCount),1)])]),p("div",Pn,[Yn,la(p("input",{onInput:m0[0]||(m0[0]=(...r0)=>xe(Z0)&&xe(Z0)(...r0)),"onUpdate:modelValue":m0[1]||(m0[1]=r0=>D0.value.search=r0),class:"w-full bg-slate-50 outline-none rounded-xl py-2 pl-2 mr-2 text-sm",type:"text",placeholder:S0.$t("Search name or number...")},null,40,jn),[[oa,D0.value.search]]),p0.value===!1&&D0.value.search?(z(),a0("button",{key:0,onClick:B0,type:"button",class:"pr-2"},zn)):I0("",!0),p0.value?(z(),a0("span",Un,Qn)):I0("",!0)]),g.ticketingIsEnabled?(z(),a0("div",Wn,[Ae(kn,{status:g.status,rowCount:g.rowCount},null,8,["status","rowCount"]),p("div",Jn,[Ae(Fn,{direction:Q.chatSortDirection,url:"/chats/update-sort-direction"},null,8,["direction"])])])):I0("",!0)]),p("div",ei,[(z(!0),a0(u1,null,K1(g.rows.data,(r0,G)=>(z(),v1(xe(nt),{href:"/chats/"+r0.uuid+"?page="+Q.rows.meta.current_page,class:ke(["block border-b group-hover:pr-0",r0.unread_messages>0?"bg-green-50":""]),key:G},{default:Ve(()=>{var ee,P0,we,Ce,se,oe,ge,W0,Q0,ie,Fe,h1,d1,t1,We,a1,s1,S1,M1,Ye,q0,f;return[p("div",ti,[p("div",ai,[r0.avatar?(z(),a0("img",{key:0,class:"rounded-full w-10 h-10",src:r0.avatar},null,8,si)):(z(),a0("div",ri,A0(r0.full_name.substring(0,1)),1))]),p("div",ni,[p("div",ii,[p("h3",li,A0(r0.full_name),1),p("span",oi,A0(ne((ee=r0==null?void 0:r0.last_chat)==null?void 0:ee.created_at)),1)]),((P0=r0==null?void 0:r0.last_chat)==null?void 0:P0.deleted_at)===null?(z(),a0("div",_i,[n0((we=r0==null?void 0:r0.last_chat)==null?void 0:we.metadata)==="text"?(z(),a0("div",ci,A0(w0((Ce=r0==null?void 0:r0.last_chat)==null?void 0:Ce.metadata).text.body),1)):I0("",!0),n0((se=r0==null?void 0:r0.last_chat)==null?void 0:se.metadata)==="button"?(z(),a0("div",ui,A0(w0((oe=r0==null?void 0:r0.last_chat)==null?void 0:oe.metadata).button.text),1)):I0("",!0),n0((ge=r0==null?void 0:r0.last_chat)==null?void 0:ge.metadata)==="interactive"?(z(),a0("div",vi,A0(((ie=(Q0=w0((W0=r0==null?void 0:r0.last_chat)==null?void 0:W0.metadata).interactive)==null?void 0:Q0.button_reply)==null?void 0:ie.title)||((d1=(h1=w0((Fe=r0==null?void 0:r0.last_chat)==null?void 0:Fe.metadata).interactive)==null?void 0:h1.list_reply)==null?void 0:d1.title)),1)):I0("",!0),n0((t1=r0==null?void 0:r0.last_chat)==null?void 0:t1.metadata)==="image"?(z(),a0("div",hi,[p("div",di,[fi,p("span",mi,A0(S0.$t("Photo")),1)])])):I0("",!0),n0((We=r0==null?void 0:r0.last_chat)==null?void 0:We.metadata)==="document"?(z(),a0("div",pi,[p("div",bi,[xi,p("span",wi,A0(c0((a1=r0==null?void 0:r0.last_chat)==null?void 0:a1.media.type))+" "+A0(S0.$t("File")),1)])])):I0("",!0),n0((s1=r0==null?void 0:r0.last_chat)==null?void 0:s1.metadata)==="video"?(z(),a0("div",yi,[p("div",Si,[Mi,p("span",Ai,A0(S0.$t("Video")),1)])])):I0("",!0),n0((S1=r0==null?void 0:r0.last_chat)==null?void 0:S1.metadata)==="audio"?(z(),a0("div",Ri,[p("div",Bi,[Ti,p("span",Ei,A0(S0.$t("Audio")),1)])])):I0("",!0),n0((M1=r0==null?void 0:r0.last_chat)==null?void 0:M1.metadata)==="sticker"?(z(),a0("div",ki,[p("div",Ci,[Ii,p("span",Li,A0(S0.$t("Sticker")),1)])])):I0("",!0),n0((Ye=r0==null?void 0:r0.last_chat)==null?void 0:Ye.metadata)==="contacts"?(z(),a0("div",Oi,[p("div",Vi,[gi,p("span",Ni,A0(H0((q0=r0==null?void 0:r0.last_chat)==null?void 0:q0.metadata)),1)])])):I0("",!0),n0((f=r0==null?void 0:r0.last_chat)==null?void 0:f.metadata)==="location"?(z(),a0("div",$i,[p("div",Hi,[Fi,p("span",qi,A0(S0.$t("Location")),1)])])):I0("",!0),r0.unread_messages>0?(z(),a0("span",Xi,A0(r0.unread_messages),1)):I0("",!0)])):I0("",!0)])])]}),_:2},1032,["href","class"]))),128))],512),p("div",Di,[Ae(mr,{class:"mt-3",pagination:g.rows.meta},null,8,["pagination"])])],64))}},Pi=$1(Zi,[["__file","ChatTable.vue"]]);(function(){try{if(typeof document<"u"){var g=document.createElement("style");g.appendChild(document.createTextNode(".mapdiv[data-v-174b771e]{width:100%;height:100%}.info-window-wrapper[data-v-90174664]{display:none}.mapdiv .info-window-wrapper[data-v-90174664]{display:inline-block}.custom-marker-wrapper[data-v-2d2d343a]{display:none}.mapdiv .custom-marker-wrapper[data-v-2d2d343a]{display:inline-block}")),document.head.appendChild(g)}}catch(K){console.error("vite-plugin-css-injected-by-js",K)}})();var Yi=Object.defineProperty,ji=(g,K,Q)=>K in g?Yi(g,K,{enumerable:!0,configurable:!0,writable:!0,value:Q}):g[K]=Q,ga=(g,K,Q)=>(ji(g,typeof K!="symbol"?K+"":K,Q),Q);const Ga=Symbol("map"),za=Symbol("api"),Gi=Symbol("marker"),zi=Symbol("markerCluster"),ua=Symbol("CustomMarker"),Ui=Symbol("mapTilesLoaded"),Ua=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ki(g,K,Q,p0){function n0(w0){return w0 instanceof Q?w0:new Q(function(c0){c0(w0)})}return new(Q||(Q=Promise))(function(w0,c0){function H0(j0){try{K0(p0.next(j0))}catch(D0){c0(D0)}}function ne(j0){try{K0(p0.throw(j0))}catch(D0){c0(D0)}}function K0(j0){j0.done?w0(j0.value):n0(j0.value).then(H0,ne)}K0((p0=p0.apply(g,K||[])).next())})}var Qi=function g(K,Q){if(K===Q)return!0;if(K&&Q&&typeof K=="object"&&typeof Q=="object"){if(K.constructor!==Q.constructor)return!1;var p0,n0,w0;if(Array.isArray(K)){if(p0=K.length,p0!=Q.length)return!1;for(n0=p0;n0--!==0;)if(!g(K[n0],Q[n0]))return!1;return!0}if(K.constructor===RegExp)return K.source===Q.source&&K.flags===Q.flags;if(K.valueOf!==Object.prototype.valueOf)return K.valueOf()===Q.valueOf();if(K.toString!==Object.prototype.toString)return K.toString()===Q.toString();if(w0=Object.keys(K),p0=w0.length,p0!==Object.keys(Q).length)return!1;for(n0=p0;n0--!==0;)if(!Object.prototype.hasOwnProperty.call(Q,w0[n0]))return!1;for(n0=p0;n0--!==0;){var c0=w0[n0];if(!g(K[c0],Q[c0]))return!1}return!0}return K!==K&&Q!==Q};const Na="__googleMapsScriptId";var it;(function(g){g[g.INITIALIZED=0]="INITIALIZED",g[g.LOADING=1]="LOADING",g[g.SUCCESS=2]="SUCCESS",g[g.FAILURE=3]="FAILURE"})(it||(it={}));class Q1{constructor({apiKey:K,authReferrerPolicy:Q,channel:p0,client:n0,id:w0=Na,language:c0,libraries:H0=[],mapIds:ne,nonce:K0,region:j0,retries:D0=3,url:Z0="https://maps.googleapis.com/maps/api/js",version:z0}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=K,this.authReferrerPolicy=Q,this.channel=p0,this.client=n0,this.id=w0||Na,this.language=c0,this.libraries=H0,this.mapIds=ne,this.nonce=K0,this.region=j0,this.retries=D0,this.url=Z0,this.version=z0,Q1.instance){if(!Qi(this.options,Q1.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Q1.instance.options)}`);return Q1.instance}Q1.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?it.FAILURE:this.done?it.SUCCESS:this.loading?it.LOADING:it.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let K=this.url;return K+="?callback=__googleMapsCallback",this.apiKey&&(K+=`&key=${this.apiKey}`),this.channel&&(K+=`&channel=${this.channel}`),this.client&&(K+=`&client=${this.client}`),this.libraries.length>0&&(K+=`&libraries=${this.libraries.join(",")}`),this.language&&(K+=`&language=${this.language}`),this.region&&(K+=`&region=${this.region}`),this.version&&(K+=`&v=${this.version}`),this.mapIds&&(K+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(K+=`&auth_referrer_policy=${this.authReferrerPolicy}`),K}deleteScript(){const K=document.getElementById(this.id);K&&K.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((K,Q)=>{this.loadCallback(p0=>{p0?Q(p0.error):K(window.google)})})}importLibrary(K){return this.execute(),google.maps.importLibrary(K)}loadCallback(K){this.callbacks.push(K),this.execute()}setScript(){var K,Q;if(document.getElementById(this.id)){this.callback();return}const p0={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(p0).forEach(w0=>!p0[w0]&&delete p0[w0]),!((Q=(K=window==null?void 0:window.google)===null||K===void 0?void 0:K.maps)===null||Q===void 0)&&Q.importLibrary||(w0=>{let c0,H0,ne,K0="The Google Maps JavaScript API",j0="google",D0="importLibrary",Z0="__ib__",z0=document,B0=window;B0=B0[j0]||(B0[j0]={});const S0=B0.maps||(B0.maps={}),m0=new Set,r0=new URLSearchParams,G=()=>c0||(c0=new Promise((ee,P0)=>Ki(this,void 0,void 0,function*(){var we;yield H0=z0.createElement("script"),H0.id=this.id,r0.set("libraries",[...m0]+"");for(ne in w0)r0.set(ne.replace(/[A-Z]/g,Ce=>"_"+Ce[0].toLowerCase()),w0[ne]);r0.set("callback",j0+".maps."+Z0),H0.src=this.url+"?"+r0,S0[Z0]=ee,H0.onerror=()=>c0=P0(Error(K0+" could not load.")),H0.nonce=this.nonce||((we=z0.querySelector("script[nonce]"))===null||we===void 0?void 0:we.nonce)||"",z0.head.append(H0)})));S0[D0]?console.warn(K0+" only loads once. Ignoring:",w0):S0[D0]=(ee,...P0)=>m0.add(ee)&&G().then(()=>S0[D0](ee,...P0))})(p0);const n0=this.libraries.map(w0=>this.importLibrary(w0));n0.length||n0.push(this.importLibrary("core")),Promise.all(n0).then(()=>this.callback(),w0=>{const c0=new ErrorEvent("error",{error:w0});this.loadErrorCallback(c0)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(K){if(this.errors.push(K),this.errors.length<=this.retries){const Q=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${Q} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},Q)}else this.onerrorEvent=K,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(K=>{K(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function Wi(g){return class extends g.OverlayView{constructor(K){super(),ga(this,"element"),ga(this,"opts");const{element:Q,...p0}=K;this.element=Q,this.opts=p0,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof g.LatLng?this.opts.position:new g.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;const K=this.element;return K.style.display!=="none"&&K.style.visibility!=="hidden"&&(K.style.opacity===""||Number(K.style.opacity)>.01)}onAdd(){if(!this.element)return;const K=this.getPanes();K&&K.overlayMouseTarget.appendChild(this.element)}draw(){if(!this.element)return;const K=this.getProjection(),Q=K==null?void 0:K.fromLatLngToDivPixel(this.getPosition());if(Q){this.element.style.position="absolute";const p0=this.element.offsetHeight,n0=this.element.offsetWidth;let w0,c0;switch(this.opts.anchorPoint){case"TOP_CENTER":w0=Q.x-n0/2,c0=Q.y;break;case"BOTTOM_CENTER":w0=Q.x-n0/2,c0=Q.y-p0;break;case"LEFT_CENTER":w0=Q.x,c0=Q.y-p0/2;break;case"RIGHT_CENTER":w0=Q.x-n0,c0=Q.y-p0/2;break;case"TOP_LEFT":w0=Q.x,c0=Q.y;break;case"TOP_RIGHT":w0=Q.x-n0,c0=Q.y;break;case"BOTTOM_LEFT":w0=Q.x,c0=Q.y-p0;break;case"BOTTOM_RIGHT":w0=Q.x-n0,c0=Q.y-p0;break;default:w0=Q.x-n0/2,c0=Q.y-p0/2}this.element.style.left=w0+"px",this.element.style.top=c0+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}onRemove(){this.element&&this.element.remove()}setOptions(K){const{element:Q,...p0}=K;this.element=Q,this.opts=p0,this.draw()}}}let $a;const Ha=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","heading_changed","idle","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","resize","rightclick","tilesloaded","tilt_changed","zoom_changed"],Ji=Za({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:Ha,setup(g,{emit:K}){const Q=V0(),p0=V0(!1),n0=V0(),w0=V0(),c0=V0(!1);qt(Ga,n0),qt(za,w0),qt(Ui,c0);const H0=()=>{const D0={...g};Object.keys(D0).forEach(B0=>{D0[B0]===void 0&&delete D0[B0]});const Z0=B0=>{var S0;return B0?{position:(S0=w0.value)==null?void 0:S0.ControlPosition[B0]}:{}},z0={scaleControlOptions:g.scaleControlStyle?{style:g.scaleControlStyle}:{},panControlOptions:Z0(g.panControlPosition),zoomControlOptions:Z0(g.zoomControlPosition),rotateControlOptions:Z0(g.rotateControlPosition),streetViewControlOptions:Z0(g.streetViewControlPosition),fullscreenControlOptions:Z0(g.fullscreenControlPosition),disableDefaultUI:g.disableDefaultUi};return{...D0,...z0}},ne=Mt([w0,n0],([D0,Z0])=>{const z0=D0,B0=Z0;z0&&B0&&(z0.event.addListenerOnce(B0,"tilesloaded",()=>{c0.value=!0}),setTimeout(ne,0))},{immediate:!0}),K0=()=>{try{const{apiKey:D0,region:Z0,version:z0,language:B0,libraries:S0}=g;$a=new Q1({apiKey:D0,region:Z0,version:z0,language:B0,libraries:S0})}catch(D0){console.error(D0)}},j0=D0=>{w0.value=St(D0.maps),n0.value=St(new D0.maps.Map(Q.value,H0()));const Z0=Wi(w0.value);w0.value[ua]=Z0,Ha.forEach(B0=>{var S0;(S0=n0.value)==null||S0.addListener(B0,m0=>K(B0,m0))}),p0.value=!0;const z0=Object.keys(g).filter(B0=>!["apiPromise","apiKey","version","libraries","region","language","center","zoom"].includes(B0)).map(B0=>Pa(g,B0));Mt([()=>g.center,()=>g.zoom,...z0],([B0,S0],[m0,r0])=>{var G,ee,P0;const{center:we,zoom:Ce,...se}=H0();(G=n0.value)==null||G.setOptions(se),S0!==void 0&&S0!==r0&&((ee=n0.value)==null||ee.setZoom(S0));const oe=!m0||B0.lng!==m0.lng||B0.lat!==m0.lat;B0&&oe&&((P0=n0.value)==null||P0.panTo(B0))})};return At(()=>{g.apiPromise&&g.apiPromise instanceof Promise?g.apiPromise.then(j0):(K0(),$a.load().then(j0))}),ca(()=>{var D0;c0.value=!1,n0.value&&((D0=w0.value)==null||D0.event.clearInstanceListeners(n0.value))}),{mapRef:Q,ready:p0,map:n0,api:w0,mapTilesLoaded:c0}}}),el=(g,K)=>{const Q=g.__vccOpts||g;for(const[p0,n0]of K)Q[p0]=n0;return Q},tl={ref:"mapRef",class:"mapdiv"};function al(g,K,Q,p0,n0,w0){return z(),a0("div",null,[p("div",tl,null,512),sr(g.$slots,"default",rr(nr({ready:g.ready,map:g.map,api:g.api,mapTilesLoaded:g.mapTilesLoaded})),void 0,!0)])}const sl=el(Ji,[["render",al],["__scopeId","data-v-174b771e"]]);function rl(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var nl=function g(K,Q){if(K===Q)return!0;if(K&&Q&&typeof K=="object"&&typeof Q=="object"){if(K.constructor!==Q.constructor)return!1;var p0,n0,w0;if(Array.isArray(K)){if(p0=K.length,p0!=Q.length)return!1;for(n0=p0;n0--!==0;)if(!g(K[n0],Q[n0]))return!1;return!0}if(K.constructor===RegExp)return K.source===Q.source&&K.flags===Q.flags;if(K.valueOf!==Object.prototype.valueOf)return K.valueOf()===Q.valueOf();if(K.toString!==Object.prototype.toString)return K.toString()===Q.toString();if(w0=Object.keys(K),p0=w0.length,p0!==Object.keys(Q).length)return!1;for(n0=p0;n0--!==0;)if(!Object.prototype.hasOwnProperty.call(Q,w0[n0]))return!1;for(n0=p0;n0--!==0;){var c0=w0[n0];if(!g(K[c0],Q[c0]))return!1}return!0}return K!==K&&Q!==Q};const il=rl(nl),ll=g=>g==="Marker",ol=g=>g===ua,_l=(g,K,Q,p0)=>{const n0=V0(),w0=ia(Ga,V0()),c0=ia(za,V0()),H0=ia(zi,V0()),ne=Xt(()=>!!(H0.value&&c0.value&&(n0.value instanceof c0.value.Marker||n0.value instanceof c0.value[ua])));return Mt([w0,Q],(K0,[j0,D0])=>{var Z0,z0,B0;const S0=!il(Q.value,D0)||w0.value!==j0;!w0.value||!c0.value||!S0||(n0.value?(n0.value.setOptions(Q.value),ne.value&&((Z0=H0.value)==null||Z0.removeMarker(n0.value),(z0=H0.value)==null||z0.addMarker(n0.value))):(ll(g)?n0.value=St(new c0.value[g](Q.value)):ol(g)?n0.value=St(new c0.value[g](Q.value)):n0.value=St(new c0.value[g]({...Q.value,map:w0.value})),ne.value?(B0=H0.value)==null||B0.addMarker(n0.value):n0.value.setMap(w0.value),K.forEach(m0=>{var r0;(r0=n0.value)==null||r0.addListener(m0,G=>p0(m0,G))})))},{immediate:!0}),ca(()=>{var K0,j0;n0.value&&((K0=c0.value)==null||K0.event.clearInstanceListeners(n0.value),ne.value?(j0=H0.value)==null||j0.removeMarker(n0.value):n0.value.setMap(null))}),n0},Fa=["animation_changed","click","dblclick","rightclick","dragstart","dragend","drag","mouseover","mousedown","mouseout","mouseup","draggable_changed","clickable_changed","contextmenu","cursor_changed","flat_changed","rightclick","zindex_changed","icon_changed","position_changed","shape_changed","title_changed","visible_changed"],cl=Za({name:"Marker",props:{options:{type:Object,required:!0}},emits:Fa,setup(g,{emit:K,expose:Q,slots:p0}){const n0=Pa(g,"options"),w0=_l("Marker",Fa,n0,K);return qt(Gi,w0),Q({marker:w0}),()=>{var c0;return(c0=p0.default)==null?void 0:c0.call(p0)}}});Ua.concat(["bounds_changed"]);Ua.concat(["center_changed","radius_changed"]);var _a;(function(g){g.CLUSTERING_BEGIN="clusteringbegin",g.CLUSTERING_END="clusteringend",g.CLUSTER_CLICK="click"})(_a||(_a={}));Object.values(_a);const ul={key:0,class:"max-w-[300px]"},vl={class:"normal-case whitespace-pre-wrap"},hl={key:0,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},dl={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},fl=p("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1),ml=[fl],pl={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},bl=p("g",{fill:"none"},[p("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),p("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1),xl=[bl],wl=["src"],yl=["src"],Sl={key:1,class:"max-w-[300px]"},Ml=p("span",{class:"text-red-500"},[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"})])],-1),Al={class:"normal-case whitespace-pre-wrap"},Rl={class:"normal-case whitespace-pre-wrap"},Bl={key:2,class:"max-w-[300px]"},Tl={class:"normal-case whitespace-pre-wrap"},El={key:3,class:"max-w-[300px]"},kl={key:0},Cl={class:"normal-case whitespace-pre-wrap"},Il={key:1,class:"normal-case whitespace-pre-wrap"},Ll={key:2,class:"normal-case whitespace-pre-wrap"},Ol={key:4},Vl=["src"],gl={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},Nl=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("g",{fill:"none"},[p("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),p("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1),$l={key:2,class:"max-w-[300px]"},Hl={key:3,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},Fl={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},ql=p("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1),Xl=[ql],Dl={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Zl=p("g",{fill:"none"},[p("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),p("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1),Pl=[Zl],Yl=["src"],jl=["src"],Gl={key:5},zl={class:"relative w-[300px]"},Ul={class:"flex space-x-2 w-full h-1/3 bg-white opacity-90 pt-2"},Kl={key:0,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 1024 1024"},Ql=p("path",{fill:"red",d:"m531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7c-3.8-21.3-19.5-29.6-32.9-30.2c-15.8-.7-29.9 8.3-33.4 21.4c-6.6 24-.7 56.8 10.1 98.6c-13.6 32.4-35.3 79.5-51.2 107.5c-29.6 15.3-69.3 38.9-75.2 68.7c-1.2 5.5.2 12.5 3.5 18.8c3.7 7 9.6 12.4 16.5 15c3 1.1 6.6 2 10.8 2c17.6 0 46.1-14.2 84.1-79.4c5.8-1.9 11.8-3.9 17.6-5.9c27.2-9.2 55.4-18.8 80.9-23.1c28.2 15.1 60.3 24.8 82.1 24.8c21.6 0 30.1-12.8 33.3-20.5c5.6-13.5 2.9-30.5-6.2-39.6c-13.2-13-45.3-16.4-95.3-10.2c-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7c6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4c-4.9-19.9-5.6-48.1-2.7-51.4c.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2c-21.6 4.9-41.3 13-58.9 20.2c-4.2 1.7-8.3 3.4-12.3 5c13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6c40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494z"},null,-1),Wl=[Ql],Jl={key:1,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 32 32"},eo=Qe('<defs><linearGradient id="vscodeIconsFileTypeExcel0" x1="4.494" x2="13.832" y1="-2092.086" y2="-2075.914" gradientTransform="translate(0 2100)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#18884f"></stop><stop offset=".5" stop-color="#117e43"></stop><stop offset="1" stop-color="#0b6631"></stop></linearGradient></defs><path fill="#185c37" d="M19.581 15.35L8.512 13.4v14.409A1.192 1.192 0 0 0 9.705 29h19.1A1.192 1.192 0 0 0 30 27.809V22.5Z"></path><path fill="#21a366" d="M19.581 3H9.705a1.192 1.192 0 0 0-1.193 1.191V9.5L19.581 16l5.861 1.95L30 16V9.5Z"></path><path fill="#107c41" d="M8.512 9.5h11.069V16H8.512Z"></path><path d="M16.434 8.2H8.512v16.25h7.922a1.2 1.2 0 0 0 1.194-1.191V9.391A1.2 1.2 0 0 0 16.434 8.2Z" opacity=".1"></path><path d="M15.783 8.85H8.512V25.1h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.783 8.85H8.512V23.8h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.132 8.85h-6.62V23.8h6.62a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path fill="url(#vscodeIconsFileTypeExcel0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.192 1.192 0 0 1 2 21.959V10.041A1.192 1.192 0 0 1 3.194 8.85Z"></path><path fill="#fff" d="m5.7 19.873l2.511-3.884l-2.3-3.862h1.847L9.013 14.6c.116.234.2.408.238.524h.017c.082-.188.169-.369.26-.546l1.342-2.447h1.7l-2.359 3.84l2.419 3.905h-1.809l-1.45-2.711A2.355 2.355 0 0 1 9.2 16.8h-.024a1.688 1.688 0 0 1-.168.351l-1.493 2.722Z"></path><path fill="#33c481" d="M28.806 3h-9.225v6.5H30V4.191A1.192 1.192 0 0 0 28.806 3Z"></path><path fill="#107c41" d="M19.581 16H30v6.5H19.581Z"></path>',12),to=[eo],ao={key:2,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 32 32"},so=Qe('<defs><linearGradient id="vscodeIconsFileTypeWord0" x1="4.494" x2="13.832" y1="-1712.086" y2="-1695.914" gradientTransform="translate(0 1720)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#2368c4"></stop><stop offset=".5" stop-color="#1a5dbe"></stop><stop offset="1" stop-color="#1146ac"></stop></linearGradient></defs><path fill="#41a5ee" d="M28.806 3H9.705a1.192 1.192 0 0 0-1.193 1.191V9.5l11.069 3.25L30 9.5V4.191A1.192 1.192 0 0 0 28.806 3Z"></path><path fill="#2b7cd3" d="M30 9.5H8.512V16l11.069 1.95L30 16Z"></path><path fill="#185abd" d="M8.512 16v6.5l10.418 1.3L30 22.5V16Z"></path><path fill="#103f91" d="M9.705 29h19.1A1.192 1.192 0 0 0 30 27.809V22.5H8.512v5.309A1.192 1.192 0 0 0 9.705 29Z"></path><path d="M16.434 8.2H8.512v16.25h7.922a1.2 1.2 0 0 0 1.194-1.191V9.391A1.2 1.2 0 0 0 16.434 8.2Z" opacity=".1"></path><path d="M15.783 8.85H8.512V25.1h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.783 8.85H8.512V23.8h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.132 8.85h-6.62V23.8h6.62a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path fill="url(#vscodeIconsFileTypeWord0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.192 1.192 0 0 1 2 21.959V10.041A1.192 1.192 0 0 1 3.194 8.85Z"></path><path fill="#fff" d="M6.9 17.988c.023.184.039.344.046.481h.028c.01-.13.032-.287.065-.47s.062-.338.089-.465l1.255-5.407h1.624l1.3 5.326a7.761 7.761 0 0 1 .162 1h.022a7.6 7.6 0 0 1 .135-.975l1.039-5.358h1.477l-1.824 7.748h-1.727l-1.237-5.126q-.054-.222-.122-.578t-.084-.52h-.021q-.021.189-.084.561c-.042.249-.075.432-.1.552L7.78 19.871H6.024L4.19 12.127h1.5l1.131 5.418a4.469 4.469 0 0 1 .079.443Z"></path>',11),ro=[so],no={key:3,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 32 32"},io=Qe('<defs><linearGradient id="vscodeIconsFileTypePowerpoint0" x1="4.494" x2="13.832" y1="-1748.086" y2="-1731.914" gradientTransform="translate(0 1756)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ca4c28"></stop><stop offset=".5" stop-color="#c5401e"></stop><stop offset="1" stop-color="#b62f14"></stop></linearGradient></defs><path fill="#ed6c47" d="M18.93 17.3L16.977 3h-.146A12.9 12.9 0 0 0 3.953 15.854V16Z"></path><path fill="#ff8f6b" d="M17.123 3h-.146v13l6.511 2.6L30 16v-.146A12.9 12.9 0 0 0 17.123 3Z"></path><path fill="#d35230" d="M30 16v.143A12.905 12.905 0 0 1 17.12 29h-.287a12.907 12.907 0 0 1-12.88-12.857V16Z"></path><path d="M17.628 9.389V23.26a1.2 1.2 0 0 1-.742 1.1a1.16 1.16 0 0 1-.45.091H7.027a10.08 10.08 0 0 1-.521-.65a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85a8.82 8.82 0 0 1 .456-.65h9.93a1.2 1.2 0 0 1 1.192 1.189Z" opacity=".1"></path><path d="M16.977 10.04v13.871a1.15 1.15 0 0 1-.091.448a1.2 1.2 0 0 1-1.1.741H7.62q-.309-.314-.593-.65a10.08 10.08 0 0 1-.521-.65a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85h9.735a1.2 1.2 0 0 1 1.192 1.19Z" opacity=".2"></path><path d="M16.977 10.04v12.571a1.2 1.2 0 0 1-1.192 1.189H6.506a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85h9.735a1.2 1.2 0 0 1 1.192 1.19Z" opacity=".2"></path><path d="M16.326 10.04v12.571a1.2 1.2 0 0 1-1.192 1.189H6.506a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85h9.084a1.2 1.2 0 0 1 1.192 1.19Z" opacity=".2"></path><path fill="url(#vscodeIconsFileTypePowerpoint0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.192 1.192 0 0 1 2 21.959V10.041A1.192 1.192 0 0 1 3.194 8.85Z"></path><path fill="#fff" d="M9.293 12.028a3.287 3.287 0 0 1 2.174.636a2.27 2.27 0 0 1 .756 1.841a2.555 2.555 0 0 1-.373 1.376a2.49 2.49 0 0 1-1.059.935a3.607 3.607 0 0 1-1.591.334H7.687v2.8H6.141v-7.922ZM7.686 15.94h1.331a1.735 1.735 0 0 0 1.177-.351a1.3 1.3 0 0 0 .4-1.025q0-1.309-1.525-1.31H7.686v2.686Z"></path>',10),lo=[io],oo={class:"overflow-ellipsis overflow-hidden line-clamp-2 w-[200px]"},_o={class:"flex items-center text-slate-500 text-[11px]"},co=p("span",null,[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24"},[p("circle",{cx:"12.1",cy:"12.1",r:"1",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})])],-1),uo=["href","download"],vo={key:0,xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},ho=p("path",{fill:"currentColor",d:"M4.025 11.975q0 2.825 1.725 5t4.4 2.825q.375.1.6.425t.225.725q0 .4-.275.663t-.625.187q-3.5-.7-5.775-3.437t-2.275-6.388q0-3.65 2.288-6.387T10.1 2.15q.35-.075.625.188T11 3q0 .4-.225.725t-.6.425q-2.7.65-4.425 2.825t-1.725 5Zm8.95 1.15l1.85-1.85q.3-.3.725-.3t.725.3q.3.3.288.725t-.313.725L12.675 16.3q-.3.3-.7.3t-.7-.3L7.65 12.65q-.3-.3-.288-.713t.313-.712q.3-.3.713-.3t.712.3l1.875 1.9V8q0-.425.288-.713T11.975 7q.425 0 .713.288t.287.712v5.125Zm3.05 5.75q.375-.225.813-.2t.762.35q.3.3.25.713t-.4.637q-.8.5-1.675.863t-1.8.562q-.4.075-.7-.175t-.3-.675q0-.425.263-.75t.687-.45q.55-.15 1.075-.375t1.025-.5ZM13.975 4.2q-.425-.125-.7-.45T13 3q0-.425.288-.675t.687-.175q.95.2 1.838.562T17.5 3.6q.35.225.375.625t-.25.7q-.3.325-.738.35t-.812-.2q-.5-.275-1.025-.5T13.975 4.2Zm5.75 9.75q.125-.425.463-.7t.762-.275q.425 0 .688.325t.162.725q-.2.95-.575 1.812t-.9 1.663q-.225.35-.625.35t-.675-.275q-.3-.3-.337-.725t.187-.8q.275-.5.488-1.012t.362-1.088Zm-.85-6.075q-.225-.375-.188-.788t.338-.712q.275-.275.675-.263t.625.338q.55.8.925 1.688t.575 1.837q.075.4-.187.7t-.688.3q-.425 0-.762-.287t-.463-.713q-.15-.55-.363-1.075t-.487-1.025Z"},null,-1),fo=[ho],mo={key:1,xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},po=Qe('<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="2 4" stroke-dashoffset="6" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21"><animate attributeName="stroke-dashoffset" dur="0.6s" repeatCount="indefinite" values="6;0"></animate></path><path stroke-dasharray="30" stroke-dashoffset="30" d="M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.1s" dur="0.3s" values="30;0"></animate></path><path stroke-dasharray="10" stroke-dashoffset="10" d="M12 8v7.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.2s" values="10;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 15.5l3.5 -3.5M12 15.5l-3.5 -3.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.7s" dur="0.2s" values="6;0"></animate></path></g>',1),bo=[po],xo={key:0,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},wo={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},yo=p("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1),So=[yo],Mo={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Ao=p("g",{fill:"none"},[p("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),p("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1),Ro=[Ao],Bo=["src"],To=["src"],Eo={key:6},ko={key:7},Co=["src"],Io={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},Lo=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("g",{fill:"none"},[p("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),p("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1),Oo={key:8},Vo={class:"flex space-x-3 w-[300px] items-center"},go=p("div",{class:"rounded-full p-3 bg-slate-200"},[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 512 512"},[p("path",{fill:"currentColor",d:"M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38c-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6ZM432 480H80a31 31 0 0 1-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75c1.94 10.73-.68 21.34-7.18 29.11A31 31 0 0 1 432 480Z"})])],-1),No={key:9},$o={key:0,controls:""},Ho=["src"],Fo={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},qo=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("g",{fill:"none"},[p("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),p("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1),Xo={key:10},Do={key:0,controls:"",width:"300",class:"max-h-[350px]"},Zo=["src"],Po={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},Yo=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[p("g",{fill:"none"},[p("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),p("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1),jo={key:2,class:"max-w-[300px]"},Go={key:3,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},zo={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Uo=p("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1),Ko=[Uo],Qo={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Wo=p("g",{fill:"none"},[p("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),p("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1),Jo=[Wo],e3=["src"],t3=["src"],a3={key:11,class:"mt-2 mb--2"},s3={class:"text-gray-500 text-xs text-right leading-none"},r3={class:"text-gray-500 text-xs text-right leading-none"},n3={class:"absolute capitalize hidden group-hover:block bg-white text-gray-600 text-xs rounded-sm py-1 px-2 bottom-full mb-1 whitespace-no-wrap"},i3={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},l3=p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m2.75 8.75l3.5 3.5l7-7.5"},null,-1),o3=[l3],_3={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 16 16"},c3=p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m1.75 9.75l2.5 2.5m3.5-4l2.5-2.5m-4.5 4l2.5 2.5l6-6.5"},null,-1),u3=[c3],v3=p("g",{fill:"currentColor"},[p("path",{d:"M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2zm3.708 6.208L1 11.105V5.383zM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2z"}),p("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7a3.5 3.5 0 0 0 0 7m.5-5v1.5a.5.5 0 0 1-1 0V11a.5.5 0 0 1 1 0m0 3a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0"})],-1),h3=[v3],d3={key:12,class:"cursor-pointer text-center border-t mt-2 pt-2"},f3={key:0,class:"bg-red-100 rounded-md p-3 text-sm mt-4"},m3={class:"flex"},p3={class:"truncate"},b3=p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[p("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[p("path",{d:"M6 11c0-2.828 0-4.243.879-5.121C7.757 5 9.172 5 12 5h3c2.828 0 4.243 0 5.121.879C21 6.757 21 8.172 21 11v5c0 2.828 0 4.243-.879 5.121C19.243 22 17.828 22 15 22h-3c-2.828 0-4.243 0-5.121-.879C6 20.243 6 18.828 6 16z"}),p("path",{d:"M6 19a3 3 0 0 1-3-3v-6c0-3.771 0-5.657 1.172-6.828C5.343 2 7.229 2 11 2h4a3 3 0 0 1 3 3"})])],-1),x3=[b3],w3={class:"mt-4 flex w-full"},y3={__name:"ChatBubble",props:{content:Object,type:String},setup(g){const K=g,Q=V0(!1),p0=()=>{Q.value=!0,setTimeout(()=>{Q.value=!1},2e3)},n0=S0=>({"text/plain":"TXT","application/pdf":"PDF","application/powerpoint":"PPT","application/vnd.ms-powerpoint":"PPT","application/msword":"DOC","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOCX","application/vnd.openxmlformats-officedocument.presentationml.presentation":"PPTX","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLSX"})[S0]||"Unknown",w0=S0=>{if(S0===0)return"0 Bytes";const m0=1024,r0=["Bytes","KB","MB","GB","TB"],G=parseInt(Math.floor(Math.log(S0)/Math.log(m0)));return Math.round(S0/Math.pow(m0,G)*100)/100+" "+r0[G]},c0=S0=>{const m0=JSON.parse(S0).contacts;if(m0.length===1){const r0=m0[0];return r0.name.formatted_name||`${r0.name.first_name} ${r0.name.last_name}`}else if(m0.length>1){const r0=m0[0].name.first_name,G=m0.length-1;return`${r0} and ${G} other contacts`}else return"No contacts available"},H0=S0=>{const m0=JSON.parse(S0);return{lat:m0.location.latitude,lng:m0.location.longitude}},ne=S0=>{const r0=Xt(()=>Xa().props.config).value.find(G=>G.key===S0);return r0?r0.value:""},K0=S0=>{let m0="sent";return S0.forEach(r0=>{const ee=JSON.parse(r0.metadata).status;if(ee==="failed"){m0="failed";return}else ee==="read"?m0="read":ee==="delivered"&&m0!=="read"&&(m0="delivered")}),m0},j0=V0(!1),Z0=((S0=0)=>{try{return JSON.parse(K.content.logs[S0].metadata).errors||[]}catch(m0){return console.error("Error parsing metadata:",m0),[]}})(),z0=V0(null),B0=async S0=>{z0.value=S0;const m0=document.createElement("textarea");m0.value=S0,document.body.appendChild(m0),m0.select(),document.execCommand("copy"),document.body.removeChild(m0),setTimeout(()=>{z0.value=null},2e3)};return(S0,m0)=>{var r0,G,ee,P0,we,Ce,se,oe,ge,W0,Q0,ie,Fe,h1,d1,t1,We,a1,s1,S1,M1,Ye,q0,f,H1,k1,C1,I1,r1,$0,E0,L0,A1,ve,Oe,f1,Y0,Rt,J1,qe,lt,Bt,Tt,ot,m1,Et,p1,kt,F1,_t,Ct,It,q1;return z(),a0(u1,null,[p("div",{class:ke(["rounded-lg my-1 p-2 text-sm flex flex-col relative",K.type==="outbound"?"ml-auto rounded-tr-none bg-[#d8fad4] speech-bubble-right":"mr-auto rounded-tl-none bg-white speech-bubble-left"])},[p("div",null,[JSON.parse(g.content.metadata).type==="text"?(z(),a0("div",ul,[p("p",vl,A0((r0=JSON.parse(g.content.metadata).text)==null?void 0:r0.body),1),(G=JSON.parse(g.content.metadata))!=null&&G.buttons?(z(),a0("div",hl,[(z(!0),a0(u1,null,K1((ee=JSON.parse(g.content.metadata))==null?void 0:ee.buttons,(le,n1)=>(z(),a0("div",{key:n1,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[p("span",null,[le.type==="COPY_CODE"?(z(),a0("svg",dl,ml)):le.type==="PHONE_NUMBER"?(z(),a0("svg",pl,xl)):le.type==="URL"?(z(),a0("img",{key:2,src:"/images/icons/link.png",class:"h-4"},null,8,wl)):(z(),a0("img",{key:3,src:"/images/icons/reply.png",class:"h-4"},null,8,yl))]),p("span",null,A0(le.text),1)]))),128))])):I0("",!0)])):I0("",!0),JSON.parse(g.content.metadata).type==="unsupported"?(z(),a0("div",Sl,[Ml,p("p",Al,A0(S0.$t("Error code"))+" : "+A0(JSON.parse(g.content.metadata).errors[0].code),1),p("p",Rl,A0(JSON.parse(g.content.metadata).errors[0].error_data.details),1)])):I0("",!0),JSON.parse(g.content.metadata).type==="button"?(z(),a0("div",Bl,[p("p",Tl,A0(JSON.parse(g.content.metadata).button.text),1)])):I0("",!0),JSON.parse(g.content.metadata).type==="interactive"?(z(),a0("div",El,[JSON.parse(g.content.metadata).interactive.type=="button_reply"?(z(),a0("div",kl,[p("p",Cl,A0((we=(P0=JSON.parse(g.content.metadata).interactive)==null?void 0:P0.button_reply)==null?void 0:we.title),1)])):I0("",!0),JSON.parse(g.content.metadata).interactive.type=="list_reply"?(z(),a0("p",Il,A0((se=(Ce=JSON.parse(g.content.metadata).interactive)==null?void 0:Ce.list_reply)==null?void 0:se.title),1)):I0("",!0),JSON.parse(g.content.metadata).interactive.type=="list_reply"?(z(),a0("p",Ll,A0((ge=(oe=JSON.parse(g.content.metadata).interactive)==null?void 0:oe.list_reply)==null?void 0:ge.description),1)):I0("",!0)])):JSON.parse(g.content.metadata).type==="image"?(z(),a0("div",Ol,[g.content.media!=null?(z(),a0("img",{key:0,src:(Q0=(W0=g.content)==null?void 0:W0.media)==null?void 0:Q0.path,alt:"Image",class:"mb-2 max-w-[300px]"},null,8,Vl)):(z(),a0("div",gl,[Nl,He(" "+A0(S0.$t("Content not available")),1)])),(ie=JSON.parse(g.content.metadata).image)!=null&&ie.caption?(z(),a0("div",$l,A0((Fe=JSON.parse(g.content.metadata).image)==null?void 0:Fe.caption),1)):I0("",!0),(h1=JSON.parse(g.content.metadata))!=null&&h1.buttons?(z(),a0("div",Hl,[(z(!0),a0(u1,null,K1((d1=JSON.parse(g.content.metadata))==null?void 0:d1.buttons,(le,n1)=>(z(),a0("div",{key:n1,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[p("span",null,[le.type==="COPY_CODE"?(z(),a0("svg",Fl,Xl)):le.type==="PHONE_NUMBER"?(z(),a0("svg",Dl,Pl)):le.type==="URL"?(z(),a0("img",{key:2,src:"/images/icons/link.png",class:"h-4"},null,8,Yl)):(z(),a0("img",{key:3,src:"/images/icons/reply.png",class:"h-4"},null,8,jl))]),p("span",null,A0(le.text),1)]))),128))])):I0("",!0)])):JSON.parse(g.content.metadata).type==="document"?(z(),a0("div",Gl,[p("div",zl,[p("div",Ul,[p("div",null,[n0((We=(t1=g.content)==null?void 0:t1.media)==null?void 0:We.type)==="PDF"?(z(),a0("svg",Kl,Wl)):I0("",!0),n0((s1=(a1=g.content)==null?void 0:a1.media)==null?void 0:s1.type)==="XLSX"||n0((M1=(S1=g.content)==null?void 0:S1.media)==null?void 0:M1.type)==="XLS"?(z(),a0("svg",Jl,to)):I0("",!0),n0((q0=(Ye=g.content)==null?void 0:Ye.media)==null?void 0:q0.type)==="DOC"||n0((H1=(f=g.content)==null?void 0:f.media)==null?void 0:H1.type)==="DOCX"?(z(),a0("svg",ao,ro)):I0("",!0),n0((C1=(k1=g.content)==null?void 0:k1.media)==null?void 0:C1.type)==="PPT"||n0((r1=(I1=g.content)==null?void 0:I1.media)==null?void 0:r1.type)==="PPTX"?(z(),a0("svg",no,lo)):I0("",!0)]),p("div",null,[p("div",null,[p("p",oo,A0((E0=($0=g.content)==null?void 0:$0.media)==null?void 0:E0.name),1)]),p("div",_o,[p("span",null,A0(n0((A1=(L0=g.content)==null?void 0:L0.media)==null?void 0:A1.type)),1),co,p("span",null,A0(w0((Oe=(ve=g.content)==null?void 0:ve.media)==null?void 0:Oe.size)),1)])]),p("a",{href:(Y0=(f1=g.content)==null?void 0:f1.media)==null?void 0:Y0.path,download:(J1=(Rt=g.content)==null?void 0:Rt.media)==null?void 0:J1.name,target:"_blank",onClick:p0,class:"flex justify-end w-full"},[Q.value?(z(),a0("svg",mo,bo)):(z(),a0("svg",vo,fo))],8,uo)])]),(qe=JSON.parse(g.content.metadata))!=null&&qe.buttons?(z(),a0("div",xo,[(z(!0),a0(u1,null,K1((lt=JSON.parse(g.content.metadata))==null?void 0:lt.buttons,(le,n1)=>(z(),a0("div",{key:n1,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[p("span",null,[le.type==="COPY_CODE"?(z(),a0("svg",wo,So)):le.type==="PHONE_NUMBER"?(z(),a0("svg",Mo,Ro)):le.type==="URL"?(z(),a0("img",{key:2,src:"/images/icons/link.png",class:"h-4"},null,8,Bo)):(z(),a0("img",{key:3,src:"/images/icons/reply.png",class:"h-4"},null,8,To))]),p("span",null,A0(le.text),1)]))),128))])):I0("",!0)])):JSON.parse(g.content.metadata).type==="location"?(z(),a0("div",Eo,[Ae(xe(sl),{"api-key":ne("google_maps_api_key"),style:{width:"300px",height:"200px"},center:H0(g.content.metadata),zoom:15},{default:Ve(()=>[Ae(xe(cl),{options:{position:H0(g.content.metadata)}},null,8,["options"])]),_:1},8,["api-key","center"])])):JSON.parse(g.content.metadata).type==="sticker"?(z(),a0("div",ko,[g.content.media!=null?(z(),a0("img",{key:0,src:(Tt=(Bt=g.content)==null?void 0:Bt.media)==null?void 0:Tt.path,alt:"Image",class:"mb-2 max-w-[100px]"},null,8,Co)):(z(),a0("div",Io,[Lo,He(" "+A0(S0.$t("Content not available")),1)]))])):JSON.parse(g.content.metadata).type==="contacts"?(z(),a0("div",Oo,[p("div",Vo,[go,p("div",null,A0(c0(g.content.metadata)),1)])])):JSON.parse(g.content.metadata).type==="audio"?(z(),a0("div",No,[g.content.media!=null?(z(),a0("audio",$o,[p("source",{src:(m1=(ot=g.content)==null?void 0:ot.media)==null?void 0:m1.path},null,8,Ho),He(" "+A0(S0.$t("Your browser does not support the audio element")),1)])):(z(),a0("div",Fo,[qo,He(" "+A0(S0.$t("Content not available")),1)]))])):JSON.parse(g.content.metadata).type==="video"?(z(),a0("div",Xo,[g.content.media!=null?(z(),a0("video",Do,[p("source",{src:(p1=(Et=g.content)==null?void 0:Et.media)==null?void 0:p1.path,type:"video/mp4"},null,8,Zo),He(" "+A0(S0.$t("Your browser does not support the video element")),1)])):(z(),a0("div",Po,[Yo,He(" "+A0(S0.$t("Content not available")),1)])),(kt=JSON.parse(g.content.metadata).video)!=null&&kt.caption?(z(),a0("div",jo,A0((F1=JSON.parse(g.content.metadata).video)==null?void 0:F1.caption),1)):I0("",!0),(_t=JSON.parse(g.content.metadata))!=null&&_t.buttons?(z(),a0("div",Go,[(z(!0),a0(u1,null,K1((Ct=JSON.parse(g.content.metadata))==null?void 0:Ct.buttons,(le,n1)=>(z(),a0("div",{key:n1,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[p("span",null,[le.type==="COPY_CODE"?(z(),a0("svg",zo,Ko)):le.type==="PHONE_NUMBER"?(z(),a0("svg",Qo,Jo)):le.type==="URL"?(z(),a0("img",{key:2,src:"/images/icons/link.png",class:"h-4"},null,8,e3)):(z(),a0("img",{key:3,src:"/images/icons/reply.png",class:"h-4"},null,8,t3))]),p("span",null,A0(le.text),1)]))),128))])):I0("",!0)])):I0("",!0),K.type==="outbound"&&g.content.user?(z(),a0("div",a3,[p("span",s3,[He("Sent By: "),p("u",null,A0(((It=g.content.user)==null?void 0:It.first_name)+" "+((q1=g.content.user)==null?void 0:q1.last_name)),1)])])):I0("",!0),p("div",{class:ke(["flex items-center justify-between space-x-4",K.type==="outbound"&&g.content.user?"":"mt-2"])},[p("p",r3,A0(g.content.created_at),1),p("span",{class:ke(["relative group cursor-pointer",K0(g.content.logs)==="read"?"text-blue-500":"text-gray-500"])},[p("div",n3,A0(K0(g.content.logs)),1),K0(g.content.logs)==="sent"?(z(),a0("svg",i3,o3)):I0("",!0),K0(g.content.logs)==="delivered"||K0(g.content.logs)==="read"?(z(),a0("svg",_3,u3)):I0("",!0),K0(g.content.logs)==="failed"?(z(),a0("svg",{key:2,onClick:m0[0]||(m0[0]=le=>{j0.value=!0}),class:"text-red-600",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},h3)):I0("",!0)],2)],2),JSON.parse(g.content.metadata).type==="contacts"?(z(),a0("div",d3,A0(S0.$t("View")),1)):I0("",!0)])],2),Ae(Ya,{label:S0.$t("Message status: ")+K0(g.content.logs),isOpen:j0.value,closeBtn:!0,onClose:m0[3]||(m0[3]=le=>j0.value=!1)},{default:Ve(()=>[p("div",null,[xe(Z0).length?(z(),a0("div",f3,[(z(!0),a0(u1,null,K1(xe(Z0),(le,n1)=>(z(),a0("div",{key:n1},[p("div",m3,[p("p",p3,"Chat ID: "+A0(JSON.parse(g.content.logs[0].metadata).id),1),p("button",{onClick:m0[1]||(m0[1]=i1=>B0(JSON.parse(g.content.logs[0].metadata).id)),class:"text-gray-600 hover:text-black transition"},x3)]),p("p",null,"Error Code: "+A0(le.code),1),p("p",null,"Title: "+A0(le.title),1),p("p",null,"Message: "+A0(le.message),1),p("p",null,"Error Details: "+A0(le.error_data.details),1)]))),128))])):I0("",!0),p("div",w3,[p("button",{type:"button",onClick:m0[2]||(m0[2]=W1(le=>{j0.value=!1},["self"])),class:"w-full justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},A0(S0.$t("Cancel")),1)])])]),_:1},8,["label","isOpen"])],64)}}},S3=$1(y3,[["__file","ChatBubble.vue"]]),M3={key:0,class:"py-4 md:py-4 relative px-6 md:px-10"},A3={key:1,class:"py-2"},R3={class:"text-center font-light text-sm border-b border-t py-2 border-dashed border-black"},B3={class:"text-xs"},T3={key:2,class:"py-2 bg-orange-100 my-2 rounded-lg p-2 w-[fit-content] ml-auto"},E3={class:"text-right font-light text-sm"},k3={class:"flex items-center justify-between mt-2 space-x-4"},C3={class:"text-gray-500 text-xs text-right leading-none"},I3={__name:"ChatThread",props:{rows:{type:Object,required:!0}},setup(g){return(K,Q)=>g.rows.length>0?(z(),a0("div",M3,[(z(!0),a0(u1,null,K1(g.rows,(p0,n0)=>(z(),a0("div",{class:ke(["flex flex-grow flex-col",p0[0].type==="ticket"?"justify-center":"justify-end"])},[p0[0].type==="chat"?(z(),v1(S3,{key:n0,content:p0[0].value,type:p0[0].value.type},null,8,["content","type"])):I0("",!0),p0[0].type==="ticket"?(z(),a0("div",A3,[p("div",R3,[p("div",null,A0(p0[0].value.description),1),p("div",B3,A0(p0[0].value.created_at),1)])])):I0("",!0),p0[0].type==="notes"?(z(),a0("div",T3,[p("div",E3,[p("div",null,A0(p0[0].value.content),1),p("div",k3,[p("p",C3,A0(p0[0].value.created_at),1)])])])):I0("",!0)],2))),256))])):I0("",!0)}},L3=$1(I3,[["__file","ChatThread.vue"]]),O3={class:"md:flex md:flex-grow md:overflow-hidden"},V3={key:2,class:"w-full py-4"},g3={key:3,class:"flex-1 overflow-y-hidden"},N3=["onClick"],$3={__name:"Index",props:["rows","rowCount","pusherSettings","organizationId","isChatLimitReached","toggleNavBar","state","demoNumber","settings","status","chatThread","addon","contact","ticket","chat_sort_direction","filters","templates","fields","locationSettings","simpleForm"],setup(g){var we,Ce;const K=g,Q=V0(K.rows);V0(K.rowCount),V0(null);const p0=V0(null),n0=V0(!1),w0=V0(!1),c0=V0(!1),H0=V0(!1),ne=V0(K.isChatLimitReached),K0=V0(null);V0(!1);const j0=V0(K.settings.metadata),D0=V0(j0.value?JSON.parse(j0.value):null),Z0=V0(((Ce=(we=D0.value)==null?void 0:we.tickets)==null?void 0:Ce.active)??!1),z0=V0(K.chatThread),B0=V0(K.contact);Mt(()=>K.rows,se=>{Q.value=se});function S0(se){w0.value=se}const m0=()=>{const se=p0.value;se&&se.scrollTo({top:se.scrollHeight,behavior:"smooth"})},r0=()=>{K0.value.click(),B0.value=null},G=()=>{z0.value=[],wt.delete("/chats/"+B0.value.uuid)},ee=se=>{const oe=se[0].value.wam_id;!z0.value.some(W0=>W0[0].value.wam_id===oe)&&se[0].value.deleted_at==null&&(z0.value.push(se),setTimeout(m0,100))},P0=async se=>{B0.value&&B0.value.id==se[0].value.contact_id&&ee(se);const oe=await wt.get("/chats");oe&&(Q.value=oe.data.result)};return At(()=>{ir(K.pusherSettings.pusher_app_key,K.pusherSettings.pusher_app_cluster).channel("chats.ch"+K.organizationId).listen("NewChatEvent",oe=>{P0(oe.chat)}),m0()}),(se,oe)=>(z(),v1(lr,null,{default:Ve(ge=>[p("div",O3,[p("div",{class:ke(["md:w-[30%] md:flex flex-col h-full bg-white border-r border-l",B0.value?"hidden":""])},[Ae(Pi,{rows:Q.value,filters:K.filters,rowCount:K.rowCount,ticketingIsEnabled:Z0.value,status:K==null?void 0:K.status,chatSortDirection:K.chat_sort_direction},null,8,["rows","filters","rowCount","ticketingIsEnabled","status","chatSortDirection"])],2),p("div",{class:ke(["min-w-0 bg-cover flex flex-col chat-bg",B0.value?"h-screen md:w-[70%]":"md:h-screen md:w-[70%]"])},[B0.value?(z(),v1(yn,{key:0,ticketingIsEnabled:Z0.value,contact:B0.value,displayContactInfo:w0.value,ticket:g.ticket,addon:g.addon,onToggleView:S0,onDeleteThread:G,onCloseThread:r0},null,8,["ticketingIsEnabled","contact","displayContactInfo","ticket","addon"])):I0("",!0),B0.value&&!c0.value?(z(),a0("div",{key:1,class:"flex-1 overflow-y-auto",ref_key:"scrollContainer2",ref:p0},[!w0.value&&!n0.value&&!c0.value?(z(),v1(L3,{key:0,rows:z0.value},null,8,["rows"])):I0("",!0),w0.value&&!c0.value?(z(),v1(pr,{key:1,class:"bg-white h-full",fields:K.fields,contact:B0.value,locationSettings:K.locationSettings},null,8,["fields","contact","locationSettings"])):I0("",!0)],512)):I0("",!0),B0.value&&!w0.value&&!H0.value&&!c0.value?(z(),a0("div",V3,[Ae(K2,{contact:B0.value,simpleForm:g.simpleForm,chatLimitReached:ne.value,onViewTemplate:oe[0]||(oe[0]=W0=>{c0.value=!0})},null,8,["contact","simpleForm","chatLimitReached"])])):I0("",!0),c0.value?(z(),a0("div",g3,[c0.value?(z(),v1(or,{key:0,class:"bg-white h-full",contact:B0.value.uuid,templates:g.templates,contactGroups:[],settings:K.settings,displayCancelBtn:!1,displayTitle:!0,isCampaignFlow:!1,scheduleTemplate:!1,sendText:"Send Message",onViewTemplate:oe[1]||(oe[1]=W0=>{c0.value=!1})},null,8,["contact","templates","settings"])):I0("",!0)])):I0("",!0)],2)]),p("button",{class:"hidden",ref_key:"toggleNavbarBtn",ref:K0,onClick:ge.toggleNavBar},null,8,N3)]),_:1}))}},y4=$1($3,[["__file","Index.vue"]]);export{y4 as default};
