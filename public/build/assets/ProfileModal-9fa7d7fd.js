import{r as Q,K as _,T as w,o as m,e as V,f as n,h as r,u as e,a as t,t as u,n as i,b as x,j as k,c as b,g as j,O as N}from"./app-06066091.js";import{F as g}from"./FormInput-a5364d31.js";import{F as R}from"./FormPhoneInput-8d88435b.js";import{F as D}from"./FormSelect-6c96738a.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import{h as O,G as q,U as L,S as J}from"./transition-9e93c540.js";import{x as K,I as H,y as C,S as W,g as $}from"./tabs-470b041d.js";const X=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Y={class:"fixed inset-0 overflow-y-auto"},ee={class:"flex min-h-full items-center justify-center p-4 text-center"},te={class:"text-base text-xl leading-7 text-gray-900"},oe={class:"mb-4 text-sm leading-6 text-gray-600"},se={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},ae={class:"mt-4 flex"},re=["disabled"],le={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},ne=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),ie=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),de=[ne,ie],ue={key:1},me={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},ce={class:"mt-4 flex"},pe=["disabled"],fe={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},be=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),ge=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),he=[be,ge],ve={key:1},ye={key:0,class:"mt-2 text-sm text-green-700"},_e=t("b",null,"enabled",-1),we={class:"relative mt-4"},xe={key:0,class:"absolute inset-0 backdrop-blur-sm"},Ve=t("h3",{class:"font-semibold"},"1. Scan QR Code",-1),ke=t("p",{class:"text-gray-600 text-sm"}," Open the authentication app (ex: Authy, Google Authenticator) on your mobile device and scan the following QR Code with your camera. ",-1),Ce={class:"flex items-center text-sm"},$e={class:"mb-6 md:mb-0 md:mr-2"},Ae=["src"],Se=t("label",null,"Can't scan the QR Code?",-1),Fe=t("p",{class:"text-gray-600 text-sm"}," Try inserting the following secret code into your app if you can't scan the QR Code. ",-1),ze={class:"h5 text-sm mt-3"},Me=t("h3",{class:"font-semibold"}," 2. Enter Token from Authenticator App ",-1),Ue=t("p",{class:"text-sm text-gray-600 mb-2"}," To confirm that you setup your code properly, please enter the 6-digit token from your mobile app. ",-1),Te={class:"mt-4 flex"},je=["disabled"],Ne={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Oe=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),Ze=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),Be=[Oe,Ze],Pe={key:1},Ee={__name:"ProfileModal",props:{user:Object,organization:Object,role:String,isOpen:Boolean},emits:["close"],setup(A,{emit:Z}){var S,F,z,M,U,T;const c=A,l=Q(!1),h=(a,s)=>{if(a){const o=JSON.parse(a);return(o==null?void 0:o[s])??null}else return null};_().props.config;const d=w({first_name:c.user.first_name,last_name:c.user.last_name,email:c.user.email,phone:c.user.phone});w({organization_name:(S=c.organization)==null?void 0:S.name,address:h((F=c.organization)==null?void 0:F.address,"street"),city:h((z=c.organization)==null?void 0:z.address,"city"),state:h((M=c.organization)==null?void 0:M.address,"state"),zip:h((U=c.organization)==null?void 0:U.address,"zip"),country:h((T=c.organization)==null?void 0:T.address,"country")});const p=w({old_password:null,password:null,password_confirmation:null}),f=w({status:_().props.tfa.enabled,token:null,secret:_().props.tfa.secret}),v=_().props.tfa,B=async a=>{l.value=!0,d.put("/profile/",{preserveScroll:!0,onFinish:()=>{l.value=!1}})},P=async a=>{l.value=!0,p.put("/profile/password",{preserveScroll:!0,onFinish:()=>{l.value=!1}})},E=async a=>{l.value=!0,f.put("/profile/tfa",{preserveScroll:!0,onFinish:()=>{l.value=!1},onSuccess:()=>{N.visit(N.page.url)}})},I=Z;function y(){I("close",!0)}return(a,s)=>(m(),V(e(J),{appear:"",show:A.isOpen,as:"template"},{default:n(()=>[r(e(L),{as:"div",onClose:y,class:"relative z-10"},{default:n(()=>[r(e(O),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:n(()=>[X]),_:1}),t("div",Y,[t("div",ee,[r(e(O),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:n(()=>[r(e(q),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all min-w-[20em]"},{default:n(()=>[t("div",null,[t("h2",te,u(a.$t("Personal information")),1),t("p",oe,u(a.$t("Update your account details and credentials")),1),r(e(K),null,{default:n(()=>[r(e(H),{class:"flex space-x-1 rounded-xl bg-primary p-1"},{default:n(()=>[r(e(C),{as:"template"},{default:n(({selected:o})=>[t("button",{class:i(["w-full rounded-lg py-2.5 text-sm leading-5 text-[#ffffffcc]","ring-white focus:outline-none",o?"bg-white text-black shadow":"hover:bg-white hover:text-black"])},u(a.$t("My profile")),3)]),_:1}),r(e(C),{as:"template"},{default:n(({selected:o})=>[t("button",{class:i(["w-full rounded-lg py-2.5 text-sm leading-5 text-[#ffffffcc]","ring-white focus:outline-none",o?"bg-white text-black shadow":"hover:bg-white hover:text-black"])},u(a.$t("Security")),3)]),_:1}),e(v).status?(m(),V(e(C),{key:0,as:"template"},{default:n(({selected:o})=>[t("button",{class:i(["w-full rounded-lg py-2.5 text-sm leading-5 text-[#ffffffcc]","ring-white focus:outline-none",o?"bg-white text-black shadow":"hover:bg-white hover:text-black"])},u(a.$t("Two-Factor")),3)]),_:1})):x("",!0)]),_:1}),r(e(W),{class:"mt-2"},{default:n(()=>[r(e($),null,{default:n(()=>[t("div",se,[t("form",{onSubmit:s[4]||(s[4]=k(o=>B(),["prevent"])),class:"grid gap-x-6 gap-y-4 sm:grid-cols-6"},[r(g,{modelValue:e(d).first_name,"onUpdate:modelValue":s[0]||(s[0]=o=>e(d).first_name=o),name:a.$t("First name"),error:e(d).errors.first_name,type:"text",class:i("sm:col-span-3")},null,8,["modelValue","name","error"]),r(g,{modelValue:e(d).last_name,"onUpdate:modelValue":s[1]||(s[1]=o=>e(d).last_name=o),name:a.$t("Last name"),error:e(d).errors.last_name,type:"text",class:i("sm:col-span-3")},null,8,["modelValue","name","error"]),r(g,{modelValue:e(d).email,"onUpdate:modelValue":s[2]||(s[2]=o=>e(d).email=o),name:a.$t("Email"),error:e(d).errors.email,type:"text",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),r(R,{modelValue:e(d).phone,"onUpdate:modelValue":s[3]||(s[3]=o=>e(d).phone=o),name:a.$t("Phone"),error:e(d).errors.phone,type:"text",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),t("div",ae,[t("button",{type:"button",onClick:y,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},u(a.$t("Cancel")),1),t("button",{class:i(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":l.value}]),disabled:l.value},[l.value?(m(),b("svg",le,de)):(m(),b("span",ue,u(a.$t("Save")),1))],10,re)])],32)])]),_:1}),r(e($),null,{default:n(()=>[t("div",me,[t("form",{onSubmit:s[8]||(s[8]=k(o=>P(),["prevent"])),class:"grid gap-x-6 gap-y-4 sm:grid-cols-6"},[r(g,{modelValue:e(p).old_password,"onUpdate:modelValue":s[5]||(s[5]=o=>e(p).old_password=o),name:a.$t("Old password"),error:e(p).errors.old_password,type:"password",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),r(g,{modelValue:e(p).password,"onUpdate:modelValue":s[6]||(s[6]=o=>e(p).password=o),name:a.$t("New password"),error:e(p).errors.password,type:"password",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),r(g,{modelValue:e(p).password_confirmation,"onUpdate:modelValue":s[7]||(s[7]=o=>e(p).password_confirmation=o),name:a.$t("Confirm password"),error:e(p).errors.password_confirmation,type:"password",class:i("sm:col-span-6")},null,8,["modelValue","name","error"]),t("div",ce,[t("button",{type:"button",onClick:y,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},u(a.$t("Cancel")),1),t("button",{class:i(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":l.value}]),disabled:l.value},[l.value?(m(),b("svg",fe,he)):(m(),b("span",ve,u(a.$t("Save")),1))],10,pe)])],32)])]),_:1}),e(v).status?(m(),V(e($),{key:0},{default:n(()=>[t("form",{onSubmit:s[11]||(s[11]=k(o=>E(),["prevent"]))},[r(D,{name:"Two-factor authentication",modelValue:e(f).status,"onUpdate:modelValue":s[9]||(s[9]=o=>e(f).status=o),options:[{value:1,label:"Enable"},{value:0,label:"Disable"}],error:e(f).errors.status},null,8,["modelValue","error"]),e(v).enabled===1?(m(),b("div",ye,[j(" Two-factor authentication is "),_e,j(". ")])):x("",!0),t("div",we,[e(f).status===0?(m(),b("div",xe)):x("",!0),Ve,ke,t("div",Ce,[t("div",$e,[t("img",{src:e(v).qrcode,alt:"qrcode",width:"200"},null,8,Ae)]),t("div",null,[Se,Fe,t("p",ze,u(e(v).secret),1)])]),Me,Ue,r(g,{modelValue:e(f).token,"onUpdate:modelValue":s[10]||(s[10]=o=>e(f).token=o),placeholder:"6 digit code",error:e(f).errors.token,type:"text",class:i("sm:col-span-6")},null,8,["modelValue","error"])]),t("div",Te,[t("button",{type:"button",onClick:y,class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},u(a.$t("Cancel")),1),t("button",{class:i(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":l.value}]),disabled:l.value},[l.value?(m(),b("svg",Ne,Be)):(m(),b("span",Pe,u(a.$t("Save")),1))],10,je)])],32)]),_:1})):x("",!0)]),_:1})]),_:1})])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},Je=G(Ee,[["__file","ProfileModal.vue"]]);export{Je as P};
