import{r as g,T as I,q as z,E as J,c as a,h as p,f as C,F as L,o as c,a as e,t as n,u as l,i as q,g as k,j as M,n as m,b as f,d as D,x as G}from"./app-06066091.js";import{A as W}from"./App-53e90ba2.js";import{t as x}from"./index-8e47e887.js";import{F as K}from"./FormInput-a5364d31.js";import{F as j}from"./FormSelect-6c96738a.js";import{F as Q}from"./FormSelectCombo-70d234e8.js";import{F as X}from"./FormTextArea-248be5f8.js";import{M as Y}from"./Modal-858f9f8a.js";import{P as ee}from"./style-39293b16.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";import"./Sidebar-56399b82.js";import"./Menu-32707887.js";import"./ProfileModal-9fa7d7fd.js";import"./FormPhoneInput-8d88435b.js";/* empty css                      */import"./transition-9e93c540.js";import"./hidden-94645dc9.js";import"./use-outside-click-6f649936.js";import"./micro-task-89dcd6af.js";import"./tabs-470b041d.js";import"./use-resolve-button-type-737f9372.js";import"./LangToggle-4117f8d3.js";import"./OrganizationModal-94b0dd29.js";import"./use-text-value-6338b60a.js";import"./index-2177aed8.js";import"./MobileSidebar-c9250509.js";/* empty css              */import"./use-tree-walker-26135af6.js";const se={class:"bg-white md:bg-inherit pt-10 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] h-full md:overflow-y-auto"},oe={class:"flex justify-between"},ie={class:"text-xl mb-1"},le={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},re=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),ne={class:"ml-1 mt-1"},ae=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor","fill-rule":"evenodd",d:"M5.841 5.28a.75.75 0 0 0-1.06-1.06L1.53 7.47L1 8l.53.53l3.25 3.25a.75.75 0 0 0 1.061-1.06l-1.97-1.97H24.25a.75.75 0 0 0 0-1.5H3.871l1.97-1.97Z","clip-rule":"evenodd"})],-1),ce={class:"flex border-b py-5"},de={class:"w-[40%] mb-1"},pe={class:"text-sm text-gray-500 tracking-[0px]"},ue={class:"w-[60%] flex space-x-6"},me={class:"w-[80%]"},he={class:"flex border-b py-5"},ge={class:"w-[40%] mb-1"},ve={class:"text-sm text-gray-500 tracking-[0px]"},fe={class:"flex text-xs mt-2"},xe=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),_e={class:"w-[60%] flex space-x-6"},be={class:"w-[80%]"},we={class:"flex border-b py-5"},ye={class:"w-[40%] mb-1"},ke={class:"text-sm text-gray-500 tracking-[0px]"},$e={class:"flex text-xs mt-2"},Ce=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),Ve={class:"w-[60%] flex space-x-6"},Se={class:"w-[80%]"},Le={class:"flex border-b py-5"},Me={class:"w-[40%] mb-1"},je={class:"text-sm text-gray-500 tracking-[0px]"},Te={class:"w-[60%] flex space-x-6"},Be={class:"w-[80%]"},Re={key:0,class:"flex py-5"},Ze={class:"w-[40%] mb-1"},Ee={class:"text-sm text-gray-500 tracking-[0px]"},Fe={class:"w-[60%] flex space-x-6"},Ae={class:"w-[80%]"},Pe={class:m("sm:col-span-6 mb-2")},Ue={class:"mt-2"},Oe={key:0,class:"form-error text-[#b91c1c] text-xs"},Ne={class:"flex items-center"},He=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8.25 15L12 18.75L15.75 15m-7.5-6L12 5.25L15.75 9"})],-1),Ie=e("div",{class:"ml-auto"},null,-1),ze=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M5 3h8c1.06 0 2.078.474 2.828 1.318C16.578 5.162 17 6.307 17 7.5c0 1.193-.421 2.338-1.172 3.182C15.078 11.526 14.061 12 13 12H5zm0 9h10.039a4.44 4.44 0 0 1 3.154 1.318A4.52 4.52 0 0 1 19.5 16.5a4.52 4.52 0 0 1-1.307 3.182A4.442 4.442 0 0 1 15.038 21H5z"})],-1),Je=[ze],qe=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M10 4.75a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-3.514l-5.828 13h3.342a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5h3.514l5.828-13H20.75a.75.75 0 0 1-.75-.75Z"})],-1),De=[qe],Ge=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"m16.533 12.5l.054.043c.93.75 1.538 1.77 1.538 3.066a4.13 4.13 0 0 1-1.479 3.177c-1.058.904-2.679 1.464-4.974 1.464c-2.35 0-4.252-.837-5.318-1.865a.75.75 0 1 1 1.042-1.08c.747.722 2.258 1.445 4.276 1.445c2.065 0 3.296-.504 3.999-1.105a2.63 2.63 0 0 0 .954-2.036c0-.764-.337-1.38-.979-1.898c-.649-.523-1.598-.931-2.76-1.211H3.75a.75.75 0 0 1 0-1.5h26.5a.75.75 0 0 1 0 1.5ZM12.36 5C9.37 5 8.105 6.613 8.105 7.848c0 .411.072.744.193 1.02a.75.75 0 0 1-1.373.603a3.988 3.988 0 0 1-.32-1.623c0-2.363 2.271-4.348 5.755-4.348c1.931 0 3.722.794 4.814 1.5a.75.75 0 1 1-.814 1.26c-.94-.607-2.448-1.26-4-1.26Z"})],-1),We=[Ge],Ke=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M13.5 6L10 18.5m-3.5-10L3 12l3.5 3.5m11-7L21 12l-3.5 3.5"})],-1),Qe=[Ke],Xe={class:"relative ml-3"},Ye={type:"submit",class:"float-right flex items-center space-x-4 rounded-md bg-black px-3 py-2 text-sm text-white shadow-sm hover:bg-slate-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},et={key:1,class:"flex py-5"},tt={class:"w-[40%] mb-1"},st={class:"text-sm text-gray-500 tracking-[0px]"},ot={class:"w-[60%] flex space-x-6"},it={class:"w-[80%]"},lt={type:"submit",class:"float-right flex items-center space-x-4 rounded-md bg-black px-3 py-2 text-sm text-white shadow-sm hover:bg-slate-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},rt={key:2,class:"flex py-5"},nt={class:"w-[40%] mb-1"},at={key:0,class:"text-sm text-gray-500 tracking-[0px]"},ct={key:1,class:"text-sm text-gray-500 tracking-[0px]"},dt={class:"w-[60%] flex space-x-6"},pt={class:"w-[80%]"},ut=["accept"],mt={class:"text-center"},ht={key:0,class:"flex justify-center items-center"},gt={class:"flex justify-center items-center space-x-3 py-1 border bg-slate-100 rounded-lg mb-2 w-fit px-2"},vt=e("div",null,[e("svg",{class:"mx-auto h-6 w-6 text-gray-400 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M14 9a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0Z"}),e("path",{fill:"currentColor","fill-rule":"evenodd",d:"M7.268 4.658a54.647 54.647 0 0 1 9.465 0l1.51.132a3.138 3.138 0 0 1 2.831 2.66a30.604 30.604 0 0 1 0 9.1a3.138 3.138 0 0 1-2.831 2.66l-1.51.131c-3.15.274-6.316.274-9.465 0l-1.51-.131a3.138 3.138 0 0 1-2.832-2.66a30.601 30.601 0 0 1 0-9.1a3.138 3.138 0 0 1 2.831-2.66l1.51-.132Zm9.335 1.495a53.147 53.147 0 0 0-9.206 0l-1.51.131A1.638 1.638 0 0 0 4.41 7.672a29.101 29.101 0 0 0-.311 5.17L7.97 8.97a.75.75 0 0 1 1.09.032l3.672 4.13l2.53-.844a.75.75 0 0 1 .796.21l3.519 3.91a29.101 29.101 0 0 0 .014-8.736a1.638 1.638 0 0 0-1.478-1.388l-1.51-.131Zm2.017 11.435l-3.349-3.721l-2.534.844a.75.75 0 0 1-.798-.213l-3.471-3.905l-4.244 4.243c.049.498.11.996.185 1.491a1.638 1.638 0 0 0 1.478 1.389l1.51.131c3.063.266 6.143.266 9.206 0l1.51-.131c.178-.016.35-.06.507-.128Z","clip-rule":"evenodd"})])],-1),ft={class:"flex items-center space-x-2"},xt={class:"text-sm"},_t=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor","fill-rule":"evenodd",d:"M17.707 7.707a1 1 0 0 0-1.414-1.414L12 10.586L7.707 6.293a1 1 0 0 0-1.414 1.414L10.586 12l-4.293 4.293a1 1 0 1 0 1.414 1.414L12 13.414l4.293 4.293a1 1 0 1 0 1.414-1.414L13.414 12l4.293-4.293Z","clip-rule":"evenodd"})],-1),bt=[_t],wt={class:"flex justify-center text-sm text-gray-600"},yt={key:0,for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},kt={class:"text-xs text-center text-gray-500"},$t={key:1,for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},Ct={class:"text-xs text-center text-gray-500"},Vt={key:0,class:"form-error text-[#b91c1c] text-xs"},St={type:"submit",class:"mt-10 float-right flex items-center space-x-4 rounded-md bg-black px-3 py-2 text-sm text-white shadow-sm hover:bg-slate-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},Lt=e("div",{class:"flex bg-slate-50 p-2 rounded-md mt-3"},[e("span",{class:"font-light text-sm"},"Select a placeholder to add to your response. The placeholder will replace itself with the actual data.")],-1),Mt={class:"mt-2 grid grid-cols-1 gap-x-6"},jt={class:"pt-3 grid grid-cols-2 gap-x-2 text-sm gap-y-1"},Tt=["onClick"],Bt={class:"mt-4 border-t pt-4"},Rt={__name:"Edit",props:["autoreply","placeholders"],setup(T){const h=T,_=g(!1),v=g(null),b=g(!1),$=g(null),B=t=>{const s=v.value,r=s.value||"",i=s.selectionStart||0,u=s.selectionEnd||0,d=`${r.substring(0,i)}${t}${r.substring(u)}`;s.value=d,o.response=d,setTimeout(()=>{s.focus(),s.setSelectionRange(i+t.length,i+t.length)},0),_.value=!1},R=t=>{o.response=t.target.value},w=JSON.parse(h.autoreply.metadata).type,Z=()=>{const t=JSON.parse(h.autoreply.metadata).data;return w==="text"?t.text:w==="image"||w==="audio"?t==null?void 0:t.file:t.template},o=I({_method:"put",name:h.autoreply.name,trigger:h.autoreply.trigger,match_criteria:h.autoreply.match_criteria,response_type:w,response:Z()}),E=g([{value:"exact match",label:x("When text is an exact match to trigger text")},{value:"contains",label:x("When text contains trigger text")}]),F=g([{value:"text",label:x("Respond with text")},{value:"image",label:x("Respond with image")},{value:"audio",label:x("Respond with audio")}]),A=async(t,s)=>{try{const r=await G.get("/templates?query="+t);s(r.data[0])}catch(r){console.error("Error fetching rows:",r)}},P=t=>{const s=t.target.files[0],r=new FileReader;r.onload=i=>{o.response=s},r.readAsDataURL(s)},V=()=>{o.response=null},U=()=>{o.post("/automation/basic/"+h.autoreply.uuid)},y=t=>{const s=v.value,r=s.selectionStart,i=s.selectionEnd,u=o.response.slice(r,i);let d="";t=="bold"?d=o.response.slice(0,r)+"*"+u+"*"+o.response.slice(i):t=="italic"?d=o.response.slice(0,r)+"_"+u+"_"+o.response.slice(i):t=="strike-through"?d=o.response.slice(0,r)+"~"+u+"~"+o.response.slice(i):t=="monospace"&&(d=o.response.slice(0,r)+"```"+u+"```"+o.response.slice(i)),s.value=d,setTimeout(()=>{t=="monospace"?s.setSelectionRange(r+3,i+3):s.setSelectionRange(r+1,i+1),s.focus()},0)},O=t=>{t.stopPropagation(),b.value=!b.value},N=()=>{b.value=!1},H=t=>{const s=v.value,r=s.value||"",i=s.selectionStart||0,u=s.selectionEnd||0,d=r.substring(0,i)+t.i+r.substring(u);s.value=d,o.response=d,setTimeout(()=>{s.focus(),s.setSelectionRange(i+t.i.length,i+t.i.length)},0)},S=t=>{$.value&&!$.value.contains(t.target)&&!v.value.contains(t.target)&&N()};return z(()=>{document.addEventListener("click",S)}),J(()=>{document.removeEventListener("click",S)}),(t,s)=>(c(),a(L,null,[p(W,null,{default:C(()=>{var r;return[e("div",se,[e("div",oe,[e("div",null,[e("h2",ie,n(t.$t("Update automation")),1),e("p",le,[re,e("span",ne,n(t.$t("Update your setup")),1)])]),e("div",null,[p(l(q),{href:"/automation/basic",class:"flex items-center space-x-4 rounded-md bg-indigo-600 px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:C(()=>[ae,k(" "+n(t.$t("Back")),1)]),_:1})])]),e("form",{onSubmit:s[12]||(s[12]=M(i=>U(),["prevent"])),class:"bg-white border py-5 px-5 rounded-[0.5rem]"},[e("div",ce,[e("div",de,[e("h2",pe,n(t.$t("Name")),1)]),e("div",ue,[e("div",me,[p(K,{modelValue:l(o).name,"onUpdate:modelValue":s[0]||(s[0]=i=>l(o).name=i),type:"text",error:l(o).errors.name,class:m("w-full"),labelClass:"mb-0"},null,8,["modelValue","error"])])])]),e("div",he,[e("div",ge,[e("h2",ve,n(t.$t("Trigger")),1),e("span",fe,[xe,k(" "+n(t.$t("Add the string of text responsible for triggering the response")),1)])]),e("div",_e,[e("div",be,[p(X,{modelValue:l(o).trigger,"onUpdate:modelValue":s[1]||(s[1]=i=>l(o).trigger=i),type:"text",error:l(o).errors.trigger,textAreaRows:3,class:m("sm:col-span-6 mb-10")},null,8,["modelValue","error"])])])]),e("div",we,[e("div",ye,[e("h2",ke,n(t.$t("Match criteria")),1),e("span",$e,[Ce,k(" "+n(t.$t("Select the criteria for matching the trigger text above")),1)])]),e("div",Ve,[e("div",Se,[p(j,{modelValue:l(o).match_criteria,"onUpdate:modelValue":s[2]||(s[2]=i=>l(o).match_criteria=i),options:E.value,error:l(o).errors.match_criteria,class:m("sm:col-span-6"),placeholder:t.$t("Select criteria")},null,8,["modelValue","options","error","placeholder"])])])]),e("div",Le,[e("div",Me,[e("h2",je,n(t.$t("Response type")),1)]),e("div",Te,[e("div",Be,[p(j,{modelValue:l(o).response_type,"onUpdate:modelValue":[s[3]||(s[3]=i=>l(o).response_type=i),V],options:F.value,error:l(o).errors.response_type,class:m("sm:col-span-6"),placeholder:"Select Type"},null,8,["modelValue","options","error"])])])]),l(o).response_type==="text"?(c(),a("div",Re,[e("div",Ze,[e("h2",Ee,n(t.$t("Text response")),1)]),e("div",Fe,[e("div",Ae,[e("div",null,[e("div",Pe,[e("div",Ue,[e("textarea",{class:m(["block w-full rounded-md border-0 py-1.5 px-4 text-gray-900 shadow-sm outline-none ring-1 ring-inset placeholder:text-gray-400 sm:text-sm sm:leading-6",l(o).errors.response?"ring-[#b91c1c]":"ring-gray-300"]),onInput:R,rows:"3",ref_key:"textareaRef",ref:v},n(l(o).response),35)]),l(o).errors.response?(c(),a("div",Oe,n(l(o).errors.response),1)):f("",!0)]),e("div",Ne,[e("button",{type:"button",onClick:s[4]||(s[4]=i=>_.value=!0),class:"bg-slate-100 px-2 py-1 rounded-md text-sm flex items-center gap-x-1 shadow-sm"},[k(" Add Variable "),He]),Ie,e("button",{type:"button",onClick:s[5]||(s[5]=i=>y("bold")),class:"hover:bg-slate-100 rounded p-1 ml-3"},Je),e("button",{type:"button",onClick:s[6]||(s[6]=i=>y("italic")),class:"hover:bg-slate-100 rounded p-1 ml-3"},De),e("button",{type:"button",onClick:s[7]||(s[7]=i=>y("strike-through")),class:"hover:bg-slate-100 rounded p-1 ml-3"},We),e("button",{type:"button",onClick:s[8]||(s[8]=i=>y("monospace")),class:"hover:bg-slate-100 rounded p-1 ml-3"},Qe),e("div",Xe,[e("button",{type:"button",onClick:O},"😀"),b.value?(c(),a("div",{key:0,class:"absolute right-0 bottom-full",ref_key:"emojiPickerRef",ref:$},[p(l(ee),{native:!0,onSelect:H})],512)):f("",!0)])])]),e("button",Ye,n(t.$t("Save")),1)])])])):l(o).response_type==="template"?(c(),a("div",et,[e("div",tt,[e("h2",st,n(t.$t("Template response")),1)]),e("div",ot,[e("div",it,[p(Q,{modelValue:l(o).response,"onUpdate:modelValue":s[9]||(s[9]=i=>l(o).response=i),loadOptions:A,error:l(o).errors.response,class:m("sm:col-span-6 mb-10"),placeholder:"Select Template"},null,8,["modelValue","error"]),e("button",lt,n(t.$t("Save")),1)])])])):l(o).response_type==="image"||l(o).response_type==="audio"?(c(),a("div",rt,[e("div",nt,[l(o).response_type==="image"?(c(),a("h2",at,n(t.$t("Image response")),1)):(c(),a("h2",ct,n(t.$t("Audio response")),1))]),e("div",dt,[e("div",pt,[e("div",{class:m([l(o).errors.response?"border-[#b91c1c]":"border-gray-300","flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-md"])},[e("input",{type:"file",class:"sr-only",accept:l(o).response_type==="image"?".jpg, .png":".mp3",ref:"fileInput",id:"file-upload",onChange:s[10]||(s[10]=i=>P(i))},null,40,ut),e("div",mt,[e("div",null,[l(o).response?(c(),a("div",ht,[e("div",gt,[vt,e("div",ft,[e("span",xt,n(((r=l(o).response)==null?void 0:r.name)??l(o).response),1),e("button",{type:"button",onClick:s[11]||(s[11]=i=>V())},bt)])])])):f("",!0),e("div",wt,[l(o).response_type==="image"?(c(),a("label",yt,[e("p",null,n(t.$t("Click to upload image")),1),e("p",kt,n(t.$t("PNG or JPG files only")),1)])):(c(),a("label",$t,[e("p",null,n(t.$t("Click to upload audio")),1),e("p",Ct,n(t.$t("MP3 files only")),1)]))])])])],2),l(o).errors.response?(c(),a("div",Vt,n(l(o).errors.response),1)):f("",!0),e("button",St,n(t.$t("Save")),1)])])])):f("",!0)],32)])]}),_:1}),p(Y,{label:t.$t("Select variable"),isOpen:_.value},{default:C(()=>[Lt,e("div",Mt,[e("div",jt,[(c(!0),a(L,null,D(h.placeholders,r=>(c(),a("button",{onClick:i=>B(r.value),class:"col-span-1 bg-gray-100 p-2 rounded-md text-left hover:bg-gray-50"},n(t.$t(r.label)),9,Tt))),256))]),e("div",Bt,[e("button",{type:"button",onClick:s[13]||(s[13]=M(r=>_.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},n(t.$t("Cancel")),1)])])]),_:1},8,["label","isOpen"])],64))}},as=te(Rt,[["__file","Edit.vue"]]);export{as as default};
