import{r as d,T as x,e as A,f as _,o as f,a as t,t as n,c as y,b as k,h as B,u as v,g as F}from"./app-06066091.js";import S from"./Layout-711a388b.js";import"./index-8e47e887.js";import{d as I}from"./vuedraggable.umd-f11872e4.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import"./App-53e90ba2.js";import"./Sidebar-56399b82.js";import"./Menu-32707887.js";import"./Modal-858f9f8a.js";import"./transition-9e93c540.js";import"./hidden-94645dc9.js";import"./use-outside-click-6f649936.js";import"./micro-task-89dcd6af.js";import"./ProfileModal-9fa7d7fd.js";import"./FormInput-a5364d31.js";import"./FormPhoneInput-8d88435b.js";/* empty css                      */import"./FormSelect-6c96738a.js";import"./use-text-value-6338b60a.js";import"./use-resolve-button-type-737f9372.js";import"./tabs-470b041d.js";import"./LangToggle-4117f8d3.js";import"./OrganizationModal-94b0dd29.js";import"./index-2177aed8.js";import"./MobileSidebar-c9250509.js";/* empty css              */const R={class:"md:h-[90vh]"},C={class:"flex justify-center items-center"},V={class:"md:w-[60em]"},M={class:"bg-white border border-slate-200 rounded-lg py-2 text-sm mb-4 pb-4 px-4 mb-20"},$={class:"w-full py-2 mb-2 mt-2"},j={class:"flex w-full mb-4"},E={class:"text-md"},D={class:"text-[16px]"},L={class:"flex items-center mt-1 text-slate-500"},O={key:0,class:"text-sm mt-2 bg-orange-100 px-2 py-1 rounded-md w-[fit-content]"},T=t("span",{class:"mb-2 flex items-center text-slate-700"},[t("svg",{class:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})]),F(" Drag to reorder ")],-1),Z={class:"flex gap-x-2 bg-slate-50 rounded-md mb-2 p-2 border w-[20em] cursor-pointer"},z=t("span",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M9 19.23q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m-6-6q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m-6-6q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36m6 0q-.508 0-.87-.36q-.36-.362-.36-.87t.36-.87t.87-.36t.87.36q.36.362.36.87t-.36.87t-.87.36"})])],-1),J={__name:"Automation",props:["rows","filters","settings","modules"],setup(w){var u,h;const a=w,p=d(a.settings.metadata),l=d(p.value?JSON.parse(p.value):null),i=e=>{const o=a.modules.find(r=>r.name===e);return o&&o.status===1},g=d(["Basic Replies",i("Flow builder")?"Automated Flows":null,i("AI Assistant")?"AI Reply Assistant":null].filter(e=>e!==null)),m=x({response_sequence:((h=(u=l.value)==null?void 0:u.automation)==null?void 0:h.response_sequence)??g.value}),c={"Automated Flows":"Flow builder","AI Reply Assistant":"AI Assistant"};(()=>{var e,o;if((o=(e=l.value)==null?void 0:e.automation)!=null&&o.response_sequence){const r=l.value.automation.response_sequence.filter(s=>s==="Basic Replies"?!0:i(c[s]||s));Object.keys(c).forEach(s=>{const b=c[s];i(b)&&!r.includes(s)&&r.push(s)}),m.response_sequence=r}})();const q=async()=>{m.post("/settings/automation",{preserveScroll:!0})};return(e,o)=>(f(),A(S,{modules:a.modules},{default:_(()=>[t("div",R,[t("div",C,[t("div",V,[t("div",M,[t("div",$,[t("div",j,[t("div",E,[t("h4",D,n(e.$t("Response Sequence Priority")),1),t("span",L,n(e.$t("Choose the order in which the system searches for a matching response when replying to messages. Set the sequence for Basic Replies, Automated Flows, and AI Assistant to control how replies are prioritized.")),1),i("Flow builder")?(f(),y("div",O,n(e.$t("If a flow is already active for a contact, the response sequence will not be followed.")),1)):k("",!0)])]),t("div",null,[T,B(v(I),{list:v(m).response_sequence,class:"mt-2",onEnd:o[0]||(o[0]=r=>q())},{item:_(({index:r,element:s})=>[t("div",Z,[z,t("span",null,n(s),1)])]),_:1},8,["list"])])])])])])])]),_:1},8,["modules"]))}},wt=N(J,[["__file","Automation.vue"]]);export{wt as default};
