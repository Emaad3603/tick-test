import{r as b,O as A,o as n,c as d,a as e,w as F,v as H,u as N,b as S,h as a,f as i,g as p,t,F as M,d as L,e as R,n as I,l as J,i as W}from"./app-06066091.js";import{A as q}from"./App-53e90ba2.js";/* empty css              */import{d as P}from"./debounce-26497136.js";import{M as U}from"./Modal-858f9f8a.js";import{T as Z}from"./Table-593fb9c4.js";import{T as G,a as K,b as w}from"./TableHeaderRowItem-58f056c6.js";import{T as Q,a as X,b as x}from"./TableBodyRowItem-f7a16ee1.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import{W as Y}from"./WhatsappTemplate-b3fa2415.js";import"./Sidebar-56399b82.js";import"./Menu-32707887.js";import"./ProfileModal-9fa7d7fd.js";import"./FormInput-a5364d31.js";import"./FormPhoneInput-8d88435b.js";/* empty css                      */import"./FormSelect-6c96738a.js";import"./index-8e47e887.js";import"./hidden-94645dc9.js";import"./use-text-value-6338b60a.js";import"./use-outside-click-6f649936.js";import"./use-resolve-button-type-737f9372.js";import"./transition-9e93c540.js";import"./micro-task-89dcd6af.js";import"./tabs-470b041d.js";import"./LangToggle-4117f8d3.js";import"./OrganizationModal-94b0dd29.js";import"./index-2177aed8.js";import"./MobileSidebar-c9250509.js";import"./_baseGetTag-c09aeb4c.js";import"./Pagination-d90e3b69.js";const ee={class:"bg-white flex items-center shadow-sm h-10 w-80 rounded-[0.5rem] mb-6 text-sm"},te=e("span",{class:"pl-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m15 15l6 6m-11-4a7 7 0 1 1 0-14a7 7 0 0 1 0 14Z"})])],-1),se=["placeholder"],ae=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2zm3.7 12.3c.4.4.4 1 0 1.4c-.4.4-1 .4-1.4 0L12 13.4l-2.3 2.3c-.4.4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4l2.3-2.3l-2.3-2.3c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0l2.3 2.3l2.3-2.3c.4-.4 1-.4 1.4 0c.4.4.4 1 0 1.4L13.4 12l2.3 2.3z"})],-1),oe=[ae],le={key:1,class:"pr-2"},ie=J('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"></animateTransform><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"></animateTransform><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"></animateTransform><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle></svg>',1),re=[ie],ne={key:0,class:"border-b border-dashed border-black"},de={key:1,class:"border-b border-dashed border-black"},ce=["onClick"],ue=e("svg",{class:"mr-1",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24"},[e("g",{fill:"currentColor"},[e("path",{d:"M11 10.98a1 1 0 1 1 2 0v6a1 1 0 1 1-2 0zm1-4.929a1 1 0 1 0 0 2a1 1 0 0 0 0-2"}),e("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10s10-4.477 10-10S17.523 2 12 2M4 12a8 8 0 1 0 16 0a8 8 0 0 0-16 0","clip-rule":"evenodd"})])],-1),pe={class:"max-w-md w-full space-y-8"},me={class:"mt-8 space-y-2"},he={class:"text-sm border-b pb-2"},_e={class:"flex items-center capitalize"},fe=e("svg",{class:"mr-1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m1.75 9.75l2.5 2.5m3.5-4l2.5-2.5m-4.5 4l2.5 2.5l6-6.5"})],-1),ge={key:1},ve={class:"text-sm mb-3 bg-red-800 p-2 rounded text-white"},be={key:0,class:"text-sm"},we={key:1},xe={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},ye={class:"mt-2 w-full"},$e={__name:"CampaignLogTable",props:{rows:{type:Object,required:!0},filters:{type:Object},uuid:{type:String}},emits:["delete"],setup(g,{emit:o}){const l=g,m=b({search:l.filters.search}),c=b(null),h=b(null),_=b(!1),f=b(!1),y=()=>{m.value.search=null,O()},B=P(()=>{f.value=!0,O()},1e3),O=()=>{A.visit("/campaigns/"+l.uuid,{method:"get",data:m.value})},D=(r,u)=>{h.value=r,c.value=u,_.value=!0},E=r=>JSON.parse(r).status,$=r=>JSON.parse(r);return(r,u)=>(n(),d(M,null,[e("div",ee,[te,F(e("input",{onInput:u[0]||(u[0]=(...s)=>N(B)&&N(B)(...s)),"onUpdate:modelValue":u[1]||(u[1]=s=>m.value.search=s),type:"text",class:"outline-none px-4 w-full",placeholder:r.$t("Search campaigns")},null,40,se),[[H,m.value.search]]),f.value===!1&&m.value.search?(n(),d("button",{key:0,onClick:y,type:"button",class:"pr-2"},oe)):S("",!0),f.value?(n(),d("span",le,re)):S("",!0)]),a(Z,{rows:g.rows},{default:i(()=>[a(G,null,{default:i(()=>[a(K,null,{default:i(()=>[a(w,{position:"first",class:"hidden sm:table-cell"},{default:i(()=>[p(t(r.$t("Contact")),1)]),_:1}),a(w,null,{default:i(()=>[p(t(r.$t("Phone")),1)]),_:1}),a(w,{class:"hidden sm:table-cell"},{default:i(()=>[p(t(r.$t("Last updated")),1)]),_:1}),a(w,null,{default:i(()=>[p(t(r.$t("Status")),1)]),_:1}),a(w,{position:"last"})]),_:1})]),_:1}),a(Q,null,{default:i(()=>[(n(!0),d(M,null,L(g.rows.data,(s,C)=>(n(),R(X,{key:C},{default:i(()=>[a(x,{position:"first",class:"hidden sm:table-cell"},{default:i(()=>[p(t(s.contact.full_name),1)]),_:2},1024),a(x,null,{default:i(()=>[p(t(s.contact.phone),1)]),_:2},1024),a(x,{class:"hidden sm:table-cell"},{default:i(()=>[s.status==="success"?(n(),d("span",ne,t(s.chat.created_at),1)):(n(),d("span",de,t(s.created_at),1))]),_:2},1024),a(x,null,{default:i(()=>[e("span",{class:I(["px-2 py-1 text-xs rounded-md capitalize",s.status==="success"?"bg-green-700 text-white":"bg-red-400 text-white"])},t(s.status==="success"?s.chat.status:s.status),3)]),_:2},1024),a(x,null,{default:i(()=>[e("div",{onClick:k=>{var v;return D(s.status,s.status==="success"?(v=s.chat)==null?void 0:v.logs:s.metadata)},class:"flex items-center underline cursor-pointer"},[ue,e("span",null,t(r.$t("More info")),1)],8,ce)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["rows"]),a(U,{label:r.$t("Message info"),isOpen:_.value},{default:i(()=>{var s,C,k,v,V,z;return[e("div",pe,[e("div",me,[h.value==="success"?(n(!0),d(M,{key:0},L(c.value,(T,lt)=>(n(),d("div",he,[e("div",_e,[fe,e("span",null,t(r.$t(E(T.metadata))),1)]),e("div",null,t(T.created_at),1)]))),256)):h.value==="failed"?(n(),d("div",ge,[e("div",ve,"Error: "+t($(c.value).data.error.message),1),(k=(C=(s=$(c.value).data)==null?void 0:s.error)==null?void 0:C.error_data)!=null&&k.details?(n(),d("div",be,t((z=(V=(v=$(c.value).data)==null?void 0:v.error)==null?void 0:V.error_data)==null?void 0:z.details),1)):(n(),d("div",we,t($(c.value).data.error.message),1))])):S("",!0)])]),e("div",xe,[e("div",ye,[e("button",{type:"button",onClick:u[2]||(u[2]=T=>_.value=!1),class:"inline-flex float-right justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},t(r.$t("Close")),1)])])]}),_:1},8,["label","isOpen"])],64))}},Ce=j($e,[["__file","CampaignLogTable.vue"]]),ke={class:"p-4 md:p-8 rounded-[5px] h-full overflow-y-auto"},Te={class:"flex justify-between capitalize"},Se={class:"text-xl mb-1"},Me={class:"mb-6 flex items-center text-sm leading-6"},Ne={class:"ml-1 mt-1"},Be={class:"space-x-2"},Oe=["href"],Ve={class:"md:flex md:space-x-4"},ze={class:"md:w-[70%] capitalize"},Le={class:"flex w-[100%] mb-8 rounded-lg"},Re={class:"w-full rounded-tl-lg rounded-bl-lg text-center bg-white py-8 border"},je={class:"text-xl"},De={class:"text-sm"},Ee={class:"w-full text-center bg-white py-8 border"},Ae={class:"text-xl"},Fe={class:"text-sm"},He={class:"w-full text-center bg-white py-8 border"},Ie={class:"text-xl"},Je={class:"text-sm"},We={class:"w-full bg-white text-center py-8 border"},qe={class:"text-xl"},Pe={class:"text-sm"},Ue={class:"w-full rounded-tr-lg rounded-br-lg bg-white text-center py-8 border"},Ze={class:"text-xl"},Ge={class:"text-sm"},Ke={class:"md:w-[30%]"},Qe={class:"w-full rounded-lg bg-white pt-4 pb-8 border px-4 space-y-1 capitalize"},Xe={class:"mb-2"},Ye={class:"text-sm bg-slate-100 p-3 rounded-lg"},et={class:"text-sm bg-slate-100 p-3 rounded-lg"},tt={class:"text-sm bg-slate-100 p-3 rounded-lg"},st={class:"text-sm bg-slate-100 p-3 rounded-lg"},at={class:"w-full rounded-lg p-5 mt-5 border chat-bg"},ot={__name:"View",props:["campaign","rows","filters"],setup(g){const o=g;return(l,m)=>(n(),R(q,null,{default:i(()=>{var c,h,_,f,y;return[e("div",ke,[e("div",Te,[e("div",null,[e("h2",Se,t(l.$t("Campaign details")),1),e("p",Me,[e("span",Ne,t(l.$t("Ref"))+": "+t(o.campaign.uuid),1)])]),e("div",Be,[e("a",{href:"/campaigns/export/"+o.campaign.uuid,class:"rounded-md bg-secondary px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},t(l.$t("Export as CSV")),9,Oe),a(N(W),{href:"/campaigns",class:"rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:i(()=>[p(t(l.$t("Back")),1)]),_:1})])]),e("div",Ve,[e("div",ze,[e("div",Le,[e("div",Re,[e("h2",je,t(o.campaign.total_message_count),1),e("h4",De,t(l.$t("Messages")),1)]),e("div",Ee,[e("h2",Ae,t(o.campaign.total_sent_count),1),e("h4",Fe,t(l.$t("Sent")),1)]),e("div",He,[e("h2",Ie,t(o.campaign.total_delivered_count),1),e("h4",Je,t(l.$t("Delivered")),1)]),e("div",We,[e("h2",qe,t(o.campaign.total_read_count),1),e("h4",Pe,t(l.$t("Read")),1)]),e("div",Ue,[e("h2",Ze,t(o.campaign.total_failed_count),1),e("h4",Ge,t(l.$t("Failed")),1)])]),a(Ce,{rows:o.rows,filters:o.filters,uuid:o.campaign.uuid},null,8,["rows","filters","uuid"])]),e("div",Ke,[e("div",Qe,[e("h2",Xe,t(l.$t("Campaign details")),1),e("div",Ye,[e("h3",null,t(l.$t("Campaign name")),1),e("p",null,t((c=o.campaign)==null?void 0:c.name),1)]),e("div",et,[e("h3",null,t(l.$t("Template")),1),e("p",null,t((_=(h=o.campaign)==null?void 0:h.template)==null?void 0:_.name),1)]),e("div",tt,[e("h3",null,t(l.$t("Recipients")),1),e("p",null,t(o.campaign.contact_group_id==="0"?"All Contacts":(y=(f=o.campaign)==null?void 0:f.contact_group)==null?void 0:y.name),1)]),e("div",st,[e("h3",null,t(l.$t("Time scheduled")),1),e("p",null,t(o.campaign.scheduled_at),1)])]),e("div",at,[a(Y,{parameters:JSON.parse(o.campaign.metadata),placeholder:!1,visible:!0},null,8,["parameters"])])])])])]}),_:1}))}},Dt=j(ot,[["__file","View.vue"]]);export{Dt as default};
