import{m as y,r as d,T as g,e as O,f as _,o as n,a as t,t as o,u as a,c as i,F as T,d as D,h as b,j as v,n as k,g as F,K as C}from"./app-06066091.js";import Y from"./App-d2aece6e.js";import{M as A}from"./Modal-858f9f8a.js";import{P as W}from"./Pagination-d90e3b69.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import"./App-3a5d1971.js";import"./Sidebar-53ff02b1.js";import"./Menu-18e4a0b3.js";import"./ProfileModal-9fa7d7fd.js";import"./FormInput-a5364d31.js";import"./FormPhoneInput-8d88435b.js";/* empty css                      */import"./FormSelect-6c96738a.js";import"./index-8e47e887.js";import"./hidden-94645dc9.js";import"./use-text-value-6338b60a.js";import"./use-outside-click-6f649936.js";import"./use-resolve-button-type-737f9372.js";import"./transition-9e93c540.js";import"./micro-task-89dcd6af.js";import"./tabs-470b041d.js";import"./LangToggle-4117f8d3.js";import"./MobileSidebar-c90c1661.js";import"./index-2177aed8.js";/* empty css              */import"./Sidebar-86915732.js";const K={class:"text-xl mb-6"},P={class:"bg-white border px-2 py-2 rounded-md mb-8"},R={class:"text-sm mb-2"},z={class:"text-sm"},E={class:"text-sm flex items-center gap-x-4 mb-2"},I=["disabled"],J={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},G=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),H=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),Q=[G,H],X={key:1},tt={key:0,class:"mb-8"},et={class:"flex items-center text-sm"},st=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),ot={class:"ml-1 mt-1"},nt={key:1},it=t("div",{class:"flex items-center gap-x-1 text-sm bg-orange-100 py-3 px-2 rounded-md mb-4"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})]),t("span",null,[t("b",null,"Important:"),F(" Before updating backup your database and files")])],-1),rt={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2 mb-6"},at={class:"flex items-center gap-x-2"},lt=["src"],dt=t("h2",{class:"text-xl mb-2"},"Addons",-1),ct={key:2,class:"flex items-center text-sm mb-4"},pt=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),ut={class:"ml-1 mt-1"},mt={key:3,class:"grid grid-cols-2 gap-x-4 gap-y-1"},ht={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2"},vt={class:"flex items-center gap-x-2"},ft=["src","alt"],gt=["onClick"],_t={key:1,class:"border rounded-md px-4 py-1 bg-red-700 text-white flex items-center"},bt=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),xt={class:"ml-1"},wt={class:"grid grid-cols-1 gap-x-6 gap-y-4"},yt={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},kt={class:"flex items-center gap-x-3"},Ct=["src"],At={class:"text-[16px]"},$t={class:"text-[17px] text-gray-800 mb-2"},Zt={class:"text-sm"},Mt={class:"mt-3 border-t pt-5 flex"},St=["disabled"],Bt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Vt=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),jt=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),Ut=[Vt,jt],Nt={key:1},Lt={class:"grid grid-cols-1 gap-x-6 gap-y-4"},Ot={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},Tt={class:"flex items-center gap-x-3"},Dt={class:"text-[16px]"},Ft={class:"text-sm"},Yt={class:"mt-3 border-t pt-5 flex"},Wt=["disabled"],qt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Kt=t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),Pt=t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1),Rt=[Kt,Pt],zt={key:1},Et={__name:"Updates",props:{config:{type:Object,required:!0},rows:{type:Array,required:!0}},setup(p){const $=p,Z=y(()=>C().props.applicationVersion),M=y(()=>C().props.applicationReleaseDate),x=d(null),w=d(null),S=d(null),B=d(!1),u=d(!1),m=d(!1),c=e=>{const s=$.config.find(r=>r.key===e);return s?s.value:""},l=g({uuid:null,purchase_code:null,addon:null,name:null}),h=g({update:!0}),f=g({checkUpdate:!0}),V=()=>{u.value=!0},j=e=>{x.value=e.logo,w.value=e.name,S.value=e.description;const s=e.metadata?JSON.parse(e.metadata):null;l.uuid=e.uuid,l.name=e.name,l.addon=(s==null?void 0:s.name)||e.name,m.value=!0},U=()=>{l.post("/admin/addons/update",{preserveScroll:!0,onSuccess:()=>{m.value=!1}})},N=()=>{h.post("/admin/update",{preserveScroll:!0,onSuccess:()=>{u.value=!1}})},L=()=>{f.get("/admin/updates/check",{preserveScroll:!0,onSuccess:()=>{B.value=!1}})};return(e,s)=>(n(),O(Y,null,{default:_(()=>[t("div",null,[t("h2",K,o(e.$t("Swiftchats Updates")),1),t("div",P,[t("div",R,"Current Version: v"+o(Z.value),1),t("div",z,"Released Date: "+o(M.value),1)]),t("div",E,[t("span",null,"Last checked on "+o(c("last_update_check")),1),t("button",{onClick:s[0]||(s[0]=r=>L()),disabled:a(f).processing,class:"border px-2 py-1 text-sm rounded-md bg-primary text-white"},[a(f).processing?(n(),i("svg",J,Q)):(n(),i("span",X,"Check Again"))],8,I)]),c("is_update_available")==0?(n(),i("div",tt,[t("p",et,[st,t("span",ot,o(e.$t("You have installed the latest version of Swiftchats")),1)])])):(n(),i("div",nt,[it,t("div",rt,[t("div",at,[t("img",{class:"h-5 w-full",src:"/images/logo.png",alt:"Swiftchats Logo"},null,8,lt),t("span",null,"v"+o(c("available_version")),1)]),t("button",{onClick:s[1]||(s[1]=r=>V()),class:"border rounded-md px-4 py-1"},o(e.$t("Update to version")+" "+c("available_version")),1)])])),dt,p.rows.data.length==0?(n(),i("p",ct,[pt,t("span",ut,o(e.$t("Your addons are all upto date.")),1)])):(n(),i("div",mt,[(n(!0),i(T,null,D(p.rows.data,r=>(n(),i("div",ht,[t("div",vt,[t("img",{class:"h-8 w-8",src:"/images/"+r.logo,alt:r.name},null,8,ft),t("span",null,o(r.name),1)]),c("is_update_available")==0?(n(),i("button",{key:0,onClick:It=>j(r),class:"border rounded-md px-4 py-1"},"Update",8,gt)):(n(),i("div",_t,[bt,t("span",xt,o(e.$t("Update script first")),1)]))]))),256))])),b(W,{class:"mt-3",pagination:p.rows.meta},null,8,["pagination"])]),b(A,{isOpen:m.value},{default:_(()=>[t("div",wt,[t("div",yt,[t("div",kt,[t("div",null,[t("img",{class:"h-8 w-8",src:"/images/"+x.value,alt:"Whatsapp Logo"},null,8,Ct)]),t("div",At,o(e.$t(w.value)),1)])]),t("form",{onSubmit:s[3]||(s[3]=v(r=>U(),["prevent"]))},[t("div",null,[t("div",$t,o(e.$t("Update module")),1),t("h4",Zt,o(e.$t("A new version is available. Would you like to proceed with updating the module?")),1)]),t("div",Mt,[t("button",{type:"button",onClick:s[2]||(s[2]=v(r=>m.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(e.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":a(l).processing}]),disabled:a(l).processing},[a(l).processing?(n(),i("svg",Bt,Ut)):(n(),i("span",Nt,o(e.$t("Yes, run the update")),1))],10,St)])],32)])]),_:1},8,["isOpen"]),b(A,{isOpen:u.value},{default:_(()=>[t("div",Lt,[t("div",Ot,[t("div",Tt,[t("div",Dt,o(e.$t("Update to the latest version")),1)])]),t("form",{onSubmit:s[5]||(s[5]=v(r=>N(),["prevent"]))},[t("div",null,[t("h4",Ft,o(e.$t("Would you like to proceed with updating Swiftchats?")),1)]),t("div",Yt,[t("button",{type:"button",onClick:s[4]||(s[4]=v(r=>u.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(e.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":a(h).processing}]),disabled:a(h).processing},[a(h).processing?(n(),i("svg",qt,Rt)):(n(),i("span",zt,o(e.$t("Yes, run the update")),1))],10,Wt)])],32)])]),_:1},8,["isOpen"])]),_:1}))}},we=q(Et,[["__file","Updates.vue"]]);export{we as default};
